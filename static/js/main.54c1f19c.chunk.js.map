{"version":3,"sources":["muse/MuseConfig.ts","muse/Border.tsx","muse/Fraction.ts","muse/Selector.ts","muse/MuseNote.tsx","muse/MuseBar.tsx","muse/MuseTrack.tsx","muse/MuseLine.tsx","muse/MusePage.tsx","muse/MuseNotation.tsx","muse/Muse.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["MuseConfig","noteHeight","noteWidth","noteFontSize","noteFontFamily","sigFontSize","trackGap","lineGap","pointGap","tailPointGap","pointRound","pageE","pageWidth","pageMarginHorizontal","pageMarginVertical","infoTitleFontSize","infoSubtitleFontSize","infoGap","infoFontSize","pageIndexFontSize","textFontFamily","showBorder","Border","w","h","x","y","clazz","show","color","className","transform","width","height","stroke","strokeWidth","fill","OuterBorder","Fraction","u","d","pos","search","this","parseInt","substr","a","b","t","n","gcd","f","r","simplify","Selector","s","document","addEventListener","ev","kind","key","reduceLine","reduceTailPoint","setNum","reducePoint","clear","level","setSelect","instance","SubNote","selection","isSelect","observable","Note","o","bar","idx","config","l","p","index","decode","dxx","subNotes","forEach","it","Math","pow","ny","i","push","py","mb","notesY","dx","notesMaxHeight","notesX","notesMaxMarginBottom","undefined","ns","ts","split","length","charCodeAt","charAt","tg","computed","MuseSubNote","observer","props","onClick","console","log","select","subNote","fontFamily","fontSize","S","F","DS","DF","N","React","Component","MuseNote","note","marginBottom","map","pointsY","pointGroup","tailPointsX","tailPoint","Bar","track","barsWidth","notes","barsX","time","notesTime","reduce","plus","init","space","notesWidthSum","unit","divide","notesTimeSum","toNumber","notesWidth","multiply","max","preHeight","preMarginBottom","e","code","BarLine","useObserver","x1","y1","x2","y2","BaseLine","baselineGroup","MuseBar","Track","line","bars","tracksY","timeSum","barsTime","barsNotesWidth","preNotesMaxHeight","preNotesMaxMarginBottom","MuseTrack","Line","page","tracks","linesY","LineHead","MuseLine","Page","notation","marginTop","mt","g","info","author","lines","sum","linesHeight","gap","PageIndex","textAnchor","toString","MusePage","marginLeft","marginRight","NotationInfo","Notation","pages","title","subtitle","speed","rhythmic","C","MuseNotationInfo","y3","rythimic","MuseNotation","margin","Muse","JSON","parse","data","App","state","error","isLoaded","fetch","then","res","text","result","setState","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.54c1f19c.chunk.js","sourcesContent":["export default class MuseConfig {\n  noteHeight = 22;\n  noteWidth = 11;\n  noteFontSize = 22;\n  noteFontFamily = \"serif\";\n  sigFontSize = 14;\n\n  trackGap = 10;\n\n  lineGap = 40;\n\n  pointGap = 5;\n  tailPointGap = 8;\n  pointRound = 1.5;\n\n  pageE = 1.414;\n  pageWidth = 1000;\n  pageMarginHorizontal = 100;\n  pageMarginVertical = 110;\n\n  infoTitleFontSize = 34;\n  infoSubtitleFontSize = 22;\n  infoGap = 7;\n  infoFontSize = 20;\n\n  pageIndexFontSize = 20;\n\n  textFontFamily = \"serif\";\n\n  showBorder = false;\n}\n","import React from \"react\";\n\ninterface BorderProps {\n  w: number;\n  h: number;\n  x: number;\n  y: number;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const Border: React.FC<BorderProps> = ({\n  w,\n  h,\n  x,\n  y,\n  clazz,\n  show = false,\n  color = \"blue\",\n}: BorderProps) => {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__border\"}\n        transform={\"translate(\" + x + \",\" + y + \")\"}\n        width={w}\n        height={h}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n\ninterface OuterBorderProps {\n  w: number;\n  h: number;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const OuterBorder: React.FC<OuterBorderProps> = ({\n  w,\n  h,\n  clazz,\n  show = false,\n  color = \"gray\",\n}: OuterBorderProps) => {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__outer-border\"}\n        transform={\"translate(0,0)\"}\n        width={w}\n        height={h}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n","export default class Fraction {\n  u: number = 0;\n  d: number = 1;\n  parse(x: string): Fraction {\n    let pos = x.search(\"/\");\n    if (pos !== -1) {\n      this.u = parseInt(x.substr(0, pos));\n      this.d = parseInt(x.substr(pos + 1));\n    } else {\n      this.u = parseInt(x);\n    }\n    return this;\n  }\n  init(u: number, d: number): Fraction {\n    this.u = u;\n    this.d = d;\n    return this;\n  }\n  gcd(a: number, b: number): number {\n    while (b !== 0) {\n      let t = b;\n      b = a % b;\n      a = t;\n    }\n    return a;\n  }\n  simplify(): Fraction {\n    let n: number;\n    while ((n = this.gcd(this.u, this.d)) > 1 || n < -1) {\n      this.u /= n;\n      this.d /= n;\n    }\n    return this;\n  }\n  plus(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d + this.d * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  minus(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d - this.d * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  multiply(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  divide(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d;\n    r.d = this.d * f.u;\n    return r.simplify();\n  }\n  toNumber(): number {\n    return this.u / this.d;\n  }\n  toString(): string {\n    if (this.d === 1) {\n      return `${this.u}`\n    } else {\n      return `${this.u}/${this.d}`\n    }\n  }\n}\n","export interface SelectionNote {\n  kind: \"note\";\n  level: 1;\n  setSelect: (i: boolean) => void;\n  reduceLine: (l: number) => void;\n  reduceTailPoint: (p: number) => void;\n}\n\nexport interface SelectionSubNote {\n  kind: \"subnote\";\n  level: 0;\n  setSelect: (i: boolean) => void;\n  setNum: (n: string) => void;\n  reducePoint: (h: number) => void;\n}\n\nclass Selector {\n  s: SelectionNote | SelectionSubNote | null = null;\n  static instance = new Selector();\n  private constructor() {\n    document.addEventListener(\"keydown\", (ev) => {\n      if (this.s !== null) {\n        if (this.s.kind === \"note\") {\n          if (ev.key === \"q\") {\n            this.s.reduceLine(-1);\n          } else if (ev.key === \"a\") {\n            this.s.reduceLine(1);\n          } else if (ev.key === \"s\") {\n            this.s.reduceTailPoint(-1);\n          } else if (ev.key === \"d\") {\n            this.s.reduceTailPoint(1);\n          }\n        } else if (this.s.kind === \"subnote\") {\n          if ((ev.key >= \"0\" && ev.key <= \"9\") || ev.key === \"-\") {\n            this.s.setNum(ev.key);\n          } else if (ev.key === \"r\") {\n            this.s.reducePoint(1);\n          } else if (ev.key === \"f\") {\n            this.s.reducePoint(-1);\n          }\n        }\n      }\n    });\n  }\n  select(s: SelectionNote | SelectionSubNote, clear: boolean) {\n    if (this.s !== null && s.level <= this.s.level) {\n      if (clear) {\n        this.clear();\n      }\n      this.s = s;\n      s.setSelect(true);\n    } else {\n      if (clear) {\n        this.clear();\n      }\n      this.s = s;\n      s.setSelect(true);\n    }\n  }\n  clear() {\n    this.s?.setSelect(false);\n  }\n}\n\nexport default Selector;\n","import React from \"react\";\nimport { Border, OuterBorder } from \"./Border\";\nimport MuseConfig from \"./MuseConfig\";\nimport Codec from \"./Codec\";\nimport Fraction from \"./Fraction\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport Selector, { SelectionNote, SelectionSubNote } from \"./Selector\";\nimport { Bar } from \"./MuseBar\";\n\nexport interface INote {\n  n: string;\n}\n\nclass SubNote {\n  @observable x: string = \"\";\n  @observable n: string = \"\";\n  @observable t: number = 0;\n  @observable isSelect = false;\n  selection: SelectionSubNote = {\n    kind: \"subnote\",\n    level: 0,\n    setSelect: (s: boolean) => {\n      this.isSelect = s;\n    },\n    setNum: (n: string) => {\n      this.n = n;\n    },\n    reducePoint: (h: number) => {\n      this.t += h;\n    },\n  };\n  constructor({ x, n, t }: { x: string; n: string; t: number }) {\n    this.x = x;\n    this.n = n;\n    this.t = t;\n  }\n}\n\nexport class Note implements Codec {\n  readonly config: MuseConfig;\n  @observable index: number;\n  @observable bar: Bar;\n  @observable subNotes: SubNote[] = [];\n  @observable l: number = 0;\n  @observable p: number = 0;\n  @observable d: number = 0;\n  @computed get dx(): number {\n    let dxx = false;\n    this.subNotes.forEach((it) => {\n      if (it.x !== \"\") {\n        dxx = true;\n      }\n    });\n    return dxx ? this.config.sigFontSize / 2 : 0;\n  }\n  @computed get time(): Fraction {\n    let r = new Fraction();\n    r.u = 1;\n    r.d *= Math.pow(2, this.l);\n    r.d *= this.d;\n    r.d *= Math.pow(2, this.p); //3/2 7/4 15/8\n    r.u *= Math.pow(2, this.p + 1) - 1;\n    return r.simplify();\n  }\n  @computed get notesY(): number[] {\n    let r: number[] = [];\n    let ny = 0;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            ny += x;\n          }\n        }\n      }\n      r.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          ny += x;\n        }\n      }\n    });\n    return r;\n  }\n  @computed get pointsY(): number[] {\n    let r: number[] = [];\n    let py = 0;\n    let ny = 0;\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x / 2;\n            r.push(-mb);\n            mb += x / 2;\n          }\n        }\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            py += x / 2;\n            r.push(py);\n            py += x / 2;\n            ny += x;\n          }\n        }\n      }\n      this.notesY.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      py += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          py += x / 2;\n          r.push(py);\n          py += x / 2;\n          ny += x;\n        }\n      }\n    });\n    return r;\n  }\n  @computed get tailPointsX(): number[] {\n    let r: number[] = [];\n    for (let i = 0; i < this.p; ++i) {\n      r.push(\n        this.dx + this.config.noteWidth + (i + 1 / 2) * this.config.tailPointGap\n      );\n    }\n    return r;\n  }\n  @computed get width(): number {\n    return this.dx + this.config.noteWidth + this.p * this.config.tailPointGap;\n  }\n  @computed get preHeight(): number {\n    let h = 0;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            h += x;\n          }\n        }\n      }\n      h += this.config.noteHeight;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          h += x;\n        }\n      }\n    });\n    return h;\n  }\n  @computed get height(): number {\n    return this.bar.notesMaxHeight;\n  }\n  @computed get x(): number {\n    return this.bar.notesX[this.index];\n  }\n  @computed get preMarginBottom(): number {\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x;\n          }\n        }\n      }\n    });\n    return mb;\n  }\n  @computed get marginBottom(): number {\n    return this.bar.notesMaxMarginBottom;\n  }\n  @observable isSelect: boolean = false;\n  constructor(o: INote, bar: Bar, idx: number) {\n    this.config = bar.config;\n    this.bar = bar;\n    this.index = idx;\n    this.decode(o);\n  }\n  selection: SelectionNote = {\n    kind: \"note\",\n    level: 1,\n    setSelect: (s: boolean) => {\n      this.isSelect = s;\n    },\n\n    reduceLine: (l: number) => {\n      this.l += l;\n      if (this.l < 0) {\n        this.l = 0;\n      }\n    },\n    reduceTailPoint: (p: number) => {\n      this.p += p;\n      if (this.p < 0) {\n        this.p = 0;\n      }\n    },\n  };\n  decode(o: INote): void {\n    if (o.n !== undefined) {\n      let n: string = o.n;\n      let pos = n.search(\"@\");\n      let ns = \"\";\n      let ts = \"\";\n      if (pos === -1) {\n        ns = n;\n        ts = \"0|0\";\n      } else {\n        ns = n.substr(0, pos);\n        ts = n.substr(pos + 1);\n      }\n      let ng = ns.split(\"|\");\n      ng.forEach((it) => {\n        for (let i = 0; i < it.length; ++i) {\n          if (\n            (it.charCodeAt(i) <= 57 && it.charCodeAt(i) >= 48) ||\n            it.charCodeAt(i) === 45\n          ) {\n            let x = it.substr(0, i);\n            let n = it.charAt(i);\n            let t = it.substr(i + 1).length;\n            if (t !== 0 && it.charAt(i + 1) === \"-\") {\n              t = -t;\n            }\n            this.subNotes.push(new SubNote({ x, n, t }));\n            break;\n          }\n        }\n      });\n      let tg = ts.split(\"|\");\n      if (tg.length === 3) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = parseInt(tg[2]);\n      } else if (tg.length === 2) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = 1;\n      } else if (tg.length === 1) {\n        this.l = parseInt(tg[0]);\n        this.p = 0;\n        this.d = 1;\n      } else {\n        this.l = 0;\n        this.p = 0;\n        this.d = 1;\n      }\n    }\n  }\n  code(): INote {\n    let ns: string = \"\";\n    this.subNotes.forEach((it, idx) => {\n      let t = \"\";\n      if (it.t > 0) {\n        for (let i = 0; i < it.t; ++i) {\n          t += \"+\";\n        }\n      } else {\n        for (let i = 0; i < -it.t; ++i) {\n          t += \"-\";\n        }\n      }\n      if (idx + 1 >= this.subNotes.length) {\n        ns += `${it.x}${it.n}${t}`;\n      } else {\n        ns += `${it.x}${it.n}${t}|`;\n      }\n    });\n    let n = `${ns}@${this.l}|${this.p}`;\n    return { n };\n  }\n}\n\nfunction castX(x: string) {\n  let m: Record<string, string> = {\n    S: \"#\",\n    F: \"b\",\n    DS: \"x\",\n    DF: \"d\",\n    N: \"n\",\n  };\n  return m[x] || \"\";\n}\n\nfunction pointGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-point\"}>\n      {note.pointsY.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            (note.dx + note.config.noteWidth / 2) +\n            \",\" +\n            (note.height - it + note.config.pointGap / 2) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction tailPoint(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__tail-point\"}>\n      {note.tailPointsX.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            it +\n            \",\" +\n            (note.height - note.config.noteHeight / 3) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\ninterface MuseSubNoteProps {\n  dx: number;\n  y: number;\n  w: number;\n  h: number;\n  config: MuseConfig;\n  subNote: SubNote;\n}\n@observer\nclass MuseSubNote extends React.Component<MuseSubNoteProps, {}> {\n  render() {\n    return (\n      <g\n        className={\"muse-note__subnote\"}\n        transform={\"translate(\" + 0 + \",\" + this.props.y + \")\"}\n        width={this.props.w}\n        height={this.props.h}\n        onClick={() => {\n          console.log(\"subnote\");\n          Selector.instance.select(this.props.subNote.selection, true);\n          console.log(this.props.subNote.isSelect);\n        }}\n      >\n        <text\n          fontFamily={this.props.config.noteFontFamily}\n          fontSize={this.props.config.noteFontSize}\n          transform={\"translate(\" + this.props.dx + \",\" + 0 + \")\"}\n        >\n          {this.props.subNote.n}\n        </text>\n        <text\n          fontFamily={this.props.config.noteFontFamily}\n          fontSize={this.props.config.sigFontSize}\n          transform={\n            \"translate(\" +\n            0 +\n            \",\" +\n            (this.props.config.sigFontSize - this.props.config.noteHeight) +\n            \")\"\n          }\n        >\n          {castX(this.props.subNote.x)}\n        </text>\n        <Border\n          x={0}\n          y={0}\n          w={24}\n          h={24}\n          clazz={\"muse-note__subnote\"}\n          show={this.props.subNote.isSelect}\n        />\n      </g>\n    );\n  }\n}\n\n@observer\nclass MuseNote extends React.Component<{ note: Note }, {}> {\n  render() {\n    let clazz = \"muse-note\";\n    return (\n      <g\n        className={clazz}\n        transform={\"translate(\" + this.props.note.x + \",\" + 0 + \")\"}\n        width={this.props.note.width}\n        height={this.props.note.height}\n        onClick={() => {\n          console.log(\"note\");\n          Selector.instance.select(this.props.note.selection, true);\n        }}\n      >\n        <OuterBorder\n          w={this.props.note.width}\n          h={this.props.note.height + this.props.note.marginBottom}\n          clazz={clazz}\n          show={this.props.note.isSelect}\n          color={\"blue\"}\n        />\n        {this.props.note.subNotes.map((it, idx) => (\n          <MuseSubNote\n            key={idx}\n            dx={this.props.note.dx}\n            y={this.props.note.height - this.props.note.notesY[idx]}\n            w={this.props.note.width}\n            h={22}\n            config={this.props.note.config}\n            subNote={it}\n          />\n        ))}\n        {pointGroup(this.props.note, clazz)}\n        {tailPoint(this.props.note, clazz)}\n      </g>\n    );\n  }\n}\n\nexport default MuseNote;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNote, { INote, Note } from \"./MuseNote\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer, useObserver } from \"mobx-react\";\nimport Fraction from \"./Fraction\";\nimport { Track } from \"./MuseTrack\";\n\ninterface Baseline {\n  y: number;\n  s: number;\n  e: number;\n}\n\nexport interface IBar {\n  notes: INote[];\n}\n\nexport class Bar implements Codec {\n  readonly config: MuseConfig;\n  readonly index: number;\n  @observable track: Track;\n  @observable notes: Note[] = [];\n  @computed get width(): number {\n    return this.track.barsWidth[this.index];\n  }\n  @computed get height(): number {\n    let h = 0;\n    this.notes.forEach((it) => {\n      let u = it.height + it.marginBottom;\n      h = u > h ? u : h;\n    });\n    return h;\n  }\n  @computed get x(): number {\n    return this.track.barsX[this.index];\n  }\n  @computed get y(): number {\n    return 0;\n  }\n  @computed get notesTime(): Fraction[] {\n    return this.notes.map((it) => it.time);\n  }\n  @computed get notesTimeSum(): Fraction {\n    return this.notesTime\n      .reduce((a, b) => a.plus(b), new Fraction())\n      .plus(new Fraction().init(1, 1));\n  }\n  @computed get notesWidth(): number[] {\n    return this.notes.map((it) => it.width);\n  }\n  @computed get notesX(): number[] {\n    let space = this.width - this.notesWidthSum;\n    let unit = new Fraction().init(space, 1).divide(this.notesTimeSum);\n    let x = unit.toNumber();\n    return this.notesWidth.map((it, idx) => {\n      let r = x;\n      x += it + this.notesTime[idx].multiply(unit).toNumber();\n      return r;\n    });\n  }\n  @computed get preNotesMaxHeight(): number {\n    return Math.max(...this.notes.map((it) => it.preHeight));\n  }\n  @computed get notesMaxHeight(): number {\n    return this.track.notesMaxHeight;\n  }\n  @computed get preNotesMaxMarginBottom(): number {\n    return Math.max(...this.notes.map((it) => it.preMarginBottom));\n  }\n  @computed get notesMaxMarginBottom(): number {\n    return this.track.notesMaxMarginBottom;\n  }\n  @computed get baselineGroup(): Baseline[] {\n    let r: {\n      y: number;\n      s: number;\n      e: number;\n    }[] = [];\n    for (let i = 0; ; ++i) {\n      let x = 0;\n      let s = 0;\n      let e = -1;\n      this.notes.forEach((it, idx) => {\n        if (it.l > i) {\n          e = idx;\n          x++;\n        } else {\n          if (s <= e) r.push({ y: i, s: s, e: e });\n          s = idx + 1;\n          e = idx;\n        }\n      });\n      if (s <= e) r.push({ y: i, s: s, e: e });\n      if (x === 0) {\n        break;\n      }\n    }\n    return r;\n  }\n  @computed get notesWidthSum(): number {\n    let w = 0;\n    this.notes.forEach((it) => (w += it.width));\n    return w;\n  }\n  constructor(o: IBar, index: number, track: Track, config: MuseConfig) {\n    this.index = index;\n    this.track = track;\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: IBar): void {\n    if (o.notes !== undefined) {\n      o.notes.forEach((it: INote, idx) => {\n        this.notes.push(new Note(it, this, idx));\n      });\n    }\n  }\n  code(): IBar {\n    let notes: INote[] = this.notes.map((it) => it.code());\n    return { notes };\n  }\n}\n\nconst BarLine: React.FC<{ w: number; h: number; clazz: string }> = (props: {\n  w: number;\n  h: number;\n  clazz: string;\n}) => {\n  let [width, height] = useObserver(() => {\n    return [props.w, props.h];\n  });\n  return (\n    <line\n      className={props.clazz + \"__bar-line\"}\n      x1={width}\n      y1={0}\n      x2={width}\n      y2={height}\n      strokeWidth={1}\n      stroke=\"black\"\n    />\n  );\n};\n\nconst BaseLine: React.FC<{ bar: Bar; clazz: string }> = ({\n  bar,\n  clazz,\n}: {\n  bar: Bar;\n  clazz: string;\n}) => {\n  let [baselineGroup, notes] = useObserver(() => {\n    return [bar.baselineGroup, bar.notes];\n  });\n  return (\n    <g className={clazz + \"__base-line\"}>\n      {baselineGroup.map((it, idx) => (\n        <line\n          key={idx}\n          x1={notes[it.s].x}\n          y1={notes[it.s].height + (it.y + 1) * bar.config.pointGap}\n          x2={notes[it.e].x + bar.notes[it.e].width}\n          y2={notes[it.s].height + (it.y + 1) * bar.config.pointGap}\n          stroke={\"black\"}\n          strokeWidth={1}\n        />\n      ))}\n    </g>\n  );\n};\n\n@observer\nclass MuseBar extends React.Component<{ bar: Bar }, {}> {\n  render() {\n    let notes = this.props.bar.notes;\n    let clazz = \"muse-bar\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.bar.x + \",\" + this.props.bar.y + \")\"\n        }\n        width={this.props.bar.width}\n        height={this.props.bar.height}\n      >\n        <Border\n          w={this.props.bar.width}\n          h={this.props.bar.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.bar.config.showBorder}\n        />\n        <BarLine\n          w={this.props.bar.width}\n          h={this.props.bar.height}\n          clazz={clazz}\n        />\n        {notes.map((it, idx) => (\n          <MuseNote key={idx} note={it} />\n        ))}\n        <BaseLine bar={this.props.bar} clazz={clazz} />\n      </g>\n    );\n  }\n}\n\nexport default MuseBar;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseBar, { Bar, IBar } from \"./MuseBar\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { Line } from \"./MuseLine\";\nimport Fraction from \"./Fraction\";\nimport { observer } from \"mobx-react\";\n\nexport interface ITrack {\n  bars: IBar[];\n}\n\nexport class Track implements Codec {\n  readonly config: MuseConfig;\n  readonly index: number;\n  readonly line: Line;\n  @observable bars: Bar[] = [];\n  @computed get width(): number {\n    return this.line.width;\n  }\n  @computed get height(): number {\n    let h = 0;\n    this.bars.forEach((it) => {\n      h = it.height > h ? it.height : h;\n    });\n    return h;\n  }\n  @computed get x(): number {\n    return 0;\n  }\n  @computed get y(): number {\n    return this.line.tracksY[this.index];\n  }\n  @computed get barsTime(): Fraction[] {\n    return this.bars.map((it) => it.notesTimeSum);\n  }\n  @computed get barsWidth(): number[] {\n    let timeSum = this.barsTime.reduce((a, b) => a.plus(b), new Fraction());\n    let space = this.width - this.notesWidthSum;\n    let unit = new Fraction().init(space, 1).divide(timeSum);\n    return this.barsNotesWidth.map((it, idx) => {\n      return it + this.barsTime[idx].multiply(unit).toNumber();\n    });\n  }\n  @computed get barsX(): number[] {\n    let x = 0;\n    return this.barsWidth.map((it) => {\n      let r = x;\n      x += it;\n      return r;\n    });\n  }\n  @computed get notesMaxHeight(): number {\n    return Math.max(...this.bars.map((it) => it.preNotesMaxHeight));\n  }\n  @computed get notesMaxMarginBottom(): number {\n    return Math.max(...this.bars.map((it) => it.preNotesMaxMarginBottom));\n  }\n  @computed get notesWidthSum(): number {\n    return this.barsNotesWidth.reduce((a, b) => a + b, 0);\n  }\n  @computed get barsNotesWidth(): number[] {\n    return this.bars.map((it) => it.notesWidthSum);\n  }\n  constructor(o: ITrack, index: number, line: Line, config: MuseConfig) {\n    this.index = index;\n    this.line = line;\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: ITrack): void {\n    if (o.bars !== undefined) {\n      o.bars.forEach((it: any, idx) => {\n        this.bars.push(new Bar(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): ITrack {\n    let bars: IBar[] = this.bars.map((it) => it.code());\n    return { bars };\n  }\n}\n\n@observer\nclass MuseTrack extends React.Component<{ track: Track }> {\n  render() {\n    let clazz = \"muse-track\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.track.x + \",\" + this.props.track.y + \")\"\n        }\n        width={this.props.track.width}\n        height={this.props.track.height}\n      >\n        <Border\n          w={this.props.track.width}\n          h={this.props.track.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.track.config.showBorder}\n        />\n        {this.props.track.bars.map((it, idx) => (\n          <MuseBar key={idx} bar={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MuseTrack;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseTrack, { ITrack, Track } from \"./MuseTrack\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { Page } from \"./MusePage\";\n\nexport interface ILine {\n  tracks: ITrack[];\n}\n\nexport class Line implements Codec {\n  readonly page: Page;\n  readonly index: number;\n  readonly config: MuseConfig;\n  @observable tracks: Track[] = [];\n  @computed get width() {\n    return this.page.width;\n  }\n  @computed get height() {\n    let h = 0;\n    this.tracks.forEach((it) => {\n      h += it.height + this.config.trackGap;\n    });\n    h -= this.config.trackGap;\n    return h;\n  }\n  @computed get x() {\n    return this.page.x;\n  }\n  @computed get y() {\n    return this.page.linesY[this.index];\n  }\n  @computed get tracksY(): number[] {\n    let y = 0;\n    return this.tracks.map((it) => {\n      let r = y;\n      y += it.height + this.config.trackGap;\n      return r;\n    });\n  }\n  constructor(o: ILine, index: number, page: Page, config: MuseConfig) {\n    this.page = page;\n    this.index = index;\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: ILine): void {\n    if (o.tracks !== undefined) {\n      o.tracks.forEach((it: ITrack, idx) => {\n        this.tracks.push(new Track(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): ILine {\n    let tracks: ITrack[] = this.tracks.map((it) => it.code());\n    return { tracks };\n  }\n}\n\nconst LineHead: React.FC<{ height: number; clazz: string }> = ({\n  height,\n  clazz,\n}: {\n  height: number;\n  clazz: string;\n}) => {\n  return (\n    <g className={clazz + \"__line-head\"}>\n      <line x1={0} y1={0} x2={0} y2={height} strokeWidth={1} stroke=\"black\" />\n    </g>\n  );\n};\n\n@observer\nclass MuseLine extends React.Component<{ line: Line }> {\n  render() {\n    let clazz = \"muse-line\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.line.x + \",\" + this.props.line.y + \")\"\n        }\n        width={this.props.line.width}\n        height={this.props.line.height}\n      >\n        <Border\n          w={this.props.line.width}\n          h={this.props.line.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.line.config.showBorder}\n        />\n        <LineHead height={this.props.line.height} clazz={clazz} />\n        {this.props.line.tracks.map((it, idx) => (\n          <MuseTrack key={idx} track={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MuseLine;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseLine, { ILine, Line } from \"./MuseLine\";\nimport { Border, OuterBorder } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { Notation } from \"./MuseNotation\";\nimport { observer } from \"mobx-react\";\n\nexport interface IPage {\n  lines: ILine[];\n}\n\nexport class Page implements Codec {\n  readonly notation: Notation;\n  readonly config: MuseConfig;\n  readonly index: number;\n  @observable lines: Line[] = [];\n  @computed get width() {\n    return this.config.pageWidth - this.config.pageMarginHorizontal * 2;\n  }\n  @computed get height() {\n    return (\n      this.config.pageWidth * this.config.pageE -\n      this.config.pageMarginVertical * 2\n    );\n  }\n  @computed get x() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get y() {\n    return this.marginTop + this.index * this.height;\n  }\n  @computed get marginTop() {\n    let mt = 0;\n    if (this.index === 0) {\n      mt += this.config.pageMarginVertical;\n      let g = this.config.infoGap;\n      mt += this.config.infoTitleFontSize + g;\n      mt += this.config.infoSubtitleFontSize + g;\n      if (this.notation.info.author.length > 2) {\n        mt += this.notation.info.author.length * (this.config.infoFontSize + g);\n      } else {\n        mt += 2 * (this.config.infoFontSize + g);\n      }\n    } else {\n      mt = this.config.pageMarginVertical;\n    }\n    return mt;\n  }\n  @computed get marginBottom() {\n    return this.config.pageMarginVertical;\n  }\n  @computed get marginLeft() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get marginRight() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get linesHeight(): number[] {\n    return this.lines.map((it) => it.height);\n  }\n  @computed get linesY() {\n    let y = this.marginTop;\n    let sum = this.linesHeight.reduce((a, b) => a + b, 0);\n    let gap = (this.height - sum) / (this.lines.length - 1);\n    return this.linesHeight.map((it) => {\n      let r = y;\n      y += it + gap;\n      return r;\n    });\n  }\n  constructor(o: IPage, index: number, notation: Notation, config: MuseConfig) {\n    this.index = index;\n    this.notation = notation;\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: IPage): void {\n    if (o.lines !== undefined) {\n      o.lines.forEach((it: ILine, idx) => {\n        this.lines.push(new Line(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): IPage {\n    let lines: ILine[] = this.lines.map((it) => it.code());\n    return { lines };\n  }\n}\n\ninterface PageIndexProps {\n  index: number;\n  x: number;\n  y: number;\n  clazz: string;\n  config: MuseConfig;\n}\n\nconst PageIndex: React.FC<PageIndexProps> = ({\n  index,\n  x,\n  y,\n  clazz,\n  config,\n}: PageIndexProps) => {\n  return (\n    <g\n      className={clazz + \"__page-index\"}\n      transform={\"translate(\" + x + \",\" + y + \")\"}\n    >\n      <text\n        textAnchor={\"middle\"}\n        fontFamily={config.textFontFamily}\n        fontSize={config.pageIndexFontSize}\n      >\n        {(index + 1).toString()}\n      </text>\n    </g>\n  );\n};\n\n@observer\nclass MusePage extends React.Component<{ page: Page }> {\n  render() {\n    let clazz = \"muse-page\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" +\n          (this.props.page.x - this.props.page.marginLeft) +\n          \",\" +\n          (this.props.page.y - this.props.page.marginTop) +\n          \")\"\n        }\n        width={\n          this.props.page.width +\n          this.props.page.marginLeft +\n          this.props.page.marginRight\n        }\n        height={\n          this.props.page.height +\n          this.props.page.marginTop +\n          this.props.page.marginBottom\n        }\n      >\n        <Border\n          w={this.props.page.width}\n          h={this.props.page.height}\n          x={this.props.page.x}\n          y={this.props.page.y}\n          clazz={clazz}\n          show={this.props.page.config.showBorder}\n        />\n        <OuterBorder\n          w={\n            this.props.page.width +\n            this.props.page.marginLeft +\n            this.props.page.marginLeft\n          }\n          h={\n            this.props.page.height +\n            this.props.page.marginTop +\n            this.props.page.marginBottom\n          }\n          clazz={clazz}\n          show={true}\n        />\n        <PageIndex\n          index={this.props.page.index}\n          x={this.props.page.marginLeft + this.props.page.width / 2}\n          y={\n            this.props.page.marginTop +\n            this.props.page.height +\n            this.props.page.marginBottom / 2\n          }\n          clazz={clazz}\n          config={this.props.page.config}\n        />\n        {this.props.page.lines.map((it, idx) => (\n          <MuseLine key={idx} line={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MusePage;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MusePage, { IPage, Page } from \"./MusePage\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\n\nexport class NotationInfo {\n  @observable title: string = \"\";\n  @observable subtitle: string = \"\";\n  @observable author: string[] = [];\n  @observable speed: string = \"\";\n  @observable rhythmic: string = \"\";\n  @observable C: string = \"\";\n}\n\nexport interface INotation {\n  title: string;\n  subtitle: string;\n  author: string;\n  rhythmic: string;\n  speed: string;\n  C: string;\n  pages: IPage[];\n}\n\nexport class Notation implements Codec {\n  readonly config: MuseConfig;\n  @observable pages: Page[] = [];\n  @observable info: NotationInfo = new NotationInfo();\n  @computed get height() {\n    let h = 0;\n    this.pages.forEach(\n      (it) => (h += it.height + it.marginTop + it.marginBottom)\n    );\n    return h;\n  }\n  @computed get width() {\n    return this.config.pageWidth;\n  }\n  constructor(o: INotation, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: INotation): void {\n    if (o.pages !== undefined) {\n      o.pages.forEach((it: IPage, idx) => {\n        this.pages.push(new Page(it, idx, this, this.config));\n      });\n    }\n    if (o.title !== undefined) {\n      this.info.title = o.title;\n    }\n    if (o.subtitle !== undefined) {\n      this.info.subtitle = o.subtitle;\n    }\n    if (o.author !== undefined) {\n      this.info.author = o.author.toString().split(\"|\");\n    }\n    if (o.speed !== undefined) {\n      this.info.speed = o.speed;\n    }\n    if (o.rhythmic) {\n      this.info.rhythmic = o.rhythmic;\n    }\n    if (o.C) {\n      this.info.C = o.C;\n    }\n  }\n  code(): INotation {\n    let pages: IPage[] = this.pages.map((it) => it.code());\n    let author: string = \"\";\n    this.info.author.forEach((it, idx) => {\n      if (idx === this.info.author.length - 1) {\n        author += it;\n      } else {\n        author += it + \"|\";\n      }\n    });\n    return {\n      title: this.info.title,\n      subtitle: this.info.subtitle,\n      author: author,\n      rhythmic: this.info.rhythmic,\n      speed: this.info.speed,\n      C: this.info.C,\n      pages,\n    };\n  }\n}\n\ninterface MuseNotationInfoProps {\n  info: NotationInfo;\n  config: MuseConfig;\n  clazz: string;\n}\n\nconst MuseNotationInfo: React.FC<MuseNotationInfoProps> = ({\n  info,\n  config,\n  clazz,\n}: MuseNotationInfoProps) => {\n  let y = 0;\n  y += config.pageMarginVertical;\n  let title = (\n    <text\n      className={clazz + \"__info-title\"}\n      fontFamily={config.textFontFamily}\n      width={config.pageWidth}\n      textAnchor={\"middle\"}\n      fontSize={config.infoTitleFontSize}\n      transform={\"translate(\" + config.pageWidth / 2 + \",\" + y + \")\"}\n    >\n      {info.title}\n    </text>\n  );\n  y += config.infoTitleFontSize + config.infoGap;\n  let subtitle = (\n    <text\n      className={clazz + \"__info-subtitle\"}\n      fontFamily={config.textFontFamily}\n      width={config.pageWidth}\n      textAnchor={\"middle\"}\n      fontSize={config.infoSubtitleFontSize}\n      transform={\"translate(\" + config.pageWidth / 2 + \",\" + y + \")\"}\n    >\n      {info.subtitle}\n    </text>\n  );\n  let y1 = y;\n  let x = info.author.length;\n  let author = (\n    <g className={clazz + \"__info-author\"}>\n      {info.author.map((it, idx) => {\n        y1 += config.infoFontSize + config.infoGap;\n        if (idx < x - 2) {\n          y += config.infoFontSize + config.infoGap;\n        }\n        return (\n          <text\n            key={idx}\n            fontFamily={config.textFontFamily}\n            width={config.pageWidth}\n            fontSize={config.infoFontSize}\n            textAnchor={\"end\"}\n            x={0}\n            transform={\n              \"translate(\" +\n              (config.pageWidth - config.pageMarginHorizontal) +\n              \",\" +\n              y1 +\n              \")\"\n            }\n          >\n            {it}\n          </text>\n        );\n      })}\n    </g>\n  );\n  let y2 = y + (config.infoGap + config.infoSubtitleFontSize);\n  let y3 = y2 + (config.infoGap + config.infoFontSize);\n  let rythimic = (\n    <g className={clazz + \"__info-rythmic\"} width={config.pageWidth}>\n      <text\n        fontFamily={config.textFontFamily}\n        width={config.pageWidth}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y2 + \")\"}\n      >\n        {info.speed}\n      </text>\n      <text\n        fontFamily={config.textFontFamily}\n        width={config.pageWidth}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y3 + \")\"}\n      >\n        {`1=${info.C} ${info.rhythmic}`}\n      </text>\n    </g>\n  );\n  return (\n    <g className={clazz + \"__info\"} width={config.pageWidth}>\n      {title}\n      {subtitle}\n      {author}\n      {rythimic}\n    </g>\n  );\n};\n\n@observer\nclass MuseNotation extends React.Component<{ notation: Notation }, {}> {\n  render() {\n    let margin = 10;\n    let clazz = \"muse-notation\";\n    return (\n      <svg\n        className=\"muse\"\n        width={this.props.notation.width + margin * 2}\n        height={this.props.notation.height + margin * 2}\n      >\n        <g\n          className={clazz}\n          transform={\"translate(\" + margin + \",\" + margin + \")\"}\n          width={this.props.notation.width}\n          height={this.props.notation.height}\n        >\n          <MuseNotationInfo\n            info={this.props.notation.info}\n            config={this.props.notation.config}\n            clazz={clazz}\n          />\n          <Border\n            w={this.props.notation.width}\n            h={this.props.notation.height}\n            x={0}\n            y={0}\n            clazz={clazz}\n          />\n          {this.props.notation.pages.map((it, idx) => (\n            <MusePage key={idx} page={it} />\n          ))}\n        </g>\n      </svg>\n    );\n  }\n}\n\nexport default MuseNotation;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNotation, { INotation, Notation } from \"./MuseNotation\";\n\nfunction Muse(props: { data: string; config?: MuseConfig }) {\n  let n: INotation = JSON.parse(props.data);\n  let notation = new Notation(\n    n,\n    props.config ? props.config : new MuseConfig()\n  );\n  return (\n    <div>\n      <MuseNotation notation={notation} />\n      <button\n        onClick={() => {\n          console.log(notation.code());\n        }}\n      >\n        log\n      </button>\n    </div>\n  );\n}\n\nexport default Muse;\n","import React from \"react\";\nimport \"./App.css\";\nimport Muse from \"./muse/Muse\";\n\nclass App extends React.Component<\n  {},\n  {\n    error: any | null;\n    isLoaded: boolean;\n    data: string;\n  }\n> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      data: \"\",\n    };\n  }\n\n  componentDidMount() {\n    let url = \"https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/b.json\";\n    // let url = \"http://localhost:8888/b.json\";\n    fetch(url)\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoaded: true,\n            data: result,\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error: error,\n          });\n        }\n      );\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <h1>Example</h1>\n        {this.state.isLoaded ? (\n          this.state.error ? (\n            \"error\"\n          ) : (\n            <Muse data={this.state.data} />\n          )\n        ) : (\n          \"loading...\"\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}