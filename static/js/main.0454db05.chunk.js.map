{"version":3,"sources":["muse/MuseConfig.ts","muse/Dimens.ts","muse/Border.tsx","muse/Fraction.ts","muse/MuseNote.tsx","muse/MuseBar.tsx","muse/MuseTrack.tsx","muse/MuseLine.tsx","muse/MusePage.tsx","muse/repo/muse-repo.ts","muse/MuseNotation.tsx","muse/Muse.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["MuseConfig","noteHeight","noteWidth","noteFontSize","noteFontFamily","sigFontSize","trackGap","lineGap","pointGap","tailPointGap","pointRound","pageE","notationWidth","pageMarginHorizontal","pageMarginVertical","infoTitleFontSize","infoSubtitleFontSize","infoGap","infoFontSize","pageIndexFontSize","textFontFamily","Dimens","x","y","width","height","marginTop","marginBottom","marginLeft","marginRight","this","marginHorizontal","marginVertical","d","Border","dimens","clazz","show","color","className","transform","stroke","strokeWidth","fill","OuterBorder","Fraction","u","parse","pos","search","parseInt","substr","toString","f","r","simplify","Note","o","config","l","p","dx","notesY","pointsY","tailPointsX","decode","Math","pow","ny","mb","py","noteGroup","forEach","it","idx","t","i","push","h","undefined","n","ns","ts","split","length","charCodeAt","charAt","tg","observable","computed","MuseNote","observer","note","props","onClick","isSelect","map","key","fontFamily","fontSize","S","F","DS","DF","N","pointGroup","tailPoint","React","Component","Bar","unitNum","notesX","baselineGroup","s","e","notes","generateBaseline","q","code","BarLine","x1","y1","x2","y2","BaseLine","bar","MuseBar","useObserver","Track","bars","MuseTrack","track","Line","tracks","LineHead","MuseLine","line","Page","lines","PageIndex","index","textAnchor","MusePage","page","MuseRepo","notation","NotationInfo","Notation","json","JSON","pages","title","info","subtitle","author","speed","rhythmic","C","reduce","c","MuseNotationInfo","y3","rythimic","MuseNotation","repo","useContext","MobXProviderContext","museRepo","margin","Muse","data","hm","vm","w","notationH","pageIdx","linesHeight","lineYSpace","lineHeight","trackY","barsW","barIdx","barUnitSum","trackHeight","maxNoteHeight","maxNoteMarginBottom","barX","notesWidth","settle","noteMarginBootom","lineYUnit","init","console","log","App","state","error","isLoaded","fetch","then","res","text","result","setState","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.0454db05.chunk.js","sourcesContent":["export default class MuseConfig {\n  noteHeight = 22;\n  noteWidth = 11;\n  noteFontSize = 22;\n  noteFontFamily = \"serif\";\n  sigFontSize = 14;\n\n  trackGap = 10;\n\n  lineGap = 20;\n\n  pointGap = 5;\n  tailPointGap = 8;\n  pointRound = 1.5;\n\n  pageE = 1.414;\n  notationWidth = 1000;\n  pageMarginHorizontal = 100;\n  pageMarginVertical = 110;\n\n  infoTitleFontSize = 34;\n  infoSubtitleFontSize = 22;\n  infoGap = 7;\n  infoFontSize = 20;\n\n  pageIndexFontSize = 20;\n\n  textFontFamily = \"serif\";\n}\n","export default class Dimens {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  marginTop: number;\n  marginBottom: number;\n  marginLeft: number;\n  marginRight: number;\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.width = 0;\n    this.height = 0;\n    this.marginBottom = 0;\n    this.marginTop = 0;\n    this.marginLeft = 0;\n    this.marginRight = 0;\n  }\n  init(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    marginHorizontal: number,\n    marginVertical: number\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.marginBottom = marginVertical;\n    this.marginTop = marginVertical;\n    this.marginLeft = marginHorizontal;\n    this.marginRight = marginHorizontal;\n  }\n  copyFrom(d: Dimens) {\n    this.x = d.x;\n    this.y = d.y;\n    this.width = d.width;\n    this.height = d.height;\n    this.marginBottom = d.marginBottom;\n    this.marginTop = d.marginTop;\n    this.marginLeft = d.marginLeft;\n    this.marginRight = d.marginRight;\n  }\n}\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\n\ninterface BorderProps {\n  dimens: Dimens;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const Border: React.FC<BorderProps> = ({\n  dimens,\n  clazz,\n  show = false,\n  color = \"blue\",\n}: BorderProps) => {\n  let ifShow = false;\n  if (show || ifShow) {\n    return (\n      <rect\n        className={clazz + \"__border\"}\n        transform={\n          \"translate(\" + dimens.marginLeft + \",\" + dimens.marginTop + \")\"\n        }\n        width={dimens.width}\n        height={dimens.height}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n\ninterface OuterBorderProps {\n  dimens: Dimens;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const OuterBorder: React.FC<OuterBorderProps> = ({\n  dimens,\n  clazz,\n  show = false,\n  color = \"gray\",\n}: OuterBorderProps) => {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__outer-border\"}\n        transform={\"translate(0,0)\"}\n        width={dimens.width + dimens.marginLeft + dimens.marginRight}\n        height={dimens.height + dimens.marginTop + dimens.marginBottom}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n","export default class Fraction {\n  u: number = 0;\n  d: number = 1;\n  constructor(x: string | null) {\n    if (x) {\n      this.parse(x);\n    }\n  }\n  parse(x: string): void {\n    let pos = x.search(\"/\");\n    if (pos !== -1) {\n      this.u = parseInt(x.substr(0, pos));\n      this.d = parseInt(x.substr(pos + 1));\n    } else {\n      this.u = parseInt(x);\n    }\n  }\n  toString(): string {\n    if (this.d === 1) {\n      return this.u.toString();\n    } else {\n      return this.u.toString() + \"/\" + this.d.toString();\n    }\n  }\n  simplify(): Fraction {\n    return this;\n  }\n  add(f: Fraction): Fraction {\n    let r = new Fraction(null);\n    r.u = this.u * f.d + this.d * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  minus(): Fraction {\n    let r = new Fraction(null);\n    return r;\n  }\n  toNumber(): number {\n    return this.u / this.d;\n  }\n}\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport { OuterBorder } from \"./Border\";\nimport MuseConfig from \"./MuseConfig\";\nimport Codec from \"./Codec\";\nimport Fraction from \"./Fraction\";\nimport { INote } from \"./repo/schema\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\n\nexport class Note implements Codec {\n  readonly config: MuseConfig;\n  @observable noteGroup: {\n    x: string;\n    n: string;\n    t: number;\n  }[] = [];\n  l: number = 0;\n  p: number = 0;\n  d: number = 0;\n  dx: number = 0;\n  @computed get time(): Fraction {\n    let r = new Fraction(\"\");\n    r.u = 1;\n    r.d *= Math.pow(2, this.l);\n    r.d *= this.d;\n    r.d *= Math.pow(2, this.p); //3/2 7/4 15/8\n    r.u *= Math.pow(2, this.p + 1) - 1;\n    return r.simplify();\n  }\n  notesY: number[] = [];\n  pointsY: number[] = [];\n  tailPointsX: number[] = [];\n  @observable dimens: Dimens = new Dimens();\n  @observable isSelect: boolean = false;\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  settle() {\n    let width =\n      this.dx + this.config.noteWidth + this.p * this.config.tailPointGap;\n    let ny = 0;\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    let py = 0;\n    this.noteGroup.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x / 2;\n            this.pointsY.push(-mb);\n            mb += x / 2;\n          }\n        }\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            py += x / 2;\n            this.pointsY.push(py);\n            py += x / 2;\n            ny += x;\n          }\n        }\n      }\n      this.notesY.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      py += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          py += x / 2;\n          this.pointsY.push(py);\n          py += x / 2;\n          ny += x;\n        }\n      }\n    });\n    for (let i = 0; i < this.p; ++i) {\n      this.tailPointsX.push(\n        this.dx + this.config.noteWidth + (i + 1 / 2) * this.config.tailPointGap\n      );\n    }\n    this.dimens.width = width;\n    this.dimens.height = ny;\n    this.dimens.marginBottom = mb;\n  }\n  decode(o: any): void {\n    if (o.n !== undefined) {\n      let n: string = o.n;\n      let pos = n.search(\"@\");\n      let ns = \"\";\n      let ts = \"\";\n      if (pos === -1) {\n        ns = n;\n        ts = \"0|0\";\n      } else {\n        ns = n.substr(0, pos);\n        ts = n.substr(pos + 1);\n      }\n      let ng = ns.split(\"|\");\n      ng.forEach((it) => {\n        for (let i = 0; i < it.length; ++i) {\n          if (\n            (it.charCodeAt(i) <= 57 && it.charCodeAt(i) >= 48) ||\n            it.charCodeAt(i) === 45\n          ) {\n            let x = it.substr(0, i);\n            let n = it.charAt(i);\n            let t = it.substr(i + 1).length;\n            if (t !== 0 && it.charAt(i + 1) === \"-\") {\n              t = -t;\n            }\n            this.noteGroup.push({ x, n, t });\n            if (x !== \"\") {\n              this.dx = this.config.sigFontSize / 2;\n            }\n            break;\n          }\n        }\n      });\n      let tg = ts.split(\"|\");\n      if (tg.length === 3) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = parseInt(tg[2]);\n      } else if (tg.length === 2) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = 1;\n      } else if (tg.length === 1) {\n        this.l = parseInt(tg[0]);\n        this.p = 0;\n        this.d = 1;\n      } else {\n        this.l = 0;\n        this.p = 0;\n        this.d = 1;\n      }\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): INote {\n    let ns: string = \"\";\n    this.noteGroup.forEach((it, idx) => {\n      let t = \"\";\n      if (it.t > 0) {\n        for (let i = 0; i < it.t; ++i) {\n          t += \"+\";\n        }\n      } else {\n        for (let i = 0; i < -it.t; ++i) {\n          t += \"-\";\n        }\n      }\n      if (idx + 1 >= this.noteGroup.length) {\n        ns += `${it.x}${it.n}${t}`;\n      } else {\n        ns += `${it.x}${it.n}${t}|`;\n      }\n    });\n    let n = `${ns}@${this.l}|${this.p}`;\n    return { n };\n  }\n}\n\nfunction castX(x: string) {\n  let m: Record<string, string> = {\n    S: \"#\",\n    F: \"b\",\n    DS: \"x\",\n    DF: \"d\",\n    N: \"n\",\n  };\n  return m[x] || \"\";\n}\n\nfunction noteGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-note\"}>\n      {note.noteGroup.map((it, idx) => {\n        return (\n          <g\n            className={clazz + \"__note-one\"}\n            key={idx}\n            width={note.dimens.width}\n            height={note.notesY[idx]}\n            transform={\n              \"translate(\" +\n              0 +\n              \",\" +\n              (note.dimens.height - note.notesY[idx]) +\n              \")\"\n            }\n          >\n            <text\n              fontFamily={note.config.noteFontFamily}\n              fontSize={note.config.noteFontSize}\n              transform={\"translate(\" + note.dx + \",\" + 0 + \")\"}\n            >\n              {it.n}\n            </text>\n            <text\n              fontFamily={note.config.noteFontFamily}\n              fontSize={note.config.sigFontSize}\n              transform={\n                \"translate(\" +\n                0 +\n                \",\" +\n                (note.config.sigFontSize - note.config.noteHeight) +\n                \")\"\n              }\n            >\n              {castX(it.x)}\n            </text>\n          </g>\n        );\n      })}\n    </g>\n  );\n}\n\nfunction pointGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-point\"}>\n      {note.pointsY.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            (note.dx + note.config.noteWidth / 2) +\n            \",\" +\n            (note.dimens.height - it + note.config.pointGap / 2) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction tailPoint(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__tail-point\"}>\n      {note.tailPointsX.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            it +\n            \",\" +\n            (note.dimens.height - note.config.noteHeight / 3) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\n@observer\nclass MuseNote extends React.Component<{ note: Note }, {}> {\n  render() {\n    let note = this.props.note;\n    let d = note.dimens;\n    let clazz = \"muse-note\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n        }\n        width={d.width + d.marginLeft + d.marginRight}\n        height={d.height + d.marginTop + d.marginBottom}\n        onClick={() => {\n          this.props.note.isSelect = !this.props.note.isSelect;\n        }}\n      >\n        <OuterBorder\n          dimens={d}\n          clazz={clazz}\n          show={note.isSelect}\n          color={\"blue\"}\n        />\n        {noteGroup(note, clazz)}\n        {pointGroup(note, clazz)}\n        {tailPoint(note, clazz)}\n      </g>\n    );\n  }\n}\n\nexport default MuseNote;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MuseNote, { Note } from \"./MuseNote\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { IBar, INote } from \"./repo/schema\";\nimport { observable } from \"mobx\";\nimport { useObserver } from \"mobx-react\";\n\nexport class Bar implements Codec {\n  readonly config: MuseConfig;\n  @observable notes: Note[] = [];\n  @observable dimens: Dimens = new Dimens();\n  unitNum: number = 0;\n  notesX: number[] = [];\n  baselineGroup: {\n    y: number;\n    s: number;\n    e: number;\n  }[] = [];\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  generateBaseline() {\n    for (let i = 0; ; ++i) {\n      let x = 0;\n      let s = 0;\n      let e = -1;\n      this.notes.forEach((it, idx) => {\n        if (it.l > i) {\n          e = idx;\n          x++;\n        } else {\n          if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n          s = idx + 1;\n          e = idx;\n        }\n      });\n      if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n      if (x === 0) {\n        break;\n      }\n    }\n  }\n  decode(o: any): void {\n    if (o.notes !== undefined) {\n      o.notes.forEach((it: any) => {\n        this.notes.push(new Note(it, this.config));\n      });\n      this.generateBaseline();\n      this.notesX.push(1);\n      this.notes.forEach((note, idx) => {\n        let x = 0;\n        if (idx + 1 >= this.notes.length) {\n          x += 1;\n        } else if (\n          this.notes[idx + 1] !== undefined &&\n          this.notes[idx + 1].l < note.l\n        ) {\n          x += Math.pow(2, -this.notes[idx + 1].l);\n        } else {\n          x += Math.pow(2, -note.l);\n        }\n        let q = 1;\n        for (let i = 1; i <= note.p; ++i) {\n          q += Math.pow(2, -i);\n        }\n        x *= q;\n        this.notesX.push(x);\n        this.unitNum += x;\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): IBar {\n    let notes: INote[] = this.notes.map((it) => it.code());\n    return { notes };\n  }\n}\n\nconst BarLine: React.FC<{ d: Dimens; clazz: string }> = ({\n  d,\n  clazz,\n}: {\n  d: Dimens;\n  clazz: string;\n}) => {\n  return (\n    <line\n      className={clazz + \"__bar-line\"}\n      x1={d.marginLeft + d.width + d.marginRight}\n      y1={0}\n      x2={d.marginLeft + d.width + d.marginRight}\n      y2={d.height}\n      strokeWidth={1}\n      stroke=\"black\"\n    />\n  );\n};\n\nconst BaseLine: React.FC<{ bar: Bar; clazz: string }> = ({\n  bar,\n  clazz,\n}: {\n  bar: Bar;\n  clazz: string;\n}) => {\n  return (\n    <g className={clazz + \"__base-line\"}>\n      {bar.baselineGroup.map((it, idx) => (\n        <line\n          key={idx}\n          x1={bar.notes[it.s].dimens.x}\n          y1={bar.notes[it.s].dimens.height + (it.y + 1) * bar.config.pointGap}\n          x2={bar.notes[it.e].dimens.x + bar.notes[it.e].dimens.width}\n          y2={bar.notes[it.s].dimens.height + (it.y + 1) * bar.config.pointGap}\n          stroke={\"black\"}\n          strokeWidth={1}\n        />\n      ))}\n    </g>\n  );\n};\n\nconst MuseBar: React.FC<{ bar: Bar }> = ({ bar }: { bar: Bar }) => {\n  let [d, notes] = useObserver(() => {\n    return [bar.dimens, bar.notes];\n  });\n  let clazz = \"muse-bar\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      <Border dimens={d} clazz={clazz} />\n      <BarLine d={d} clazz={clazz} />\n      {notes.map((it, idx) => (\n        <MuseNote key={idx} note={it} />\n      ))}\n      <BaseLine bar={bar} clazz={clazz} />\n    </g>\n  );\n};\n\nexport default MuseBar;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseBar, { Bar } from \"./MuseBar\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { IBar, ITrack } from \"./repo/schema\";\nimport { observable } from \"mobx\";\nimport { useObserver } from \"mobx-react\";\n\nexport class Track implements Codec {\n  readonly config: MuseConfig;\n  @observable bars: Bar[] = [];\n  @observable dimens: Dimens = new Dimens();\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.bars !== undefined) {\n      o.bars.forEach((it: any) => {\n        this.bars.push(new Bar(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): ITrack {\n    let bars: IBar[] = this.bars.map((it) => it.code());\n    return { bars };\n  }\n}\n\nconst MuseTrack: React.FC<{ track: Track }> = ({ track }: { track: Track }) => {\n  let [bars, d] = useObserver(() => {\n    return [track.bars, track.dimens];\n  });\n  let clazz = \"muse-track\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      <Border dimens={d} clazz={clazz} />\n      {bars.map((it, idx) => (\n        <MuseBar key={idx} bar={it} />\n      ))}\n    </g>\n  );\n};\n\nexport default MuseTrack;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseTrack, { Track } from \"./MuseTrack\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { ILine, ITrack } from \"./repo/schema\";\nimport { observable } from \"mobx\";\nimport { useObserver } from \"mobx-react\";\n\nexport class Line implements Codec {\n  readonly config: MuseConfig;\n  @observable tracks: Track[] = [];\n  @observable dimens: Dimens = new Dimens();\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.tracks !== undefined) {\n      o.tracks.forEach((it: any) => {\n        this.tracks.push(new Track(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): ILine {\n    let tracks: ITrack[] = this.tracks.map((it) => it.code());\n    return { tracks };\n  }\n}\n\nconst LineHead: React.FC<{ dimens: Dimens; clazz: string }> = ({\n  dimens,\n  clazz,\n}: {\n  dimens: Dimens;\n  clazz: string;\n}) => {\n  return (\n    <g className={clazz + \"__line-head\"}>\n      <line\n        x1={0}\n        y1={0}\n        x2={0}\n        y2={dimens.height}\n        strokeWidth={1}\n        stroke=\"black\"\n      />\n    </g>\n  );\n};\n\nconst MuseLine: React.FC<{ line: Line }> = ({ line }: { line: Line }) => {\n  let [tracks, d] = useObserver(() => {\n    return [line.tracks, line.dimens];\n  });\n  let clazz = \"muse-line\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      <Border dimens={d} clazz={clazz} />\n      <LineHead dimens={d} clazz={clazz} />\n      {tracks.map((it, idx) => (\n        <MuseTrack key={idx} track={it} />\n      ))}\n    </g>\n  );\n};\n\nexport default MuseLine;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MuseLine, { Line } from \"./MuseLine\";\nimport { Border, OuterBorder } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { ILine, IPage } from \"./repo/schema\";\nimport { observable } from \"mobx\";\nimport { useObserver } from \"mobx-react\";\n\nexport class Page implements Codec {\n  readonly config: MuseConfig;\n  @observable lines: Line[] = [];\n  @observable dimens: Dimens = new Dimens();\n  @observable index: number = 0;\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.lines !== undefined) {\n      o.lines.forEach((it: any) => {\n        this.lines.push(new Line(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): IPage {\n    let lines: ILine[] = this.lines.map((it) => it.code());\n    return { lines };\n  }\n}\n\ninterface PageIndexProps {\n  index: number;\n  dimens: Dimens;\n  clazz: string;\n  config: MuseConfig;\n}\n\nconst PageIndex: React.FC<PageIndexProps> = ({\n  index,\n  dimens,\n  clazz,\n  config,\n}: PageIndexProps) => {\n  return (\n    <g\n      className={clazz + \"__page-index\"}\n      transform={\n        \"translate(\" +\n        (dimens.marginLeft + dimens.width / 2) +\n        \",\" +\n        (dimens.marginTop + dimens.height + dimens.marginBottom / 2) +\n        \")\"\n      }\n    >\n      <text\n        textAnchor={\"middle\"}\n        fontFamily={config.textFontFamily}\n        fontSize={config.pageIndexFontSize}\n      >\n        {index.toString()}\n      </text>\n    </g>\n  );\n};\n\nconst MusePage: React.FC<{ page: Page }> = ({ page }: { page: Page }) => {\n  let [lines, d, index] = useObserver(() => {\n    return [page.lines, page.dimens, page.index];\n  });\n  let clazz = \"muse-page\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      <Border dimens={d} clazz={clazz} />\n      <OuterBorder dimens={d} clazz={clazz} show={true} />\n      <PageIndex index={index} dimens={d} clazz={clazz} config={page.config} />\n      {lines.map((it, idx) => (\n        <MuseLine key={idx} line={it} />\n      ))}\n    </g>\n  );\n};\n\nexport default MusePage;\n","import { observable } from \"mobx\";\nimport { MobXProviderContext } from \"mobx-react\";\nimport React from \"react\";\nimport { Notation } from \"../MuseNotation\";\n\nexport class MuseRepo {\n  @observable\n  notation: Notation;\n\n  constructor(notation: Notation) {\n    this.notation = notation;\n  }\n}\n\nexport function useMuseRepo(): MuseRepo {\n  return React.useContext(MobXProviderContext).museRepo;\n}\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MusePage, { Page } from \"./MusePage\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { INotation, IPage } from \"./repo/schema\";\nimport { observable } from \"mobx\";\nimport { useMuseRepo } from \"./repo/muse-repo\";\nimport { useObserver } from \"mobx-react\";\n\nexport class NotationInfo {\n  @observable title: string = \"\";\n  @observable subtitle: string = \"\";\n  @observable author: string[] = [];\n  @observable speed: string = \"\";\n  @observable rhythmic: string = \"\";\n  @observable C: string = \"\";\n}\n\nexport class Notation implements Codec {\n  readonly config: MuseConfig;\n  @observable pages: Page[] = [];\n  @observable info: NotationInfo = new NotationInfo();\n  @observable dimens: Dimens = new Dimens();\n  constructor(json: string, config: MuseConfig) {\n    this.config = config;\n    let o: any = JSON.parse(json);\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.pages !== undefined) {\n      o.pages.forEach((it: any) => {\n        this.pages.push(new Page(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n    if (o.title !== undefined) {\n      this.info.title = o.title;\n    }\n    if (o.subtitle !== undefined) {\n      this.info.subtitle = o.subtitle;\n    }\n    if (o.author !== undefined) {\n      this.info.author = o.author.toString().split(\"|\");\n    }\n    if (o.speed !== undefined) {\n      this.info.speed = o.speed;\n    }\n    if (o.rhythmic) {\n      this.info.rhythmic = o.rhythmic;\n    }\n    if (o.C) {\n      this.info.C = \"1=\" + o.C;\n    }\n  }\n  code(): INotation {\n    let pages: IPage[] = this.pages.map((it) => it.code());\n    let author = this.info.author.reduce((p, c, idx) => {\n      if (idx === this.info.author.length - 1) {\n        return p + c;\n      } else {\n        return p + c + \"|\";\n      }\n    });\n    return {\n      title: this.info.title,\n      subtitle: this.info.subtitle,\n      author: author,\n      rhythmic: this.info.rhythmic,\n      speed: this.info.speed,\n      C: this.info.C,\n      pages,\n    };\n  }\n}\n\nconst MuseNotationInfo: React.FC<{\n  notation: Notation;\n  clazz: string;\n}> = (props) => {\n  let config = props.notation.config;\n  let info = props.notation.info;\n  let clazz = props.clazz;\n  let dimens = props.notation.dimens;\n  let y = 0;\n  y += config.pageMarginVertical;\n  let title = (\n    <text\n      className={clazz + \"__info-title\"}\n      fontFamily={config.textFontFamily}\n      width={dimens.width}\n      textAnchor={\"middle\"}\n      fontSize={config.infoTitleFontSize}\n      transform={\n        \"translate(\" + (dimens.marginLeft + dimens.width / 2) + \",\" + y + \")\"\n      }\n    >\n      {info.title}\n    </text>\n  );\n  y += config.infoTitleFontSize + config.infoGap;\n  let subtitle = (\n    <text\n      className={clazz + \"__info-subtitle\"}\n      fontFamily={config.textFontFamily}\n      width={dimens.width}\n      textAnchor={\"middle\"}\n      fontSize={config.infoSubtitleFontSize}\n      transform={\n        \"translate(\" + (dimens.marginLeft + dimens.width / 2) + \",\" + y + \")\"\n      }\n    >\n      {info.subtitle}\n    </text>\n  );\n  let y1 = y;\n  let x = info.author.length;\n  let author = (\n    <g className={clazz + \"__info-author\"}>\n      {info.author.map((it, idx) => {\n        y1 += config.infoFontSize + config.infoGap;\n        if (idx < x - 2) {\n          y += config.infoFontSize + config.infoGap;\n        }\n        return (\n          <text\n            key={idx}\n            fontFamily={config.textFontFamily}\n            width={dimens.width}\n            fontSize={config.infoFontSize}\n            textAnchor={\"end\"}\n            x={0}\n            transform={\n              \"translate(\" +\n              (dimens.width - config.pageMarginHorizontal) +\n              \",\" +\n              y1 +\n              \")\"\n            }\n          >\n            {it}\n          </text>\n        );\n      })}\n    </g>\n  );\n  let y2 = y + (config.infoGap + config.infoSubtitleFontSize);\n  let y3 = y2 + (config.infoGap + config.infoFontSize);\n  let rythimic = (\n    <g className={clazz + \"__info-rythmic\"} width={dimens.width}>\n      <text\n        fontFamily={config.textFontFamily}\n        width={dimens.width}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y2 + \")\"}\n      >\n        {info.speed}\n      </text>\n      <text\n        fontFamily={config.textFontFamily}\n        width={dimens.width}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y3 + \")\"}\n      >\n        {info.C + \" \" + info.rhythmic}\n      </text>\n    </g>\n  );\n  return (\n    <g className={clazz + \"__info\"} width={dimens.width}>\n      {title}\n      {subtitle}\n      {author}\n      {rythimic}\n    </g>\n  );\n};\n\nconst MuseNotation: React.FC = () => {\n  const repo = useMuseRepo();\n  let notation = useObserver(() => {\n    return repo.notation;\n  });\n  let margin = 10;\n  let d = notation.dimens;\n  let clazz = \"muse-notation\";\n  return (\n    <svg\n      className=\"muse\"\n      width={notation.dimens.width + margin * 2}\n      height={notation.dimens.height + margin * 2}\n    >\n      <g\n        className={clazz}\n        transform={\"translate(\" + margin + \",\" + margin + \")\"}\n        width={notation.dimens.width}\n        height={notation.dimens.height}\n      >\n        <MuseNotationInfo notation={notation} clazz={clazz} />\n        <Border dimens={d} clazz={clazz} />\n        {notation.pages.map((it, idx) => (\n          <MusePage key={idx} page={it} />\n        ))}\n      </g>\n    </svg>\n  );\n};\n\nexport default MuseNotation;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNotation, { Notation } from \"./MuseNotation\";\nimport { MuseRepo } from \"./repo/muse-repo\";\nimport { Provider } from \"mobx-react\";\n\nfunction init(data: string, config: MuseConfig): Notation {\n  let hm = config.pageMarginHorizontal;\n  let vm = config.pageMarginVertical;\n  let w = config.notationWidth - hm * 2;\n  let h = config.notationWidth * config.pageE - vm * 2;\n  let notation = new Notation(data, config);\n  let notationH = 0;\n  notation.pages.forEach((page, pageIdx) => {\n    page.dimens.x = hm;\n    page.dimens.y = vm * (pageIdx + 1) + (vm + h) * pageIdx;\n    page.dimens.width = w;\n    page.dimens.marginLeft = hm;\n    page.dimens.marginRight = hm;\n    page.dimens.height = h;\n    page.dimens.marginTop = vm;\n    page.dimens.marginBottom = vm;\n    if (pageIdx === 0) {\n      let x = 0;\n      x += config.infoTitleFontSize + config.infoGap;\n      x += config.infoSubtitleFontSize + config.infoGap;\n      x += notation.info.author.length * (config.infoFontSize + config.infoGap);\n      page.dimens.marginTop += x;\n      page.dimens.height -= x;\n      page.dimens.y += x;\n    }\n    page.index = pageIdx + 1;\n    notationH +=\n      page.dimens.marginTop + page.dimens.marginBottom + page.dimens.height;\n    let linesHeight: number[] = [];\n    let lineYSpace = page.dimens.height;\n    page.lines.forEach((line) => {\n      line.dimens.width = page.dimens.width;\n      line.dimens.x = page.dimens.marginLeft;\n      let lineHeight = 0;\n      let trackY = 0;\n      let barsW: number[] = [];\n      line.tracks.forEach((track) => {\n        track.bars.forEach((bar, barIdx) => {\n          if (barsW[barIdx] !== undefined) {\n            barsW[barIdx] =\n              barsW[barIdx] > bar.unitNum ? barsW[barIdx] : bar.unitNum;\n          } else {\n            barsW.push(bar.unitNum);\n          }\n        });\n      });\n      let barUnitSum = barsW.reduce((s, it) => s + it);\n      line.tracks.forEach((track) => {\n        let trackHeight = 0;\n        track.dimens.y = trackY;\n        track.dimens.width = line.dimens.width;\n        let maxNoteHeight = 0; //note.y\n        let maxNoteMarginBottom = 0;\n        let barX = 0;\n        track.bars.forEach((bar, barIdx) => {\n          bar.unitNum = barsW[barIdx];\n          bar.dimens.width = (barsW[barIdx] / barUnitSum) * track.dimens.width;\n          bar.dimens.x = barX;\n          barX += bar.dimens.width;\n          let notesWidth: number[] = [];\n          bar.notes.forEach((note) => {\n            note.settle();\n            let noteWidth = note.dimens.width;\n            let noteHeight = note.dimens.height;\n            let noteMarginBootom = note.dimens.marginBottom;\n            maxNoteHeight =\n              maxNoteHeight > noteHeight ? maxNoteHeight : noteHeight;\n            maxNoteMarginBottom =\n              maxNoteMarginBottom > noteMarginBootom\n                ? maxNoteMarginBottom\n                : noteMarginBootom;\n            notesWidth.push(noteWidth);\n          });\n          let x = 0;\n          bar.notes.forEach((note, idx) => {\n            x += (bar.notesX[idx] / (bar.unitNum + 1)) * bar.dimens.width;\n            note.dimens.x = x - config.noteWidth / 2 - note.dx;\n          });\n        });\n        track.dimens.height = maxNoteHeight + maxNoteMarginBottom;\n        track.bars.forEach((bar) => {\n          bar.dimens.height = track.dimens.height;\n          bar.notes.forEach((note) => {\n            note.dimens.height = maxNoteHeight;\n            note.dimens.marginBottom = maxNoteMarginBottom;\n          });\n        });\n        trackHeight = maxNoteHeight + maxNoteMarginBottom;\n        lineHeight += trackHeight + config.trackGap;\n        trackY += trackHeight + config.trackGap;\n      });\n      lineHeight -= config.trackGap;\n      line.dimens.height = lineHeight;\n      lineYSpace -= lineHeight;\n      linesHeight.push(lineHeight);\n    });\n    let lineYUnit = lineYSpace / (page.lines.length - 1);\n    page.lines.forEach((line, idx) => {\n      let py = page.dimens.marginTop;\n      for (let i = 0; i < idx; ++i) {\n        py += lineYUnit + linesHeight[i];\n      }\n      line.dimens.y = py;\n    });\n  });\n  notation.dimens.width = w + 2 * hm;\n  notation.dimens.height = notationH;\n  return notation;\n}\n\nfunction Muse(props: { data: string; config?: MuseConfig }) {\n  let notation = init(\n    props.data,\n    props.config ? props.config : new MuseConfig()\n  );\n  let repo = new MuseRepo(notation);\n  return (\n    <Provider museRepo={repo}>\n      <MuseNotation />\n      <button onClick={()=>{\n        console.log(repo.notation.code())\n      }}>log</button>\n    </Provider>\n  );\n}\n\nexport default Muse;\n","import React from \"react\";\nimport \"./App.css\";\nimport Muse from \"./muse/Muse\";\n\nclass App extends React.Component<\n  {},\n  {\n    error: any | null;\n    isLoaded: boolean;\n    data: string;\n  }\n> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      data: \"\",\n    };\n  }\n\n  componentDidMount() {\n    let url = \"https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/b.json\";\n    // let url = \"http://localhost:8888/b.json\";\n    fetch(url)\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoaded: true,\n            data: result,\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error: error,\n          });\n        }\n      );\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <h1>Example</h1>\n        {this.state.isLoaded ? (\n          this.state.error ? (\n            \"error\"\n          ) : (\n            <Muse data={this.state.data} />\n          )\n        ) : (\n          \"loading...\"\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}