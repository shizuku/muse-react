(this["webpackJsonpmuse-react"]=this["webpackJsonpmuse-react"]||[]).push([[0],{21:function(t,e,i){t.exports=i(29)},26:function(t,e,i){},27:function(t,e,i){},29:function(t,e,i){"use strict";i.r(e);var o=i(0),r=i.n(o),n=i(18),a=i.n(n),s=(i(26),i(5)),p=i(3),c=i(7),h=i(6),u=(i(27),function t(){Object(s.a)(this,t),this.noteHeight=22,this.noteWidth=11,this.noteFontSize=22,this.noteFontFamily="serif",this.sigFontSize=14,this.trackGap=10,this.lineGap=40,this.pointGap=5,this.tailPointGap=8,this.pointRound=1.5,this.pageE=1.414,this.pageWidth=1e3,this.pageMarginHorizontal=100,this.pageMarginVertical=110,this.infoTitleFontSize=34,this.infoSubtitleFontSize=22,this.infoGap=7,this.infoFontSize=20,this.pageIndexFontSize=20,this.textFontFamily="serif",this.showBorder=!1}),l=i(4),f=i(2),g=(i(9),i(10)),y=i(15),b=function(t){var e=t.w,i=t.h,o=t.x,n=t.y,a=t.clazz,s=t.show,p=void 0!==s&&s,c=t.color,h=void 0===c?"blue":c;return p?r.a.createElement("rect",{className:a+"__border",transform:"translate("+o+","+n+")",width:e,height:i,stroke:h,strokeWidth:"0.4",fill:"none"}):r.a.createElement(r.a.Fragment,null)},m=function(t){var e=t.w,i=t.h,o=t.clazz,n=t.show,a=void 0!==n&&n,s=t.color,p=void 0===s?"gray":s;return a?r.a.createElement("rect",{className:o+"__outer-border",transform:"translate(0,0)",width:e,height:i,stroke:p,strokeWidth:"0.4",fill:"none"}):r.a.createElement(r.a.Fragment,null)},d=function(){function t(){Object(s.a)(this,t),this.u=0,this.d=1}return Object(p.a)(t,[{key:"parse",value:function(t){var e=t.search("/");return-1!==e?(this.u=parseInt(t.substr(0,e)),this.d=parseInt(t.substr(e+1))):this.u=parseInt(t),this}},{key:"init",value:function(t,e){return this.u=t,this.d=e,this}},{key:"gcd",value:function(t,e){for(;0!==e;){var i=e;e=t%e,t=i}return t}},{key:"simplify",value:function(){for(var t;(t=this.gcd(this.u,this.d))>1||t<-1;)this.u/=t,this.d/=t;return this}},{key:"plus",value:function(e){var i=new t;return i.u=this.u*e.d+this.d*e.u,i.d=this.d*e.d,i.simplify()}},{key:"minus",value:function(e){var i=new t;return i.u=this.u*e.d-this.d*e.u,i.d=this.d*e.d,i.simplify()}},{key:"multiply",value:function(e){var i=new t;return i.u=this.u*e.u,i.d=this.d*e.d,i.simplify()}},{key:"divide",value:function(e){var i=new t;return i.u=this.u*e.d,i.d=this.d*e.u,i.simplify()}},{key:"toNumber",value:function(){return this.u/this.d}},{key:"toString",value:function(){return 1===this.d?"".concat(this.u):"".concat(this.u,"/").concat(this.d)}}]),t}(),O=i(1),j=i(8),w=function(){function t(){var e=this;Object(s.a)(this,t),this.s=null,document.addEventListener("keydown",(function(t){null!==e.s&&("note"===e.s.kind?"q"===t.key?e.s.reduceLine(-1):"a"===t.key?e.s.reduceLine(1):"s"===t.key?e.s.reduceTailPoint(-1):"d"===t.key&&e.s.reduceTailPoint(1):"subnote"===e.s.kind&&(t.key>="0"&&t.key<="9"||"-"===t.key?e.s.setNum(t.key):"r"===t.key?e.s.reducePoint(1):"f"===t.key&&e.s.reducePoint(-1)))}))}return Object(p.a)(t,[{key:"select",value:function(t,e){null!==this.s&&(t.level,this.s.level),e&&this.clear(),this.s=t,t.setSelect(!0)}},{key:"clear",value:function(){var t;null===(t=this.s)||void 0===t||t.setSelect(!1)}}]),t}();w.instance=new w;var v,k,x,z,E,S,M,P,N,F,D,W,B,H,G,T=w,_=(v=function t(e){var i=this,o=e.x,r=e.n,n=e.t;Object(s.a)(this,t),Object(l.a)(this,"x",k,this),Object(l.a)(this,"n",x,this),Object(l.a)(this,"t",z,this),Object(l.a)(this,"isSelect",E,this),this.selection={kind:"subnote",level:0,setSelect:function(t){i.isSelect=t},setNum:function(t){i.n=t},reducePoint:function(t){i.t+=t}},this.x=o,this.n=r,this.t=n},k=Object(f.a)(v.prototype,"x",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=Object(f.a)(v.prototype,"n",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=Object(f.a)(v.prototype,"t",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Object(f.a)(v.prototype,"isSelect",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v),C=(S=function(){function t(e,i,o){var r=this;Object(s.a)(this,t),this.config=void 0,Object(l.a)(this,"index",M,this),Object(l.a)(this,"bar",P,this),Object(l.a)(this,"subNotes",N,this),Object(l.a)(this,"l",F,this),Object(l.a)(this,"p",D,this),Object(l.a)(this,"d",W,this),Object(l.a)(this,"isSelect",B,this),this.selection={kind:"note",level:1,setSelect:function(t){r.isSelect=t},reduceLine:function(t){r.l+=t,r.l<0&&(r.l=0)},reduceTailPoint:function(t){r.p+=t,r.p<0&&(r.p=0)}},this.config=i.config,this.bar=i,this.index=o,this.decode(e)}return Object(p.a)(t,[{key:"dx",get:function(){var t=!1;return this.subNotes.forEach((function(e){""!==e.x&&(t=!0)})),t?this.config.sigFontSize/2:0}},{key:"time",get:function(){var t=new d;return t.u=1,t.d*=Math.pow(2,this.l),t.d*=this.d,t.d*=Math.pow(2,this.p),t.u*=Math.pow(2,this.p+1)-1,t.simplify()}},{key:"notesY",get:function(){var t=this,e=[],i=0;return this.subNotes.forEach((function(o,r){if(o.t<0&&0!==r)for(var n=-o.t;n>0;--n){var a=t.config.pointGap;i+=a}e.push(i);var s=t.config.noteHeight;if(i+=s,o.t>0)for(var p=o.t;p>0;--p){var c=t.config.pointGap;i+=c}})),e}},{key:"pointsY",get:function(){var t=this,e=[],i=0,o=0,r=0;return r+=this.l*this.config.pointGap,this.subNotes.forEach((function(n,a){if(n.t<0){if(0===a)for(var s=-n.t;s>0;--s){var p=t.config.pointGap;r+=p/2,e.push(-r),r+=p/2}if(0!==a)for(var c=-n.t;c>0;--c){var h=t.config.pointGap;i+=h/2,e.push(i),i+=h/2,o+=h}}t.notesY.push(o);var u=t.config.noteHeight;if(o+=u,i+=u,n.t>0)for(var l=n.t;l>0;--l){var f=t.config.pointGap;i+=f/2,e.push(i),i+=f/2,o+=f}})),e}},{key:"tailPointsX",get:function(){for(var t=[],e=0;e<this.p;++e)t.push(this.dx+this.config.noteWidth+(e+.5)*this.config.tailPointGap);return t}},{key:"width",get:function(){return this.dx+this.config.noteWidth+this.p*this.config.tailPointGap}},{key:"preHeight",get:function(){var t=this,e=0;return this.subNotes.forEach((function(i,o){if(i.t<0&&0!==o)for(var r=-i.t;r>0;--r){var n=t.config.pointGap;e+=n}if(e+=t.config.noteHeight,i.t>0)for(var a=i.t;a>0;--a){var s=t.config.pointGap;e+=s}})),e}},{key:"height",get:function(){return this.bar.notesMaxHeight}},{key:"x",get:function(){return this.bar.notesX[this.index]}},{key:"preMarginBottom",get:function(){var t=this,e=0;return e+=this.l*this.config.pointGap,this.subNotes.forEach((function(i,o){if(i.t<0&&0===o)for(var r=-i.t;r>0;--r){var n=t.config.pointGap;e+=n}})),e}},{key:"marginBottom",get:function(){return this.bar.notesMaxMarginBottom}}]),Object(p.a)(t,[{key:"decode",value:function(t){var e=this;if(void 0!==t.n){var i=t.n,o=i.search("@"),r="",n="";-1===o?(r=i,n="0|0"):(r=i.substr(0,o),n=i.substr(o+1)),r.split("|").forEach((function(t){for(var i=0;i<t.length;++i)if(t.charCodeAt(i)<=57&&t.charCodeAt(i)>=48||45===t.charCodeAt(i)){var o=t.substr(0,i),r=t.charAt(i),n=t.substr(i+1).length;0!==n&&"-"===t.charAt(i+1)&&(n=-n),e.subNotes.push(new _({x:o,n:r,t:n}));break}}));var a=n.split("|");3===a.length?(this.l=parseInt(a[0]),this.p=parseInt(a[1]),this.d=parseInt(a[2])):2===a.length?(this.l=parseInt(a[0]),this.p=parseInt(a[1]),this.d=1):1===a.length?(this.l=parseInt(a[0]),this.p=0,this.d=1):(this.l=0,this.p=0,this.d=1)}}},{key:"code",value:function(){var t=this,e="";return this.subNotes.forEach((function(i,o){var r="";if(i.t>0)for(var n=0;n<i.t;++n)r+="+";else for(var a=0;a<-i.t;++a)r+="-";o+1>=t.subNotes.length?e+="".concat(i.x).concat(i.n).concat(r):e+="".concat(i.x).concat(i.n).concat(r,"|")})),{n:"".concat(e,"@").concat(this.l,"|").concat(this.p)}}}]),t}(),M=Object(f.a)(S.prototype,"index",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(f.a)(S.prototype,"bar",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(f.a)(S.prototype,"subNotes",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=Object(f.a)(S.prototype,"l",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=Object(f.a)(S.prototype,"p",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=Object(f.a)(S.prototype,"d",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(f.a)(S.prototype,"dx",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"dx"),S.prototype),Object(f.a)(S.prototype,"time",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"time"),S.prototype),Object(f.a)(S.prototype,"notesY",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"notesY"),S.prototype),Object(f.a)(S.prototype,"pointsY",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"pointsY"),S.prototype),Object(f.a)(S.prototype,"tailPointsX",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"tailPointsX"),S.prototype),Object(f.a)(S.prototype,"width",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"width"),S.prototype),Object(f.a)(S.prototype,"preHeight",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"preHeight"),S.prototype),Object(f.a)(S.prototype,"height",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"height"),S.prototype),Object(f.a)(S.prototype,"x",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"x"),S.prototype),Object(f.a)(S.prototype,"preMarginBottom",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"preMarginBottom"),S.prototype),Object(f.a)(S.prototype,"marginBottom",[O.f],Object.getOwnPropertyDescriptor(S.prototype,"marginBottom"),S.prototype),B=Object(f.a)(S.prototype,"isSelect",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S);var Y,L,I,X,A,R,V,J,q,$,K,Q,U,Z,tt,et,it,ot,rt,nt,at,st,pt,ct,ht=Object(j.a)(H=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(s.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"render",value:function(){var t=this;return r.a.createElement("g",{className:"muse-note__subnote",transform:"translate(0,"+this.props.y+")",width:this.props.w,height:this.props.h,onClick:function(){console.log("subnote"),T.instance.select(t.props.subNote.selection,!0),console.log(t.props.subNote.isSelect)}},r.a.createElement("text",{fontFamily:this.props.config.noteFontFamily,fontSize:this.props.config.noteFontSize,transform:"translate("+this.props.dx+",0)"},this.props.subNote.n),r.a.createElement("text",{fontFamily:this.props.config.noteFontFamily,fontSize:this.props.config.sigFontSize,transform:"translate(0,"+(this.props.config.sigFontSize-this.props.config.noteHeight)+")"},{S:"#",F:"b",DS:"x",DF:"d",N:"n"}[this.props.subNote.x]||""),r.a.createElement(b,{x:0,y:0,w:24,h:24,clazz:"muse-note__subnote",show:this.props.subNote.isSelect}))}}]),i}(r.a.Component))||H,ut=Object(j.a)(G=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(s.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"render",value:function(){var t=this,e="muse-note";return r.a.createElement("g",{className:e,transform:"translate("+this.props.note.x+",0)",width:this.props.note.width,height:this.props.note.height,onClick:function(){console.log("note"),T.instance.select(t.props.note.selection,!0)}},r.a.createElement(m,{w:this.props.note.width,h:this.props.note.height+this.props.note.marginBottom,clazz:e,show:this.props.note.isSelect,color:"blue"}),this.props.note.subNotes.map((function(e,i){return r.a.createElement(ht,{key:i,dx:t.props.note.dx,y:t.props.note.height-t.props.note.notesY[i],w:t.props.note.width,h:22,config:t.props.note.config,subNote:e})})),function(t,e){return r.a.createElement("g",{className:e+"__group-point"},t.pointsY.map((function(e,i){return r.a.createElement("circle",{key:i,r:t.config.pointRound,fill:"black",transform:"translate("+(t.dx+t.config.noteWidth/2)+","+(t.height-e+t.config.pointGap/2)+")"})})))}(this.props.note,e),function(t,e){return r.a.createElement("g",{className:e+"__tail-point"},t.tailPointsX.map((function(e,i){return r.a.createElement("circle",{key:i,r:t.config.pointRound,fill:"black",transform:"translate("+e+","+(t.height-t.config.noteHeight/3)+")"})})))}(this.props.note,e))}}]),i}(r.a.Component))||G,lt=i(14),ft=(Y=function(){function t(e,i,o,r){Object(s.a)(this,t),this.config=void 0,this.index=void 0,Object(l.a)(this,"track",L,this),Object(l.a)(this,"notes",I,this),this.index=i,this.track=o,this.config=r,this.decode(e)}return Object(p.a)(t,[{key:"width",get:function(){return this.track.barsWidth[this.index]}},{key:"height",get:function(){var t=0;return this.notes.forEach((function(e){var i=e.height+e.marginBottom;t=i>t?i:t})),t}},{key:"x",get:function(){return this.track.barsX[this.index]}},{key:"y",get:function(){return 0}},{key:"notesTime",get:function(){return this.notes.map((function(t){return t.time}))}},{key:"notesTimeSum",get:function(){return this.notesTime.reduce((function(t,e){return t.plus(e)}),new d).plus((new d).init(1,1))}},{key:"notesWidth",get:function(){return this.notes.map((function(t){return t.width}))}},{key:"notesX",get:function(){var t=this,e=this.width-this.notesWidthSum,i=(new d).init(e,1).divide(this.notesTimeSum),o=i.toNumber();return this.notesWidth.map((function(e,r){var n=o;return o+=e+t.notesTime[r].multiply(i).toNumber(),n}))}},{key:"preNotesMaxHeight",get:function(){return Math.max.apply(Math,Object(g.a)(this.notes.map((function(t){return t.preHeight}))))}},{key:"notesMaxHeight",get:function(){return this.track.notesMaxHeight}},{key:"preNotesMaxMarginBottom",get:function(){return Math.max.apply(Math,Object(g.a)(this.notes.map((function(t){return t.preMarginBottom}))))}},{key:"notesMaxMarginBottom",get:function(){return this.track.notesMaxMarginBottom}},{key:"baselineGroup",get:function(){for(var t=this,e=[],i=function(i){var o=0,r=0,n=-1;if(t.notes.forEach((function(t,a){t.l>i?(n=a,o++):(r<=n&&e.push({y:i,s:r,e:n}),r=a+1,n=a)})),r<=n&&e.push({y:i,s:r,e:n}),0===o)return"break"},o=0;;++o){if("break"===i(o))break}return e}},{key:"notesWidthSum",get:function(){var t=0;return this.notes.forEach((function(e){return t+=e.width})),t}}]),Object(p.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.notes&&t.notes.forEach((function(t,i){e.notes.push(new C(t,e,i))}))}},{key:"code",value:function(){return{notes:this.notes.map((function(t){return t.code()}))}}}]),t}(),L=Object(f.a)(Y.prototype,"track",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=Object(f.a)(Y.prototype,"notes",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(f.a)(Y.prototype,"width",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"width"),Y.prototype),Object(f.a)(Y.prototype,"height",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"height"),Y.prototype),Object(f.a)(Y.prototype,"x",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"x"),Y.prototype),Object(f.a)(Y.prototype,"y",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"y"),Y.prototype),Object(f.a)(Y.prototype,"notesTime",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesTime"),Y.prototype),Object(f.a)(Y.prototype,"notesTimeSum",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesTimeSum"),Y.prototype),Object(f.a)(Y.prototype,"notesWidth",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesWidth"),Y.prototype),Object(f.a)(Y.prototype,"notesX",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesX"),Y.prototype),Object(f.a)(Y.prototype,"preNotesMaxHeight",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"preNotesMaxHeight"),Y.prototype),Object(f.a)(Y.prototype,"notesMaxHeight",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesMaxHeight"),Y.prototype),Object(f.a)(Y.prototype,"preNotesMaxMarginBottom",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"preNotesMaxMarginBottom"),Y.prototype),Object(f.a)(Y.prototype,"notesMaxMarginBottom",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesMaxMarginBottom"),Y.prototype),Object(f.a)(Y.prototype,"baselineGroup",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"baselineGroup"),Y.prototype),Object(f.a)(Y.prototype,"notesWidthSum",[O.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesWidthSum"),Y.prototype),Y),gt=function(t){var e=Object(lt.a)((function(){return[t.w,t.h]})),i=Object(y.a)(e,2),o=i[0],n=i[1];return r.a.createElement("line",{className:t.clazz+"__bar-line",x1:o,y1:0,x2:o,y2:n,strokeWidth:1,stroke:"black"})},yt=function(t){var e=t.bar,i=t.clazz,o=Object(lt.a)((function(){return[e.baselineGroup,e.notes]})),n=Object(y.a)(o,2),a=n[0],s=n[1];return r.a.createElement("g",{className:i+"__base-line"},a.map((function(t,i){return r.a.createElement("line",{key:i,x1:s[t.s].x,y1:s[t.s].height+(t.y+1)*e.config.pointGap,x2:s[t.e].x+e.notes[t.e].width,y2:s[t.s].height+(t.y+1)*e.config.pointGap,stroke:"black",strokeWidth:1})})))},bt=Object(j.a)(X=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(s.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"render",value:function(){var t=this.props.bar.notes,e="muse-bar";return r.a.createElement("g",{className:e,transform:"translate("+this.props.bar.x+","+this.props.bar.y+")",width:this.props.bar.width,height:this.props.bar.height},r.a.createElement(b,{w:this.props.bar.width,h:this.props.bar.height,x:0,y:0,clazz:e,show:this.props.bar.config.showBorder}),r.a.createElement(gt,{w:this.props.bar.width,h:this.props.bar.height,clazz:e}),t.map((function(t,e){return r.a.createElement(ut,{key:e,note:t})})),r.a.createElement(yt,{bar:this.props.bar,clazz:e}))}}]),i}(r.a.Component))||X,mt=(A=function(){function t(e,i,o,r){Object(s.a)(this,t),this.config=void 0,this.index=void 0,this.line=void 0,Object(l.a)(this,"bars",R,this),this.index=i,this.line=o,this.config=r,this.decode(e)}return Object(p.a)(t,[{key:"width",get:function(){return this.line.width}},{key:"height",get:function(){var t=0;return this.bars.forEach((function(e){t=e.height>t?e.height:t})),t}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return this.line.tracksY[this.index]}},{key:"barsTime",get:function(){return this.bars.map((function(t){return t.notesTimeSum}))}},{key:"barsWidth",get:function(){var t=this,e=this.barsTime.reduce((function(t,e){return t.plus(e)}),new d),i=this.width-this.notesWidthSum,o=(new d).init(i,1).divide(e);return this.barsNotesWidth.map((function(e,i){return e+t.barsTime[i].multiply(o).toNumber()}))}},{key:"barsX",get:function(){var t=0;return this.barsWidth.map((function(e){var i=t;return t+=e,i}))}},{key:"notesMaxHeight",get:function(){return Math.max.apply(Math,Object(g.a)(this.bars.map((function(t){return t.preNotesMaxHeight}))))}},{key:"notesMaxMarginBottom",get:function(){return Math.max.apply(Math,Object(g.a)(this.bars.map((function(t){return t.preNotesMaxMarginBottom}))))}},{key:"notesWidthSum",get:function(){return this.barsNotesWidth.reduce((function(t,e){return t+e}),0)}},{key:"barsNotesWidth",get:function(){return this.bars.map((function(t){return t.notesWidthSum}))}}]),Object(p.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.bars&&t.bars.forEach((function(t,i){e.bars.push(new ft(t,i,e,e.config))}))}},{key:"code",value:function(){return{bars:this.bars.map((function(t){return t.code()}))}}}]),t}(),R=Object(f.a)(A.prototype,"bars",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(f.a)(A.prototype,"width",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"width"),A.prototype),Object(f.a)(A.prototype,"height",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"height"),A.prototype),Object(f.a)(A.prototype,"x",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"x"),A.prototype),Object(f.a)(A.prototype,"y",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"y"),A.prototype),Object(f.a)(A.prototype,"barsTime",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"barsTime"),A.prototype),Object(f.a)(A.prototype,"barsWidth",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"barsWidth"),A.prototype),Object(f.a)(A.prototype,"barsX",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"barsX"),A.prototype),Object(f.a)(A.prototype,"notesMaxHeight",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"notesMaxHeight"),A.prototype),Object(f.a)(A.prototype,"notesMaxMarginBottom",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"notesMaxMarginBottom"),A.prototype),Object(f.a)(A.prototype,"notesWidthSum",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"notesWidthSum"),A.prototype),Object(f.a)(A.prototype,"barsNotesWidth",[O.f],Object.getOwnPropertyDescriptor(A.prototype,"barsNotesWidth"),A.prototype),A),dt=Object(j.a)(V=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(s.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"render",value:function(){return r.a.createElement("g",{className:"muse-track",transform:"translate("+this.props.track.x+","+this.props.track.y+")",width:this.props.track.width,height:this.props.track.height},r.a.createElement(b,{w:this.props.track.width,h:this.props.track.height,x:0,y:0,clazz:"muse-track",show:this.props.track.config.showBorder}),this.props.track.bars.map((function(t,e){return r.a.createElement(bt,{key:e,bar:t})})))}}]),i}(r.a.Component))||V,Ot=(J=function(){function t(e,i,o,r){Object(s.a)(this,t),this.page=void 0,this.index=void 0,this.config=void 0,Object(l.a)(this,"tracks",q,this),this.page=o,this.index=i,this.config=r,this.decode(e)}return Object(p.a)(t,[{key:"width",get:function(){return this.page.width}},{key:"height",get:function(){var t=this,e=0;return this.tracks.forEach((function(i){e+=i.height+t.config.trackGap})),e-=this.config.trackGap}},{key:"x",get:function(){return this.page.x}},{key:"y",get:function(){return this.page.linesY[this.index]}},{key:"tracksY",get:function(){var t=this,e=0;return this.tracks.map((function(i){var o=e;return e+=i.height+t.config.trackGap,o}))}}]),Object(p.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.tracks&&t.tracks.forEach((function(t,i){e.tracks.push(new mt(t,i,e,e.config))}))}},{key:"code",value:function(){return{tracks:this.tracks.map((function(t){return t.code()}))}}}]),t}(),q=Object(f.a)(J.prototype,"tracks",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(f.a)(J.prototype,"width",[O.f],Object.getOwnPropertyDescriptor(J.prototype,"width"),J.prototype),Object(f.a)(J.prototype,"height",[O.f],Object.getOwnPropertyDescriptor(J.prototype,"height"),J.prototype),Object(f.a)(J.prototype,"x",[O.f],Object.getOwnPropertyDescriptor(J.prototype,"x"),J.prototype),Object(f.a)(J.prototype,"y",[O.f],Object.getOwnPropertyDescriptor(J.prototype,"y"),J.prototype),Object(f.a)(J.prototype,"tracksY",[O.f],Object.getOwnPropertyDescriptor(J.prototype,"tracksY"),J.prototype),J),jt=function(t){var e=t.height,i=t.clazz;return r.a.createElement("g",{className:i+"__line-head"},r.a.createElement("line",{x1:0,y1:0,x2:0,y2:e,strokeWidth:1,stroke:"black"}))},wt=Object(j.a)($=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(s.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"render",value:function(){return r.a.createElement("g",{className:"muse-line",transform:"translate("+this.props.line.x+","+this.props.line.y+")",width:this.props.line.width,height:this.props.line.height},r.a.createElement(b,{w:this.props.line.width,h:this.props.line.height,x:0,y:0,clazz:"muse-line",show:this.props.line.config.showBorder}),r.a.createElement(jt,{height:this.props.line.height,clazz:"muse-line"}),this.props.line.tracks.map((function(t,e){return r.a.createElement(dt,{key:e,track:t})})))}}]),i}(r.a.Component))||$,vt=(K=function(){function t(e,i,o,r){Object(s.a)(this,t),this.notation=void 0,this.config=void 0,this.index=void 0,Object(l.a)(this,"lines",Q,this),this.index=i,this.notation=o,this.config=r,this.decode(e)}return Object(p.a)(t,[{key:"width",get:function(){return this.config.pageWidth-2*this.config.pageMarginHorizontal}},{key:"height",get:function(){return this.config.pageWidth*this.config.pageE-2*this.config.pageMarginVertical}},{key:"x",get:function(){return this.config.pageMarginHorizontal}},{key:"y",get:function(){return this.marginTop+this.index*this.height}},{key:"marginTop",get:function(){var t=0;if(0===this.index){t+=this.config.pageMarginVertical;var e=this.config.infoGap;t+=this.config.infoTitleFontSize+e,t+=this.config.infoSubtitleFontSize+e,this.notation.info.author.length>2?t+=this.notation.info.author.length*(this.config.infoFontSize+e):t+=2*(this.config.infoFontSize+e)}else t=this.config.pageMarginVertical;return t}},{key:"marginBottom",get:function(){return this.config.pageMarginVertical}},{key:"marginLeft",get:function(){return this.config.pageMarginHorizontal}},{key:"marginRight",get:function(){return this.config.pageMarginHorizontal}},{key:"linesHeight",get:function(){return this.lines.map((function(t){return t.height}))}},{key:"linesY",get:function(){var t=this.marginTop,e=this.linesHeight.reduce((function(t,e){return t+e}),0),i=(this.height-e)/(this.lines.length-1);return this.linesHeight.map((function(e){var o=t;return t+=e+i,o}))}}]),Object(p.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.lines&&t.lines.forEach((function(t,i){e.lines.push(new Ot(t,i,e,e.config))}))}},{key:"code",value:function(){return{lines:this.lines.map((function(t){return t.code()}))}}}]),t}(),Q=Object(f.a)(K.prototype,"lines",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(f.a)(K.prototype,"width",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"width"),K.prototype),Object(f.a)(K.prototype,"height",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"height"),K.prototype),Object(f.a)(K.prototype,"x",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"x"),K.prototype),Object(f.a)(K.prototype,"y",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"y"),K.prototype),Object(f.a)(K.prototype,"marginTop",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"marginTop"),K.prototype),Object(f.a)(K.prototype,"marginBottom",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"marginBottom"),K.prototype),Object(f.a)(K.prototype,"marginLeft",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"marginLeft"),K.prototype),Object(f.a)(K.prototype,"marginRight",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"marginRight"),K.prototype),Object(f.a)(K.prototype,"linesHeight",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"linesHeight"),K.prototype),Object(f.a)(K.prototype,"linesY",[O.f],Object.getOwnPropertyDescriptor(K.prototype,"linesY"),K.prototype),K),kt=function(t){var e=t.index,i=t.x,o=t.y,n=t.clazz,a=t.config;return r.a.createElement("g",{className:n+"__page-index",transform:"translate("+i+","+o+")"},r.a.createElement("text",{textAnchor:"middle",fontFamily:a.textFontFamily,fontSize:a.pageIndexFontSize},(e+1).toString()))},xt=Object(j.a)(U=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(s.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"render",value:function(){var t="muse-page";return r.a.createElement("g",{className:t,transform:"translate("+(this.props.page.x-this.props.page.marginLeft)+","+(this.props.page.y-this.props.page.marginTop)+")",width:this.props.page.width+this.props.page.marginLeft+this.props.page.marginRight,height:this.props.page.height+this.props.page.marginTop+this.props.page.marginBottom},r.a.createElement(b,{w:this.props.page.width,h:this.props.page.height,x:this.props.page.x,y:this.props.page.y,clazz:t,show:this.props.page.config.showBorder}),r.a.createElement(m,{w:this.props.page.width+this.props.page.marginLeft+this.props.page.marginLeft,h:this.props.page.height+this.props.page.marginTop+this.props.page.marginBottom,clazz:t,show:!0}),r.a.createElement(kt,{index:this.props.page.index,x:this.props.page.marginLeft+this.props.page.width/2,y:this.props.page.marginTop+this.props.page.height+this.props.page.marginBottom/2,clazz:t,config:this.props.page.config}),this.props.page.lines.map((function(t,e){return r.a.createElement(wt,{key:e,line:t})})))}}]),i}(r.a.Component))||U,zt=(Z=function t(){Object(s.a)(this,t),Object(l.a)(this,"title",tt,this),Object(l.a)(this,"subtitle",et,this),Object(l.a)(this,"author",it,this),Object(l.a)(this,"speed",ot,this),Object(l.a)(this,"rhythmic",rt,this),Object(l.a)(this,"C",nt,this)},tt=Object(f.a)(Z.prototype,"title",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),et=Object(f.a)(Z.prototype,"subtitle",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),it=Object(f.a)(Z.prototype,"author",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=Object(f.a)(Z.prototype,"speed",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),rt=Object(f.a)(Z.prototype,"rhythmic",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),nt=Object(f.a)(Z.prototype,"C",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Z),Et=(at=function(){function t(e,i){Object(s.a)(this,t),this.config=void 0,Object(l.a)(this,"pages",st,this),Object(l.a)(this,"info",pt,this),this.config=i,this.decode(e)}return Object(p.a)(t,[{key:"height",get:function(){var t=0;return this.pages.forEach((function(e){return t+=e.height+e.marginTop+e.marginBottom})),t}},{key:"width",get:function(){return this.config.pageWidth}}]),Object(p.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.pages&&t.pages.forEach((function(t,i){e.pages.push(new vt(t,i,e,e.config))})),void 0!==t.title&&(this.info.title=t.title),void 0!==t.subtitle&&(this.info.subtitle=t.subtitle),void 0!==t.author&&(this.info.author=t.author.toString().split("|")),void 0!==t.speed&&(this.info.speed=t.speed),t.rhythmic&&(this.info.rhythmic=t.rhythmic),t.C&&(this.info.C=t.C)}},{key:"code",value:function(){var t=this,e=this.pages.map((function(t){return t.code()})),i="";return this.info.author.forEach((function(e,o){o===t.info.author.length-1?i+=e:i+=e+"|"})),{title:this.info.title,subtitle:this.info.subtitle,author:i,rhythmic:this.info.rhythmic,speed:this.info.speed,C:this.info.C,pages:e}}}]),t}(),st=Object(f.a)(at.prototype,"pages",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pt=Object(f.a)(at.prototype,"info",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new zt}}),Object(f.a)(at.prototype,"height",[O.f],Object.getOwnPropertyDescriptor(at.prototype,"height"),at.prototype),Object(f.a)(at.prototype,"width",[O.f],Object.getOwnPropertyDescriptor(at.prototype,"width"),at.prototype),at),St=function(t){var e=t.info,i=t.config,o=t.clazz,n=0;n+=i.pageMarginVertical;var a=r.a.createElement("text",{className:o+"__info-title",fontFamily:i.textFontFamily,width:i.pageWidth,textAnchor:"middle",fontSize:i.infoTitleFontSize,transform:"translate("+i.pageWidth/2+","+n+")"},e.title);n+=i.infoTitleFontSize+i.infoGap;var s=r.a.createElement("text",{className:o+"__info-subtitle",fontFamily:i.textFontFamily,width:i.pageWidth,textAnchor:"middle",fontSize:i.infoSubtitleFontSize,transform:"translate("+i.pageWidth/2+","+n+")"},e.subtitle),p=n,c=e.author.length,h=r.a.createElement("g",{className:o+"__info-author"},e.author.map((function(t,e){return p+=i.infoFontSize+i.infoGap,e<c-2&&(n+=i.infoFontSize+i.infoGap),r.a.createElement("text",{key:e,fontFamily:i.textFontFamily,width:i.pageWidth,fontSize:i.infoFontSize,textAnchor:"end",x:0,transform:"translate("+(i.pageWidth-i.pageMarginHorizontal)+","+p+")"},t)}))),u=n+(i.infoGap+i.infoSubtitleFontSize),l=u+(i.infoGap+i.infoFontSize),f=r.a.createElement("g",{className:o+"__info-rythmic",width:i.pageWidth},r.a.createElement("text",{fontFamily:i.textFontFamily,width:i.pageWidth,fontSize:i.infoFontSize,transform:"translate("+i.pageMarginHorizontal+","+u+")"},e.speed),r.a.createElement("text",{fontFamily:i.textFontFamily,width:i.pageWidth,fontSize:i.infoFontSize,transform:"translate("+i.pageMarginHorizontal+","+l+")"},"1=".concat(e.C," ").concat(e.rhythmic)));return r.a.createElement("g",{className:o+"__info",width:i.pageWidth},a,s,h,f)},Mt=Object(j.a)(ct=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(s.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"render",value:function(){var t="muse-notation";return r.a.createElement("svg",{className:"muse",width:this.props.notation.width+20,height:this.props.notation.height+20},r.a.createElement("g",{className:t,transform:"translate(10,10)",width:this.props.notation.width,height:this.props.notation.height},r.a.createElement(St,{info:this.props.notation.info,config:this.props.notation.config,clazz:t}),r.a.createElement(b,{w:this.props.notation.width,h:this.props.notation.height,x:0,y:0,clazz:t}),this.props.notation.pages.map((function(t,e){return r.a.createElement(xt,{key:e,page:t})}))))}}]),i}(r.a.Component))||ct;var Pt=function(t){var e=JSON.parse(t.data),i=new Et(e,t.config?t.config:new u);return r.a.createElement("div",null,r.a.createElement(Mt,{notation:i}),r.a.createElement("button",{onClick:function(){console.log(i.code())}},"log"))},Nt=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(t){var o;return Object(s.a)(this,i),(o=e.call(this,t)).state={error:null,isLoaded:!1,data:""},o}return Object(p.a)(i,[{key:"componentDidMount",value:function(){var t=this;fetch("https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/b.json").then((function(t){return t.text()})).then((function(e){t.setState({isLoaded:!0,data:e})}),(function(e){t.setState({isLoaded:!0,error:e})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("h1",null,"Example"),this.state.isLoaded?this.state.error?"error":r.a.createElement(Pt,{data:this.state.data}):"loading...")}}]),i}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.54c1f19c.chunk.js.map