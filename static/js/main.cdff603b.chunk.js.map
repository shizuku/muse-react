{"version":3,"sources":["muse/MuseConfig.ts","muse/Dimens.ts","muse/Border.tsx","muse/MuseNote.tsx","muse/MuseBar.tsx","muse/MuseTrack.tsx","muse/MuseLine.tsx","muse/MusePage.tsx","muse/MuseNotation.tsx","muse/Selector.ts","muse/Muse.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["MuseConfig","noteHeight","noteWidth","noteFontSize","noteFontFamily","sigFontSize","trackGap","lineGap","pointGap","tailPointGap","pointRound","pageE","notationWidth","pageMarginHorizontal","pageMarginVertical","infoTitleFontSize","infoSubtitleFontSize","infoGap","infoFontSize","pageIndexFontSize","textFontFamily","Dimens","x","y","width","height","marginTop","marginBottom","marginLeft","marginRight","this","marginHorizontal","marginVertical","d","border","clazz","show","color","ifShow","className","transform","stroke","strokeWidth","fill","outerBorder","Note","o","config","noteGroup","l","p","dx","time","notesY","pointsY","tailPointsX","dimens","isSelect","decode","undefined","n","pos","search","ns","ts","substr","split","forEach","it","i","length","charCodeAt","charAt","t","push","tg","parseInt","toString","ny","mb","py","idx","h","MuseNote","props","note","onClick","map","key","fontFamily","fontSize","S","F","DS","DF","N","r","pointGroup","tailPoint","Bar","notes","unitNum","notesX","baselineGroup","generateBaseline","Math","pow","q","code","s","e","MuseBar","bar","x1","y1","x2","y2","barLine","baseLine","cursor","selector","Track","bars","MuseTrack","track","Line","tracks","MuseLine","line","lineHead","Page","lines","index","MusePage","page","textAnchor","pageIndex","Notation","json","pages","title","subtitle","author","speed","rhythmic","C","JSON","parse","MuseNotation","notation","margin","y3","rythimic","notationInfo","Selector","g","clear","setSelect","Muse","useState","data","hm","vm","w","notationH","pageIdx","linesHeight","lineYSpace","lineHeight","trackY","barsW","barIdx","barUnitSum","reduce","trackHeight","maxNoteHeight","maxNoteMarginBottom","barX","notesWidth","settle","noteMarginBootom","lineYUnit","init","setNotation","App","state","error","isLoaded","fetch","url","then","res","text","result","setState","React","Component","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.cdff603b.chunk.js","sourcesContent":["export default class MuseConfig {\n  noteHeight = 22;\n  noteWidth = 11;\n  noteFontSize = 22;\n  noteFontFamily = \"serif\";\n  sigFontSize = 14;\n\n  trackGap = 10;\n\n  lineGap = 20;\n\n  pointGap = 5;\n  tailPointGap = 8;\n  pointRound = 1.5;\n\n  pageE = 1.414;\n  notationWidth = 1000;\n  pageMarginHorizontal = 100;\n  pageMarginVertical = 110;\n\n  infoTitleFontSize = 34;\n  infoSubtitleFontSize = 22;\n  infoGap = 7;\n  infoFontSize = 20;\n\n  pageIndexFontSize = 20;\n\n  textFontFamily = \"serif\";\n}\n","export default class Dimens {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  marginTop: number;\n  marginBottom: number;\n  marginLeft: number;\n  marginRight: number;\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.width = 0;\n    this.height = 0;\n    this.marginBottom = 0;\n    this.marginTop = 0;\n    this.marginLeft = 0;\n    this.marginRight = 0;\n  }\n  init(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    marginHorizontal: number,\n    marginVertical: number\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.marginBottom = marginVertical;\n    this.marginTop = marginVertical;\n    this.marginLeft = marginHorizontal;\n    this.marginRight = marginHorizontal;\n  }\n  copyFrom(d: Dimens) {\n    this.x = d.x;\n    this.y = d.y;\n    this.width = d.width;\n    this.height = d.height;\n    this.marginBottom = d.marginBottom;\n    this.marginTop = d.marginTop;\n    this.marginLeft = d.marginLeft;\n    this.marginRight = d.marginRight;\n  }\n}\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\n\nexport function border(\n  d: Dimens,\n  clazz: string,\n  show: boolean = false,\n  color: string = \"blue\"\n) {\n  let ifShow = false;\n  if (show || ifShow) {\n    return (\n      <rect\n        className={clazz + \"__border\"}\n        transform={\"translate(\" + d.marginLeft + \",\" + d.marginTop + \")\"}\n        width={d.width}\n        height={d.height}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n}\n\nexport function outerBorder(\n  d: Dimens,\n  clazz: string,\n  show: boolean = false,\n  color: string = \"gray\"\n) {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__outer-border\"}\n        transform={\"translate(0,0)\"}\n        width={d.width + d.marginLeft + d.marginRight}\n        height={d.height + d.marginTop + d.marginBottom}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n}\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport { outerBorder } from \"./Border\";\nimport MuseConfig from \"./MuseConfig\";\nimport Selector from \"./Selector\";\nimport Codec from \"./Codec\";\nimport Fraction from \"./Fraction\";\n\nexport class Note implements Codec {\n  config: MuseConfig;\n  noteGroup: {\n    x: string;\n    n: string;\n    t: number;\n  }[] = [];\n  l: number = 0;\n  p: number = 0;\n  d: number = 0;\n  dx: number = 0;\n  time: Fraction | null = null;\n  notesY: number[] = [];\n  pointsY: number[] = [];\n  tailPointsX: number[] = [];\n  dimens: Dimens = new Dimens();\n  isSelect: boolean = false;\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.n !== undefined) {\n      let n: string = o.n;\n      let pos = n.search(\"@\");\n      let ns = \"\";\n      let ts = \"\";\n      if (pos === -1) {\n        ns = n;\n        ts = \"0|0\";\n      } else {\n        ns = n.substr(0, pos);\n        ts = n.substr(pos + 1);\n      }\n      let ng = ns.split(\"|\");\n      ng.forEach((it) => {\n        for (let i = 0; i < it.length; ++i) {\n          if (\n            (it.charCodeAt(i) <= 57 && it.charCodeAt(i) >= 48) ||\n            it.charCodeAt(i) === 45\n          ) {\n            let x = it.substr(0, i);\n            let n = it.charAt(i);\n            let t = it.substr(i + 1).length;\n            if (t !== 0 && it.charAt(i + 1) === \"-\") {\n              t = -t;\n            }\n            this.noteGroup.push({ x, n, t });\n            if (x !== \"\") {\n              this.dx = this.config.sigFontSize / 2;\n            }\n            break;\n          }\n        }\n      });\n      let tg = ts.split(\"|\");\n      if (tg.length === 3) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = parseInt(tg[2]);\n      } else if (tg.length === 2) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = 1;\n      } else if (tg.length === 1) {\n        this.l = parseInt(tg[0]);\n        this.p = 0;\n        this.d = 1;\n      } else {\n        this.l = 0;\n        this.p = 0;\n        this.d = 1;\n      }\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): any {\n    let o: any = {};\n    o.n = \"@\" + this.time?.toString();\n    return o;\n  }\n  settle() {\n    let width =\n      this.dx + this.config.noteWidth + this.p * this.config.tailPointGap;\n    let ny = 0;\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    let py = 0;\n    this.noteGroup.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x / 2;\n            this.pointsY.push(-mb);\n            mb += x / 2;\n          }\n        }\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            py += x / 2;\n            this.pointsY.push(py);\n            py += x / 2;\n            ny += x;\n          }\n        }\n      }\n      this.notesY.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      py += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          py += x / 2;\n          this.pointsY.push(py);\n          py += x / 2;\n          ny += x;\n        }\n      }\n    });\n    for (let i = 0; i < this.p; ++i) {\n      this.tailPointsX.push(\n        this.dx + this.config.noteWidth + (i + 1 / 2) * this.config.tailPointGap\n      );\n    }\n    this.dimens.width = width;\n    this.dimens.height = ny;\n    this.dimens.marginBottom = mb;\n  }\n}\n\nfunction castX(x: string) {\n  let m: Record<string, string> = {\n    S: \"#\",\n    F: \"b\",\n    DS: \"x\",\n    DF: \"d\",\n    N: \"n\",\n  };\n  return m[x] || \"\";\n}\n\nfunction noteGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-note\"}>\n      {note.noteGroup.map((it, idx) => {\n        return (\n          <g\n            className={clazz + \"__note-one\"}\n            key={idx}\n            width={note.dimens.width}\n            height={note.notesY[idx]}\n            transform={\n              \"translate(\" +\n              0 +\n              \",\" +\n              (note.dimens.height - note.notesY[idx]) +\n              \")\"\n            }\n          >\n            <text\n              fontFamily={note.config.noteFontFamily}\n              fontSize={note.config.noteFontSize}\n              transform={\"translate(\" + note.dx + \",\" + 0 + \")\"}\n            >\n              {it.n}\n            </text>\n            <text\n              fontFamily={note.config.noteFontFamily}\n              fontSize={note.config.sigFontSize}\n              transform={\n                \"translate(\" +\n                0 +\n                \",\" +\n                (note.config.sigFontSize - note.config.noteHeight) +\n                \")\"\n              }\n            >\n              {castX(it.x)}\n            </text>\n          </g>\n        );\n      })}\n    </g>\n  );\n}\n\nfunction pointGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-point\"}>\n      {note.pointsY.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            (note.dx + note.config.noteWidth / 2) +\n            \",\" +\n            (note.dimens.height - it + note.config.pointGap / 2) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction tailPoint(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__tail-point\"}>\n      {note.tailPointsX.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            it +\n            \",\" +\n            (note.dimens.height - note.config.noteHeight / 3) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction MuseNote(props: { note: Note; cursor: number[]; selector: Selector }) {\n  let d = props.note.dimens;\n  let clazz = \"muse-note\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n      onClick={() => {}}\n    >\n      {outerBorder(d, clazz, props.note.isSelect, \"blue\")}\n      {noteGroup(props.note, clazz)}\n      {pointGroup(props.note, clazz)}\n      {tailPoint(props.note, clazz)}\n    </g>\n  );\n}\n\nexport default MuseNote;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MuseNote, { Note } from \"./MuseNote\";\nimport { border } from \"./Border\";\nimport Selector from \"./Selector\";\nimport Codec from \"./Codec\";\n\nexport class Bar implements Codec {\n  config: MuseConfig;\n  notes: Note[] = [];\n  dimens: Dimens = new Dimens();\n  unitNum: number = 0;\n  notesX: number[] = [];\n  baselineGroup: {\n    y: number;\n    s: number;\n    e: number;\n  }[] = [];\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.notes !== undefined) {\n      o.notes.forEach((it: any) => {\n        this.notes.push(new Note(it, this.config));\n      });\n      this.generateBaseline();\n      this.notesX.push(1);\n      this.notes.forEach((note, idx) => {\n        let x = 0;\n        if (this.notes[idx + 1] === undefined) {\n          x += 1;\n        } else if (\n          this.notes[idx + 1] !== undefined &&\n          this.notes[idx + 1].l < note.l\n        ) {\n          x += Math.pow(2, -this.notes[idx + 1].l);\n        } else {\n          x += Math.pow(2, -note.l);\n        }\n        let q = 1;\n        for (let i = 1; i <= note.p; ++i) {\n          q += Math.pow(2, -i);\n        }\n        x *= q;\n        this.notesX.push(x);\n        this.unitNum += x;\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): any {\n    let o: any = {};\n    o.notes = [];\n    this.notes.forEach((it) => o.notes.push(it.code()));\n    return o;\n  }\n  generateBaseline() {\n    for (let i = 0; ; ++i) {\n      let x = 0;\n      let s = 0;\n      let e = -1;\n      this.notes.forEach((it, idx) => {\n        if (it.l > i) {\n          e = idx;\n          x++;\n        } else {\n          if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n          s = idx + 1;\n          e = idx;\n        }\n      });\n      if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n      if (x === 0) {\n        break;\n      }\n    }\n  }\n}\n\nfunction barLine(d: Dimens, clazz: string) {\n  return (\n    <line\n      className={clazz + \"__bar-line\"}\n      x1={d.marginLeft + d.width + d.marginRight}\n      y1={0}\n      x2={d.marginLeft + d.width + d.marginRight}\n      y2={d.height}\n      strokeWidth={1}\n      stroke=\"black\"\n    />\n  );\n}\n\nfunction baseLine(bar: Bar, clazz: string) {\n  return (\n    <g className={clazz + \"__base-line\"}>\n      {bar.baselineGroup.map((it, idx) => (\n        <line\n          key={idx}\n          x1={bar.notes[it.s].dimens.x}\n          y1={bar.notes[it.s].dimens.height + (it.y + 1) * bar.config.pointGap}\n          x2={bar.notes[it.e].dimens.x + bar.notes[it.e].dimens.width}\n          y2={bar.notes[it.s].dimens.height + (it.y + 1) * bar.config.pointGap}\n          stroke={\"black\"}\n          strokeWidth={1}\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction MuseBar(props: { bar: Bar; cursor: number[]; selector: Selector }) {\n  let d = props.bar.dimens;\n  let clazz = \"muse-bar\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {barLine(d, clazz)}\n      {baseLine(props.bar, clazz)}\n      {props.bar.notes.map((it, idx) => (\n        <MuseNote\n          note={it}\n          key={idx}\n          cursor={[...props.cursor, idx]}\n          selector={props.selector}\n        />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseBar;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseBar, { Bar } from \"./MuseBar\";\nimport { border } from \"./Border\";\nimport Selector from \"./Selector\";\nimport Codec from \"./Codec\";\n\nexport class Track implements Codec {\n  config: MuseConfig;\n  bars: Bar[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.bars !== undefined) {\n      o.bars.forEach((it: any) => {\n        this.bars.push(new Bar(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code(): any {\n    let o: any = {};\n    o.bars = [];\n    this.bars.forEach((it) => o.bars.push(it.code()));\n    return o;\n  }\n}\n\nfunction MuseTrack(props: {\n  track: Track;\n  cursor: number[];\n  selector: Selector;\n}) {\n  let d = props.track.dimens;\n  let clazz = \"muse-track\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {props.track.bars.map((it, idx) => (\n        <MuseBar\n          bar={it}\n          key={idx}\n          cursor={[...props.cursor, idx]}\n          selector={props.selector}\n        />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseTrack;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseTrack, { Track } from \"./MuseTrack\";\nimport { border } from \"./Border\";\nimport Selector from \"./Selector\";\nimport Codec from \"./Codec\";\n\nexport class Line implements Codec {\n  config: MuseConfig;\n  tracks: Track[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.tracks !== undefined) {\n      o.tracks.forEach((it: any) => {\n        this.tracks.push(new Track(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code() {\n    let o: any = {};\n    o.tracks = [];\n    this.tracks.forEach((it) => o.tracks.push(it.code()));\n    return o;\n  }\n}\n\nfunction lineHead(d: Dimens, clazz: string) {\n  return (\n    <g className={clazz + \"__line-head\"}>\n      <line x1={0} y1={0} x2={0} y2={d.height} strokeWidth={1} stroke=\"black\" />\n    </g>\n  );\n}\n\nfunction MuseLine(props: { line: Line; cursor: number[]; selector: Selector }) {\n  let d = props.line.dimens;\n  let clazz = \"muse-line\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {lineHead(d, clazz)}\n      {props.line.tracks.map((it, idx) => (\n        <MuseTrack\n          track={it}\n          key={idx}\n          cursor={[...props.cursor, idx]}\n          selector={props.selector}\n        />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseLine;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MuseLine, { Line } from \"./MuseLine\";\nimport { border, outerBorder } from \"./Border\";\nimport Selector from \"./Selector\";\nimport Codec from \"./Codec\";\n\nexport class Page implements Codec {\n  config: MuseConfig;\n  lines: Line[] = [];\n  dimens: Dimens = new Dimens();\n  index: number = 0;\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.lines !== undefined) {\n      o.lines.forEach((it: any) => {\n        this.lines.push(new Line(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  code() {\n    let o: any = {};\n    o.lines = [];\n    this.lines.forEach((it) => o.lines.push(it.code()));\n    return o;\n  }\n}\n\nfunction pageIndex(idx: number, d: Dimens, clazz: string, config: MuseConfig) {\n  return (\n    <g\n      className={clazz + \"__page-index\"}\n      transform={\n        \"translate(\" +\n        (d.marginLeft + d.width / 2) +\n        \",\" +\n        (d.marginTop + d.height + d.marginBottom / 2) +\n        \")\"\n      }\n    >\n      <text\n        textAnchor={\"middle\"}\n        fontFamily={config.textFontFamily}\n        fontSize={config.pageIndexFontSize}\n      >\n        {idx.toString()}\n      </text>\n    </g>\n  );\n}\n\nfunction MusePage(props: { page: Page; cursor: number[]; selector: Selector }) {\n  let d = props.page.dimens;\n  let clazz = \"muse-page\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {outerBorder(d, clazz, true)}\n      {pageIndex(props.page.index, d, clazz, props.page.config)}\n      {props.page.lines.map((it, idx) => (\n        <MuseLine\n          line={it}\n          key={idx}\n          cursor={[...props.cursor, idx]}\n          selector={props.selector}\n        />\n      ))}\n    </g>\n  );\n}\n\nexport default MusePage;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MusePage, { Page } from \"./MusePage\";\nimport { border } from \"./Border\";\nimport Selector from \"./Selector\";\nimport Codec from \"./Codec\";\n\nexport class Notation implements Codec {\n  config: MuseConfig;\n  pages: Page[] = [];\n  title: string = \"\";\n  subtitle: string = \"\";\n  author: string[] = [];\n  speed: string = \"\";\n  rhythmic: string = \"\";\n  C: string = \"\";\n  dimens: Dimens = new Dimens();\n  constructor(json: string, config: MuseConfig) {\n    this.config = config;\n    let o: any = JSON.parse(json);\n    this.decode(o);\n  }\n  decode(o: any): void {\n    if (o.pages !== undefined) {\n      o.pages.forEach((it: any) => {\n        this.pages.push(new Page(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n    if (o.title !== undefined) {\n      this.title = o.title;\n    }\n    if (o.subtitle !== undefined) {\n      this.subtitle = o.subtitle;\n    }\n    if (o.author !== undefined) {\n      this.author = o.author.toString().split(\"|\");\n    }\n    if (o.speed !== undefined) {\n      this.speed = o.speed;\n    }\n    if (o.rhythmic) {\n      this.rhythmic = o.rhythmic;\n    }\n    if (o.C) {\n      this.C = \"1=\" + o.C;\n    }\n  }\n  code() {\n    let o: any = {};\n    o.pages = [];\n    this.pages.forEach((it) => o.pages.push(it.code()));\n    return o;\n  }\n}\n\nfunction notationInfo(notation: Notation, clazz: string) {\n  let config = notation.config;\n  let y = 0;\n  y += config.pageMarginVertical;\n  let title = (\n    <text\n      className={clazz + \"__info-title\"}\n      fontFamily={config.textFontFamily}\n      width={notation.dimens.width}\n      textAnchor={\"middle\"}\n      fontSize={config.infoTitleFontSize}\n      transform={\n        \"translate(\" +\n        (notation.dimens.marginLeft + notation.dimens.width / 2) +\n        \",\" +\n        y +\n        \")\"\n      }\n    >\n      {notation.title}\n    </text>\n  );\n  y += config.infoTitleFontSize + config.infoGap;\n  let subtitle = (\n    <text\n      className={clazz + \"__info-subtitle\"}\n      fontFamily={config.textFontFamily}\n      width={notation.dimens.width}\n      textAnchor={\"middle\"}\n      fontSize={config.infoSubtitleFontSize}\n      transform={\n        \"translate(\" +\n        (notation.dimens.marginLeft + notation.dimens.width / 2) +\n        \",\" +\n        y +\n        \")\"\n      }\n    >\n      {notation.subtitle}\n    </text>\n  );\n  let y1 = y;\n  let x = notation.author.length;\n  let author = (\n    <g className={clazz + \"__info-author\"}>\n      {notation.author.map((it, idx) => {\n        y1 += config.infoFontSize + config.infoGap;\n        if (idx < x - 2) {\n          y += config.infoFontSize + config.infoGap;\n        }\n        return (\n          <text\n            key={idx}\n            fontFamily={config.textFontFamily}\n            width={notation.dimens.width}\n            fontSize={config.infoFontSize}\n            textAnchor={\"end\"}\n            x={0}\n            transform={\n              \"translate(\" +\n              (notation.dimens.width - config.pageMarginHorizontal) +\n              \",\" +\n              y1 +\n              \")\"\n            }\n          >\n            {it}\n          </text>\n        );\n      })}\n    </g>\n  );\n  let y2 = y + (config.infoGap + config.infoSubtitleFontSize);\n  let y3 = y2 + (config.infoGap + config.infoFontSize);\n  let rythimic = (\n    <g className={clazz + \"__info-rythmic\"} width={notation.dimens.width}>\n      <text\n        fontFamily={config.textFontFamily}\n        width={notation.dimens.width}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y2 + \")\"}\n      >\n        {notation.speed}\n      </text>\n      <text\n        fontFamily={config.textFontFamily}\n        width={notation.dimens.width}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y3 + \")\"}\n      >\n        {notation.C + \" \" + notation.rhythmic}\n      </text>\n    </g>\n  );\n  return (\n    <g className={clazz + \"__info\"} width={notation.dimens.width}>\n      {title}\n      {subtitle}\n      {author}\n      {rythimic}\n    </g>\n  );\n}\n\nfunction MuseNotation(props: { notation: Notation; selector: Selector }) {\n  let margin = 10;\n  let d = props.notation.dimens;\n  let clazz = \"muse-notation\";\n  return (\n    <svg\n      className=\"muse\"\n      width={props.notation.dimens.width + margin * 2}\n      height={props.notation.dimens.height + margin * 2}\n    >\n      <g\n        className={clazz}\n        transform={\"translate(\" + margin + \",\" + margin + \")\"}\n        width={props.notation.dimens.width}\n        height={props.notation.dimens.height}\n      >\n        {border(d, clazz)}\n        {notationInfo(props.notation, clazz)}\n        {props.notation.pages.map((it, idx) => (\n          <MusePage\n            page={it}\n            key={idx}\n            cursor={[idx]}\n            selector={props.selector}\n          />\n        ))}\n      </g>\n    </svg>\n  );\n}\n\nexport default MuseNotation;\n","import { Note } from \"./MuseNote\";\nimport { Notation } from \"./MuseNotation\";\n\ninterface T {\n  isSelect: Boolean;\n  setSelect: (s: boolean) => void;\n  note: Note;\n  setNote: (n: Note) => void;\n}\n\ninterface NotationState {\n  notation: Notation;\n  setNotation: (n: Notation) => void;\n}\n\nclass Selector {\n  l: T[] = [];\n  n: NotationState | undefined = undefined;\n  constructor(g: NotationState) {\n    this.n = g;\n    // document.addEventListener(\"keydown\", (ev) => {\n    //   if (ev.key >= \"0\" && ev.key <= \"9\" && this.l.length === 1) {\n    //     console.log(this.l[0].note);\n    //     console.log(ev);\n    //     let o = new Note(this.l[0].note, this.l[0].note.config);\n    //     o.n = ev.key;\n    //     o.settle();\n    //     console.log(o);\n    //     this.l[0].setNote(o);\n    //   }\n    // });\n  }\n  select(g: T) {\n    this.clear();\n    this.l.push(g);\n    g.setSelect(true);\n  }\n  clear() {\n    this.l.forEach((it) => {\n      it.setSelect(false);\n    });\n    this.l.length = 0;\n  }\n}\n\nexport default Selector;\n","import React, { useState } from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNotation, { Notation } from \"./MuseNotation\";\nimport Selector from \"./Selector\";\n\nfunction init(data: string, config: MuseConfig): Notation {\n  let hm = config.pageMarginHorizontal;\n  let vm = config.pageMarginVertical;\n  let w = config.notationWidth - hm * 2;\n  let h = config.notationWidth * config.pageE - vm * 2;\n  let notation = new Notation(data, config);\n  let notationH = 0;\n  notation.pages.forEach((page, pageIdx) => {\n    page.dimens.x = hm;\n    page.dimens.y = vm * (pageIdx + 1) + (vm + h) * pageIdx;\n    page.dimens.width = w;\n    page.dimens.marginLeft = hm;\n    page.dimens.marginRight = hm;\n    page.dimens.height = h;\n    page.dimens.marginTop = vm;\n    page.dimens.marginBottom = vm;\n    if (pageIdx === 0) {\n      let x = 0;\n      x += config.infoTitleFontSize + config.infoGap;\n      x += config.infoSubtitleFontSize + config.infoGap;\n      x += notation.author.length * (config.infoFontSize + config.infoGap);\n      page.dimens.marginTop += x;\n      page.dimens.height -= x;\n      page.dimens.y += x;\n    }\n    page.index = pageIdx + 1;\n    notationH +=\n      page.dimens.marginTop + page.dimens.marginBottom + page.dimens.height;\n    let linesHeight: number[] = [];\n    let lineYSpace = page.dimens.height;\n    page.lines.forEach((line) => {\n      line.dimens.width = page.dimens.width;\n      line.dimens.x = page.dimens.marginLeft;\n      let lineHeight = 0;\n      let trackY = 0;\n      let barsW: number[] = [];\n      line.tracks.forEach((track) => {\n        track.bars.forEach((bar, barIdx) => {\n          if (barsW[barIdx] !== undefined) {\n            barsW[barIdx] =\n              barsW[barIdx] > bar.unitNum ? barsW[barIdx] : bar.unitNum;\n          } else {\n            barsW.push(bar.unitNum);\n          }\n        });\n      });\n      let barUnitSum = barsW.reduce((s, it) => s + it);\n      line.tracks.forEach((track) => {\n        let trackHeight = 0;\n        track.dimens.y = trackY;\n        track.dimens.width = line.dimens.width;\n        let maxNoteHeight = 0; //最大note.y\n        let maxNoteMarginBottom = 0;\n        let barX = 0;\n        track.bars.forEach((bar, barIdx) => {\n          bar.unitNum = barsW[barIdx];\n          bar.dimens.width = (barsW[barIdx] / barUnitSum) * track.dimens.width;\n          bar.dimens.x = barX;\n          barX += bar.dimens.width;\n          let notesWidth: number[] = [];\n          bar.notes.forEach((note) => {\n            note.settle();\n            let noteWidth = note.dimens.width;\n            let noteHeight = note.dimens.height;\n            let noteMarginBootom = note.dimens.marginBottom;\n            maxNoteHeight =\n              maxNoteHeight > noteHeight ? maxNoteHeight : noteHeight;\n            maxNoteMarginBottom =\n              maxNoteMarginBottom > noteMarginBootom\n                ? maxNoteMarginBottom\n                : noteMarginBootom;\n            notesWidth.push(noteWidth);\n          });\n          let x = 0;\n          bar.notes.forEach((note, idx) => {\n            x += (bar.notesX[idx] / (bar.unitNum + 1)) * bar.dimens.width;\n            note.dimens.x = x - config.noteWidth / 2 - note.dx;\n          });\n        });\n        track.dimens.height = maxNoteHeight + maxNoteMarginBottom;\n        track.bars.forEach((bar) => {\n          bar.dimens.height = track.dimens.height;\n          bar.notes.forEach((note) => {\n            note.dimens.height = maxNoteHeight;\n            note.dimens.marginBottom = maxNoteMarginBottom;\n          });\n        });\n        trackHeight = maxNoteHeight + maxNoteMarginBottom;\n        lineHeight += trackHeight + config.trackGap;\n        trackY += trackHeight + config.trackGap;\n      });\n      lineHeight -= config.trackGap;\n      line.dimens.height = lineHeight;\n      lineYSpace -= lineHeight;\n      linesHeight.push(lineHeight);\n    });\n    let lineYUnit = lineYSpace / (page.lines.length - 1);\n    page.lines.forEach((line, idx) => {\n      let py = page.dimens.marginTop;\n      for (let i = 0; i < idx; ++i) {\n        py += lineYUnit + linesHeight[i];\n      }\n      line.dimens.y = py;\n    });\n  });\n  notation.dimens.width = w + 2 * hm;\n  notation.dimens.height = notationH;\n  return notation;\n}\n\nfunction Muse(props: { data: string; config?: MuseConfig }) {\n  let [notation, setNotation] = useState(\n    init(props.data, props.config ? props.config : new MuseConfig())\n  );\n  return (\n    <MuseNotation\n      notation={notation}\n      selector={new Selector({ notation, setNotation })}\n      \n    />\n  );\n}\n\nexport default Muse;\n","import React from \"react\";\nimport \"./App.css\";\nimport Muse from \"./muse/Muse\";\n\nclass App extends React.Component<\n  {},\n  {\n    error: any | null;\n    isLoaded: boolean;\n    data: string;\n  }\n> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      data: \"\",\n    };\n  }\n\n  componentDidMount() {\n    let url = \"https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/\";\n    // let url = \"http://localhost:8888/\";\n    fetch(url + \"b.json\")\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoaded: true,\n            data: result,\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error: error,\n          });\n        }\n      );\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <h1>Example</h1>\n        {this.state.isLoaded ? (\n          this.state.error ? (\n            \"error\"\n          ) : (\n            <Muse data={this.state.data} />\n          )\n        ) : (\n          \"loading...\"\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}