{"version":3,"sources":["muse/MuseConfig.ts","muse/Border.tsx","muse/Fraction.ts","muse/Selector.ts","muse/MuseNote.tsx","muse/MuseBar.tsx","muse/MuseTrack.tsx","muse/MuseLine.tsx","muse/MusePage.tsx","muse/MuseNotation.tsx","muse/Muse.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["MuseConfig","noteHeight","noteWidth","noteFontSize","noteFontFamily","sigFontSize","trackGap","lineGap","pointGap","tailPointGap","pointRound","pageE","pageWidth","pageMarginHorizontal","pageMarginVertical","infoTitleFontSize","infoSubtitleFontSize","infoGap","infoFontSize","pageIndexFontSize","textFontFamily","showBorder","Border","w","h","x","y","clazz","show","color","className","transform","width","height","stroke","strokeWidth","fill","OuterBorder","Fraction","u","d","pos","search","this","parseInt","substr","a","b","t","n","gcd","f","r","simplify","Selector","subnote","note","bar","track","line","page","notation","document","addEventListener","ev","key","setSelect","removeSubNote","getThis","index","subNotes","length","returnValue","setNum","reducePoint","reduceLine","reduceTailPoint","addSubNote","removeNote","l","addNote","removeBar","addBar","removeTrack","addTrack","removeLine","addLine","reomvePage","addPage","s","selectNote","selectBar","selectTrack","selectLine","selectPage","selectNotation","instance","SubNote","config","isSelect","p","observable","Note","o","idx","decode","dxx","forEach","it","Math","pow","ny","i","push","py","mb","notesY","dx","notesMaxHeight","notesX","notesMaxMarginBottom","selectSubNote","filter","undefined","ns","ts","split","charCodeAt","charAt","tg","computed","MuseSubNote","observer","props","onClick","subNote","fontFamily","fontSize","S","F","DS","DF","N","React","Component","MuseNote","marginBottom","map","pointsY","pointGroup","tailPointsX","tailPoint","Bar","barsWidth","notes","barsX","time","notesTime","reduce","plus","init","space","notesWidthSum","unit","divide","notesTimeSum","toNumber","notesWidth","multiply","max","preHeight","preMarginBottom","e","code","BarLine","useObserver","x1","y1","x2","y2","BaseLine","baselineGroup","MuseBar","Track","bars","tracksY","timeSum","barsTime","barsNotesWidth","preNotesMaxHeight","preNotesMaxMarginBottom","MuseTrack","Line","tracks","linesY","LineHead","MuseLine","Page","marginTop","mt","g","info","author","lines","sum","linesHeight","gap","PageIndex","textAnchor","toString","MusePage","marginLeft","marginRight","NotationInfo","Notation","pages","title","subtitle","speed","rhythmic","C","MuseNotationInfo","y3","rythimic","MuseNotation","margin","Muse","JSON","parse","data","console","log","App","state","error","isLoaded","fetch","then","res","text","result","setState","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.bb498444.chunk.js","sourcesContent":["export default class MuseConfig {\n  noteHeight = 22;\n  noteWidth = 11;\n  noteFontSize = 22;\n  noteFontFamily = \"serif\";\n  sigFontSize = 14;\n\n  trackGap = 10;\n\n  lineGap = 40;\n\n  pointGap = 5;\n  tailPointGap = 8;\n  pointRound = 1.5;\n\n  pageE = 1.414;\n  pageWidth = 1000;\n  pageMarginHorizontal = 100;\n  pageMarginVertical = 110;\n\n  infoTitleFontSize = 34;\n  infoSubtitleFontSize = 22;\n  infoGap = 7;\n  infoFontSize = 20;\n\n  pageIndexFontSize = 20;\n\n  textFontFamily = \"serif\";\n\n  showBorder = false;\n}\n","import React from \"react\";\n\ninterface BorderProps {\n  w: number;\n  h: number;\n  x: number;\n  y: number;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const Border: React.FC<BorderProps> = ({\n  w,\n  h,\n  x,\n  y,\n  clazz,\n  show = false,\n  color = \"blue\",\n}: BorderProps) => {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__border\"}\n        transform={\"translate(\" + x + \",\" + y + \")\"}\n        width={w}\n        height={h}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n\ninterface OuterBorderProps {\n  w: number;\n  h: number;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const OuterBorder: React.FC<OuterBorderProps> = ({\n  w,\n  h,\n  clazz,\n  show = false,\n  color = \"gray\",\n}: OuterBorderProps) => {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__outer-border\"}\n        transform={\"translate(0,0)\"}\n        width={w}\n        height={h}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n","export default class Fraction {\n  u: number = 0;\n  d: number = 1;\n  parse(x: string): Fraction {\n    let pos = x.search(\"/\");\n    if (pos !== -1) {\n      this.u = parseInt(x.substr(0, pos));\n      this.d = parseInt(x.substr(pos + 1));\n    } else {\n      this.u = parseInt(x);\n    }\n    return this;\n  }\n  init(u: number, d: number): Fraction {\n    this.u = u;\n    this.d = d;\n    return this;\n  }\n  gcd(a: number, b: number): number {\n    while (b !== 0) {\n      let t = b;\n      b = a % b;\n      a = t;\n    }\n    return a;\n  }\n  simplify(): Fraction {\n    let n: number;\n    while ((n = this.gcd(this.u, this.d)) > 1 || n < -1) {\n      this.u /= n;\n      this.d /= n;\n    }\n    return this;\n  }\n  plus(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d + this.d * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  minus(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d - this.d * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  multiply(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  divide(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d;\n    r.d = this.d * f.u;\n    return r.simplify();\n  }\n  toNumber(): number {\n    return this.u / this.d;\n  }\n  toString(): string {\n    if (this.d === 1) {\n      return `${this.u}`\n    } else {\n      return `${this.u}/${this.d}`\n    }\n  }\n}\n","import { Bar } from \"./MuseBar\";\nimport { Line } from \"./MuseLine\";\nimport { Notation } from \"./MuseNotation\";\nimport { Note, SubNote } from \"./MuseNote\";\nimport { Page } from \"./MusePage\";\nimport { Track } from \"./MuseTrack\";\n\nexport interface SelectionSubNote {\n  setSelect: (i: boolean) => void;\n  getThis: () => SubNote;\n  setNum: (n: string) => void;\n  reducePoint: (h: number) => void;\n  reduceLine: (l: number) => void;\n  reduceTailPoint: (p: number) => void;\n}\n\nexport interface SelectionNote {\n  setSelect: (i: boolean) => void;\n  getThis: () => Note;\n  reduceLine: (l: number) => void;\n  reduceTailPoint: (p: number) => void;\n  addSubNote: () => void;\n  removeSubNote: (index: number) => void;\n}\n\nexport interface SelectionBar {\n  setSelect: (i: boolean) => void;\n  getThis: () => Bar;\n  addNote: () => void;\n  removeNote: (index: number) => void;\n}\n\nexport interface SelectionTrack {\n  setSelect: (s: boolean) => void;\n  getThis: () => Track;\n  addBar: () => void;\n  removeBar: (index: number) => void;\n}\n\nexport interface SelectionLine {\n  setSelect: (s: boolean) => void;\n  getThis: () => Line;\n  addTrack: () => void;\n  removeTrack: (index: number) => void;\n}\n\nexport interface SelectionPage {\n  setSelect: (s: boolean) => void;\n  getThis: () => Page;\n  addLine: () => void;\n  removeLine: (index: number) => void;\n}\n\nexport interface SelectionNotation {\n  setSelect: (s: boolean) => void;\n  getThis: () => Notation;\n  addPage: () => void;\n  reomvePage: (index: number) => void;\n}\n\nclass Selector {\n  subnote: SelectionSubNote | null = null;\n  note: SelectionNote | null = null;\n  bar: SelectionBar | null = null;\n  track: SelectionTrack | null = null;\n  line: SelectionLine | null = null;\n  page: SelectionPage | null = null;\n  notation: SelectionNotation | null = null;\n  static instance = new Selector();\n  private constructor() {\n    document.addEventListener(\"keydown\", (ev) => {\n      if (this.subnote !== null) {\n        if (ev.key === \"Enter\") {\n          this.subnote.setSelect(false);\n          this.subnote = null;\n          this.note?.setSelect(true);\n        } else if (ev.key === \"Backspace\") {\n          this.note?.removeSubNote(this.subnote.getThis().index);\n          this.note?.setSelect(true);\n          this.subnote.setSelect(false);\n          this.subnote = null;\n        } else if (ev.key === \"ArrowUp\") {\n          if (this.note) {\n            let l = this.note.getThis().subNotes.length;\n            if (l > this.subnote.getThis().index + 1) {\n              this.subnote.setSelect(false);\n              this.subnote = this.note.getThis().subNotes[\n                this.subnote.getThis().index + 1\n              ];\n              this.subnote.setSelect(true);\n            }\n          }\n          ev.returnValue = false;\n        } else if (ev.key === \"ArrowDown\") {\n          if (this.note) {\n            if (this.subnote.getThis().index > 0) {\n              this.subnote.setSelect(false);\n              this.subnote = this.note.getThis().subNotes[\n                this.subnote.getThis().index - 1\n              ];\n              this.subnote.setSelect(true);\n            }\n          }\n          ev.returnValue = false;\n        } else if ((ev.key >= \"0\" && ev.key <= \"9\") || ev.key === \"-\") {\n          this.subnote.setNum(ev.key);\n        } else if (ev.key === \"r\") {\n          this.subnote.reducePoint(1);\n        } else if (ev.key === \"f\") {\n          this.subnote.reducePoint(-1);\n        } else if (ev.key === \"q\") {\n          this.subnote.reduceLine(-1);\n        } else if (ev.key === \"a\") {\n          this.subnote.reduceLine(1);\n        } else if (ev.key === \"s\") {\n          this.subnote.reduceTailPoint(-1);\n        } else if (ev.key === \"d\") {\n          this.subnote.reduceTailPoint(1);\n        }\n      } else if (this.note !== null) {\n        if (ev.key === \"Enter\") {\n          this.note.setSelect(false);\n          this.note = null;\n          this.bar?.setSelect(true);\n        } else if (ev.key === \" \") {\n          this.note.addSubNote();\n          ev.returnValue = false;\n        } else if (ev.key === \"Backspace\") {\n          this.bar?.removeNote(this.note.getThis().index);\n          this.bar?.setSelect(true);\n          this.note.setSelect(false);\n          this.note = null;\n        } else if (ev.key === \"ArrowUp\") {\n          this.subnote = this.note.getThis().subNotes[0];\n          this.subnote.setSelect(true);\n          this.note.setSelect(false);\n          ev.returnValue = false;\n        } else if (ev.key === \"ArrowDown\") {\n          let l = this.note.getThis().subNotes.length;\n          this.subnote = this.note.getThis().subNotes[l - 1];\n          this.subnote.setSelect(true);\n          this.note.setSelect(false);\n          ev.returnValue = false;\n        } else if (ev.key === \"q\") {\n          this.note.reduceLine(-1);\n        } else if (ev.key === \"a\") {\n          this.note.reduceLine(1);\n        } else if (ev.key === \"s\") {\n          this.note.reduceTailPoint(-1);\n        } else if (ev.key === \"d\") {\n          this.note.reduceTailPoint(1);\n        }\n      } else if (this.bar !== null) {\n        if (ev.key === \"Enter\") {\n          this.bar.setSelect(false);\n          this.bar = null;\n          this.track?.setSelect(true);\n        } else if (ev.key === \" \") {\n          this.bar.addNote();\n          ev.returnValue = false;\n        } else if (ev.key === \"Backspace\") {\n          this.track?.removeBar(this.bar.getThis().index);\n          this.track?.setSelect(true);\n          this.bar.setSelect(false);\n          this.bar = null;\n          ev.returnValue = false;\n        }\n      } else if (this.track !== null) {\n        if (ev.key === \"Enter\") {\n          this.track.setSelect(false);\n          this.track = null;\n          this.line?.setSelect(true);\n        } else if (ev.key === \" \") {\n          this.track.addBar();\n          ev.returnValue = false;\n        } else if (ev.key === \"Backspace\") {\n          this.line?.removeTrack(this.track.getThis().index);\n          this.line?.setSelect(true);\n          this.track.setSelect(false);\n          this.track = null;\n          ev.returnValue = false;\n        }\n      } else if (this.line !== null) {\n        if (ev.key === \"Enter\") {\n          this.line.setSelect(false);\n          this.line = null;\n          this.page?.setSelect(true);\n        } else if (ev.key === \" \") {\n          this.line.addTrack();\n          ev.returnValue = false;\n        } else if (ev.key === \"Backspace\") {\n          this.page?.removeLine(this.line.getThis().index);\n          this.page?.setSelect(true);\n          this.line.setSelect(false);\n          this.line = null;\n          ev.returnValue = false;\n        }\n      } else if (this.page !== null) {\n        if (ev.key === \"Enter\") {\n          this.page.setSelect(false);\n          this.page = null;\n          this.notation?.setSelect(true);\n        } else if (ev.key === \" \") {\n          this.page.addLine();\n          ev.returnValue = false;\n        } else if (ev.key === \"Backspace\") {\n          this.notation?.reomvePage(this.page.getThis().index);\n          this.notation?.setSelect(true);\n          this.page.setSelect(false);\n          this.page = null;\n          ev.returnValue = false;\n        }\n      } else if (this.notation !== null) {\n        if (ev.key === \" \") {\n          this.notation.addPage();\n          ev.returnValue = false;\n        }\n      }\n    });\n  }\n  selectSubNote(s: SelectionSubNote) {\n    this.subnote?.setSelect(false);\n    this.subnote = s;\n    this.subnote.setSelect(true);\n    this.selectNote(s.getThis().note);\n  }\n  selectNote(s: SelectionNote) {\n    this.note?.setSelect(false);\n    this.note = s;\n    if (this.subnote === null) this.note.setSelect(true);\n    this.selectBar(s.getThis().bar);\n  }\n  selectBar(s: SelectionBar) {\n    this.bar?.setSelect(false);\n    this.bar = s;\n    if (this.note === null) this.bar.setSelect(true);\n    this.selectTrack(s.getThis().track);\n  }\n  selectTrack(s: SelectionTrack) {\n    this.track?.setSelect(false);\n    this.track = s;\n    if (this.bar === null) this.track.setSelect(true);\n    this.selectLine(s.getThis().line);\n  }\n  selectLine(s: SelectionLine) {\n    this.line?.setSelect(false);\n    this.line = s;\n    if (this.track === null) this.line.setSelect(true);\n    this.selectPage(s.getThis().page);\n  }\n  selectPage(s: SelectionPage) {\n    this.page?.setSelect(false);\n    this.page = s;\n    if (this.line === null) this.page.setSelect(true);\n    this.selectNotation(s.getThis().notation);\n  }\n  selectNotation(s: SelectionNotation) {\n    this.notation?.setSelect(false);\n    this.notation = s;\n    if (this.page === null) this.notation.setSelect(true);\n  }\n}\n\nexport default Selector;\n","import React from \"react\";\nimport { Border, OuterBorder } from \"./Border\";\nimport MuseConfig from \"./MuseConfig\";\nimport Codec from \"./Codec\";\nimport Fraction from \"./Fraction\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport Selector, { SelectionNote, SelectionSubNote } from \"./Selector\";\nimport { Bar } from \"./MuseBar\";\n\nexport interface INote {\n  n: string;\n}\n\nexport class SubNote implements SelectionSubNote {\n  @observable isSelect = false;\n  readonly note: Note;\n  readonly index: number;\n  config: MuseConfig;\n  @observable x: string = \"\";\n  @observable n: string = \"\";\n  @observable t: number = 0;\n  constructor(\n    x: string,\n    n: string,\n    t: number,\n    note: Note,\n    index: number,\n    config: MuseConfig\n  ) {\n    this.x = x;\n    this.n = n;\n    this.t = t;\n    this.note = note;\n    this.index = index;\n    this.config = config;\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  setNum(n: string) {\n    this.n = n;\n  }\n  reducePoint(h: number) {\n    this.t += h;\n  }\n  reduceLine(l: number) {\n    this.note.l += l;\n    if (this.note.l < 0) {\n      this.note.l = 0;\n    }\n  }\n  reduceTailPoint(p: number) {\n    this.note.p += p;\n    if (this.note.p < 0) {\n      this.note.p = 0;\n    }\n  }\n  getThis() {\n    return this;\n  }\n}\n\nexport class Note implements Codec, SelectionNote {\n  readonly config: MuseConfig;\n  @observable index: number;\n  @observable bar: Bar;\n  @observable subNotes: SubNote[] = [];\n  @observable l: number = 0;\n  @observable p: number = 0;\n  @observable d: number = 0;\n  @computed get dx(): number {\n    let dxx = false;\n    this.subNotes.forEach((it) => {\n      if (it.x !== \"\") {\n        dxx = true;\n      }\n    });\n    return dxx ? this.config.sigFontSize / 2 : 0;\n  }\n  @computed get time(): Fraction {\n    let r = new Fraction();\n    r.u = 1;\n    r.d *= Math.pow(2, this.l);\n    r.d *= this.d;\n    r.d *= Math.pow(2, this.p); //3/2 7/4 15/8\n    r.u *= Math.pow(2, this.p + 1) - 1;\n    return r.simplify();\n  }\n  @computed get notesY(): number[] {\n    let r: number[] = [];\n    let ny = 0;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            ny += x;\n          }\n        }\n      }\n      r.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          ny += x;\n        }\n      }\n    });\n    return r;\n  }\n  @computed get pointsY(): number[] {\n    let r: number[] = [];\n    let py = 0;\n    let ny = 0;\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x / 2;\n            r.push(-mb);\n            mb += x / 2;\n          }\n        }\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            py += x / 2;\n            r.push(py);\n            py += x / 2;\n            ny += x;\n          }\n        }\n      }\n      this.notesY.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      py += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          py += x / 2;\n          r.push(py);\n          py += x / 2;\n          ny += x;\n        }\n      }\n    });\n    return r;\n  }\n  @computed get tailPointsX(): number[] {\n    let r: number[] = [];\n    for (let i = 0; i < this.p; ++i) {\n      r.push(\n        this.dx + this.config.noteWidth + (i + 1 / 2) * this.config.tailPointGap\n      );\n    }\n    return r;\n  }\n  @computed get width(): number {\n    return this.dx + this.config.noteWidth + this.p * this.config.tailPointGap;\n  }\n  @computed get preHeight(): number {\n    let h = 0;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            h += x;\n          }\n        }\n      }\n      h += this.config.noteHeight;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          h += x;\n        }\n      }\n    });\n    return h;\n  }\n  @computed get height(): number {\n    return this.bar.notesMaxHeight;\n  }\n  @computed get x(): number {\n    return this.bar.notesX[this.index];\n  }\n  @computed get preMarginBottom(): number {\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x;\n          }\n        }\n      }\n    });\n    return mb;\n  }\n  @computed get marginBottom(): number {\n    return this.bar.notesMaxMarginBottom;\n  }\n  @observable isSelect: boolean = false;\n  constructor(o: INote, bar: Bar, idx: number) {\n    this.config = bar.config;\n    this.bar = bar;\n    this.index = idx;\n    this.decode(o);\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  reduceLine(l: number) {\n    this.l += l;\n    if (this.l < 0) {\n      this.l = 0;\n    }\n  }\n  reduceTailPoint(p: number) {\n    this.p += p;\n    if (this.p < 0) {\n      this.p = 0;\n    }\n  }\n  addSubNote() {\n    this.subNotes.push(\n      new SubNote(\"\", \"0\", 0, this, this.subNotes.length, this.config)\n    );\n    Selector.instance.selectSubNote(this.subNotes[this.subNotes.length - 1]);\n  }\n  removeSubNote(index: number) {\n    this.subNotes = this.subNotes.filter((it, idx) => idx !== index);\n  }\n  getThis() {\n    return this;\n  }\n\n  decode(o: INote): void {\n    if (o.n !== undefined) {\n      let n: string = o.n;\n      let pos = n.search(\"@\");\n      let ns = \"\";\n      let ts = \"\";\n      if (pos === -1) {\n        ns = n;\n        ts = \"0|0\";\n      } else {\n        ns = n.substr(0, pos);\n        ts = n.substr(pos + 1);\n      }\n      let ng = ns.split(\"|\");\n      ng.forEach((it, idx) => {\n        for (let i = 0; i < it.length; ++i) {\n          if (\n            (it.charCodeAt(i) <= 57 && it.charCodeAt(i) >= 48) ||\n            it.charCodeAt(i) === 45\n          ) {\n            let x = it.substr(0, i);\n            let n = it.charAt(i);\n            let t = it.substr(i + 1).length;\n            if (t !== 0 && it.charAt(i + 1) === \"-\") {\n              t = -t;\n            }\n            this.subNotes.push(new SubNote(x, n, t, this, idx, this.config));\n            break;\n          }\n        }\n      });\n      let tg = ts.split(\"|\");\n      if (tg.length === 3) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = parseInt(tg[2]);\n      } else if (tg.length === 2) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = 1;\n      } else if (tg.length === 1) {\n        this.l = parseInt(tg[0]);\n        this.p = 0;\n        this.d = 1;\n      } else {\n        this.l = 0;\n        this.p = 0;\n        this.d = 1;\n      }\n    }\n  }\n  code(): INote {\n    let ns: string = \"\";\n    this.subNotes.forEach((it, idx) => {\n      let t = \"\";\n      if (it.t > 0) {\n        for (let i = 0; i < it.t; ++i) {\n          t += \"+\";\n        }\n      } else {\n        for (let i = 0; i < -it.t; ++i) {\n          t += \"-\";\n        }\n      }\n      if (idx + 1 >= this.subNotes.length) {\n        ns += `${it.x}${it.n}${t}`;\n      } else {\n        ns += `${it.x}${it.n}${t}|`;\n      }\n    });\n    let n = `${ns}@${this.l}|${this.p}`;\n    return { n };\n  }\n}\n\nfunction castX(x: string) {\n  let m: Record<string, string> = {\n    S: \"#\",\n    F: \"b\",\n    DS: \"x\",\n    DF: \"d\",\n    N: \"n\",\n  };\n  return m[x] || \"\";\n}\n\nfunction pointGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-point\"}>\n      {note.pointsY.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            (note.dx + note.config.noteWidth / 2) +\n            \",\" +\n            (note.height - it + note.config.pointGap / 2) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction tailPoint(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__tail-point\"}>\n      {note.tailPointsX.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            it +\n            \",\" +\n            (note.height - note.config.noteHeight / 3) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\ninterface MuseSubNoteProps {\n  dx: number;\n  y: number;\n  w: number;\n  h: number;\n  subNote: SubNote;\n}\n\n@observer\nclass MuseSubNote extends React.Component<MuseSubNoteProps, {}> {\n  render() {\n    return (\n      <g\n        className={\"muse-note__subnote\"}\n        transform={\"translate(\" + 0 + \",\" + this.props.y + \")\"}\n        width={this.props.w}\n        height={this.props.h}\n        onClick={() => {\n          Selector.instance.selectSubNote(this.props.subNote);\n        }}\n      >\n        <text\n          fontFamily={this.props.subNote.config.noteFontFamily}\n          fontSize={this.props.subNote.config.noteFontSize}\n          transform={\"translate(\" + this.props.dx + \",\" + 0 + \")\"}\n        >\n          {this.props.subNote.n}\n        </text>\n        <text\n          fontFamily={this.props.subNote.config.noteFontFamily}\n          fontSize={this.props.subNote.config.sigFontSize}\n          transform={\n            \"translate(\" +\n            0 +\n            \",\" +\n            (this.props.subNote.config.sigFontSize -\n              this.props.subNote.config.noteHeight) +\n            \")\"\n          }\n        >\n          {castX(this.props.subNote.x)}\n        </text>\n        <Border\n          x={0}\n          y={-this.props.h}\n          w={this.props.w}\n          h={this.props.subNote.config.noteFontSize}\n          clazz={\"muse-note__subnote\"}\n          show={this.props.subNote.isSelect}\n        />\n      </g>\n    );\n  }\n}\n\n@observer\nclass MuseNote extends React.Component<{ note: Note }, {}> {\n  render() {\n    let clazz = \"muse-note\";\n    return (\n      <g\n        className={clazz}\n        transform={\"translate(\" + this.props.note.x + \",\" + 0 + \")\"}\n        width={this.props.note.width}\n        height={this.props.note.height}\n        onClick={() => {\n          Selector.instance.selectNote(this.props.note);\n        }}\n      >\n        <OuterBorder\n          w={this.props.note.width}\n          h={this.props.note.height + this.props.note.marginBottom}\n          clazz={clazz}\n          show={this.props.note.isSelect}\n          color={\"blue\"}\n        />\n        {this.props.note.subNotes.map((it, idx) => (\n          <MuseSubNote\n            key={idx}\n            dx={this.props.note.dx}\n            y={this.props.note.height - this.props.note.notesY[idx]}\n            w={this.props.note.width}\n            h={22}\n            subNote={it}\n          />\n        ))}\n        {pointGroup(this.props.note, clazz)}\n        {tailPoint(this.props.note, clazz)}\n      </g>\n    );\n  }\n}\n\nexport default MuseNote;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNote, { INote, Note } from \"./MuseNote\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer, useObserver } from \"mobx-react\";\nimport Fraction from \"./Fraction\";\nimport { Track } from \"./MuseTrack\";\nimport Selector, { SelectionBar } from \"./Selector\";\n\ninterface Baseline {\n  y: number;\n  s: number;\n  e: number;\n}\n\nexport interface IBar {\n  notes: INote[];\n}\n\nexport class Bar implements Codec, SelectionBar {\n  readonly config: MuseConfig;\n  readonly index: number;\n  @observable track: Track;\n  @observable notes: Note[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width(): number {\n    return this.track.barsWidth[this.index];\n  }\n  @computed get height(): number {\n    let h = 0;\n    this.notes.forEach((it) => {\n      let u = it.height + it.marginBottom;\n      h = u > h ? u : h;\n    });\n    return h;\n  }\n  @computed get x(): number {\n    return this.track.barsX[this.index];\n  }\n  @computed get y(): number {\n    return 0;\n  }\n  @computed get notesTime(): Fraction[] {\n    return this.notes.map((it) => it.time);\n  }\n  @computed get notesTimeSum(): Fraction {\n    return this.notesTime\n      .reduce((a, b) => a.plus(b), new Fraction())\n      .plus(new Fraction().init(1, 1));\n  }\n  @computed get notesWidth(): number[] {\n    return this.notes.map((it) => it.width);\n  }\n  @computed get notesX(): number[] {\n    let space = this.width - this.notesWidthSum;\n    let unit = new Fraction().init(space, 1).divide(this.notesTimeSum);\n    let x = unit.toNumber();\n    return this.notesWidth.map((it, idx) => {\n      let r = x;\n      x += it + this.notesTime[idx].multiply(unit).toNumber();\n      return r;\n    });\n  }\n  @computed get preNotesMaxHeight(): number {\n    return Math.max(...this.notes.map((it) => it.preHeight));\n  }\n  @computed get notesMaxHeight(): number {\n    return this.track.notesMaxHeight;\n  }\n  @computed get preNotesMaxMarginBottom(): number {\n    return Math.max(...this.notes.map((it) => it.preMarginBottom));\n  }\n  @computed get notesMaxMarginBottom(): number {\n    return this.track.notesMaxMarginBottom;\n  }\n  @computed get baselineGroup(): Baseline[] {\n    let r: {\n      y: number;\n      s: number;\n      e: number;\n    }[] = [];\n    for (let i = 0; ; ++i) {\n      let x = 0;\n      let s = 0;\n      let e = -1;\n      this.notes.forEach((it, idx) => {\n        if (it.l > i) {\n          e = idx;\n          x++;\n        } else {\n          if (s <= e) r.push({ y: i, s: s, e: e });\n          s = idx + 1;\n          e = idx;\n        }\n      });\n      if (s <= e) r.push({ y: i, s: s, e: e });\n      if (x === 0) {\n        break;\n      }\n    }\n    return r;\n  }\n  @computed get notesWidthSum(): number {\n    let w = 0;\n    this.notes.forEach((it) => (w += it.width));\n    return w;\n  }\n  constructor(o: IBar, index: number, track: Track, config: MuseConfig) {\n    this.index = index;\n    this.track = track;\n    this.config = config;\n    this.decode(o);\n  }\n  addNote() {\n    this.notes.push(new Note({ n: \"0\" }, this, this.notes.length));\n    Selector.instance.selectNote(this.notes[this.notes.length - 1]);\n  }\n  removeNote(index: number) {\n    this.notes = this.notes.filter((it, idx) => idx !== index);\n  }\n  setSelect(i: boolean) {\n    this.isSelect = i;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: IBar): void {\n    if (o.notes !== undefined) {\n      o.notes.forEach((it: INote, idx) => {\n        this.notes.push(new Note(it, this, idx));\n      });\n    }\n  }\n  code(): IBar {\n    let notes: INote[] = this.notes.map((it) => it.code());\n    return { notes };\n  }\n}\n\nconst BarLine: React.FC<{ w: number; h: number; clazz: string }> = (props: {\n  w: number;\n  h: number;\n  clazz: string;\n}) => {\n  let [width, height] = useObserver(() => {\n    return [props.w, props.h];\n  });\n  return (\n    <line\n      className={props.clazz + \"__bar-line\"}\n      x1={width}\n      y1={0}\n      x2={width}\n      y2={height}\n      strokeWidth={1}\n      stroke=\"black\"\n    />\n  );\n};\n\nconst BaseLine: React.FC<{ bar: Bar; clazz: string }> = ({\n  bar,\n  clazz,\n}: {\n  bar: Bar;\n  clazz: string;\n}) => {\n  let [baselineGroup, notes] = useObserver(() => {\n    return [bar.baselineGroup, bar.notes];\n  });\n  return (\n    <g className={clazz + \"__base-line\"}>\n      {baselineGroup.map((it, idx) => (\n        <line\n          key={idx}\n          x1={notes[it.s].x}\n          y1={notes[it.s].height + (it.y + 1) * bar.config.pointGap}\n          x2={notes[it.e].x + bar.notes[it.e].width}\n          y2={notes[it.s].height + (it.y + 1) * bar.config.pointGap}\n          stroke={\"black\"}\n          strokeWidth={1}\n        />\n      ))}\n    </g>\n  );\n};\n\n@observer\nclass MuseBar extends React.Component<{ bar: Bar }, {}> {\n  render() {\n    let notes = this.props.bar.notes;\n    let clazz = \"muse-bar\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.bar.x + \",\" + this.props.bar.y + \")\"\n        }\n        width={this.props.bar.width}\n        height={this.props.bar.height}\n      >\n        <Border\n          w={this.props.bar.width}\n          h={this.props.bar.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.bar.isSelect}\n        />\n        <BarLine\n          w={this.props.bar.width}\n          h={this.props.bar.height}\n          clazz={clazz}\n        />\n        {notes.map((it, idx) => (\n          <MuseNote key={idx} note={it} />\n        ))}\n        <BaseLine bar={this.props.bar} clazz={clazz} />\n      </g>\n    );\n  }\n}\n\nexport default MuseBar;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseBar, { Bar, IBar } from \"./MuseBar\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { Line } from \"./MuseLine\";\nimport Fraction from \"./Fraction\";\nimport { observer } from \"mobx-react\";\nimport Selector, { SelectionTrack } from \"./Selector\";\n\nexport interface ITrack {\n  bars: IBar[];\n}\n\nexport class Track implements Codec, SelectionTrack {\n  readonly config: MuseConfig;\n  readonly index: number;\n  readonly line: Line;\n  @observable bars: Bar[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width(): number {\n    return this.line.width;\n  }\n  @computed get height(): number {\n    let h = 0;\n    this.bars.forEach((it) => {\n      h = it.height > h ? it.height : h;\n    });\n    return h;\n  }\n  @computed get x(): number {\n    return 0;\n  }\n  @computed get y(): number {\n    return this.line.tracksY[this.index];\n  }\n  @computed get barsTime(): Fraction[] {\n    return this.bars.map((it) => it.notesTimeSum);\n  }\n  @computed get barsWidth(): number[] {\n    let timeSum = this.barsTime.reduce((a, b) => a.plus(b), new Fraction());\n    let space = this.width - this.notesWidthSum;\n    let unit = new Fraction().init(space, 1).divide(timeSum);\n    return this.barsNotesWidth.map((it, idx) => {\n      return it + this.barsTime[idx].multiply(unit).toNumber();\n    });\n  }\n  @computed get barsX(): number[] {\n    let x = 0;\n    return this.barsWidth.map((it) => {\n      let r = x;\n      x += it;\n      return r;\n    });\n  }\n  @computed get notesMaxHeight(): number {\n    return Math.max(...this.bars.map((it) => it.preNotesMaxHeight));\n  }\n  @computed get notesMaxMarginBottom(): number {\n    return Math.max(...this.bars.map((it) => it.preNotesMaxMarginBottom));\n  }\n  @computed get notesWidthSum(): number {\n    return this.barsNotesWidth.reduce((a, b) => a + b, 0);\n  }\n  @computed get barsNotesWidth(): number[] {\n    return this.bars.map((it) => it.notesWidthSum);\n  }\n  constructor(o: ITrack, index: number, line: Line, config: MuseConfig) {\n    this.index = index;\n    this.line = line;\n    this.config = config;\n    this.decode(o);\n  }\n  addBar() {\n    this.bars.push(new Bar({ notes: [{n:\"0\"}] }, this.bars.length, this, this.config));\n    Selector.instance.selectBar(this.bars[this.bars.length - 1]);\n  }\n  removeBar(index: number) {\n    this.bars = this.bars.filter((it, idx) => idx !== index);\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: ITrack): void {\n    if (o.bars !== undefined) {\n      o.bars.forEach((it: any, idx) => {\n        this.bars.push(new Bar(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): ITrack {\n    let bars: IBar[] = this.bars.map((it) => it.code());\n    return { bars };\n  }\n}\n\n@observer\nclass MuseTrack extends React.Component<{ track: Track }> {\n  render() {\n    let clazz = \"muse-track\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.track.x + \",\" + this.props.track.y + \")\"\n        }\n        width={this.props.track.width}\n        height={this.props.track.height}\n      >\n        <Border\n          w={this.props.track.width}\n          h={this.props.track.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.track.isSelect}\n        />\n        {this.props.track.bars.map((it, idx) => (\n          <MuseBar key={idx} bar={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MuseTrack;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseTrack, { ITrack, Track } from \"./MuseTrack\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { Page } from \"./MusePage\";\nimport Selector, { SelectionLine } from \"./Selector\";\n\nexport interface ILine {\n  tracks: ITrack[];\n}\n\nexport class Line implements Codec, SelectionLine {\n  readonly page: Page;\n  readonly index: number;\n  readonly config: MuseConfig;\n  @observable tracks: Track[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width() {\n    return this.page.width;\n  }\n  @computed get height() {\n    let h = 0;\n    this.tracks.forEach((it) => {\n      h += it.height + this.config.trackGap;\n    });\n    h -= this.config.trackGap;\n    return h;\n  }\n  @computed get x() {\n    return this.page.x;\n  }\n  @computed get y() {\n    return this.page.linesY[this.index];\n  }\n  @computed get tracksY(): number[] {\n    let y = 0;\n    return this.tracks.map((it) => {\n      let r = y;\n      y += it.height + this.config.trackGap;\n      return r;\n    });\n  }\n  constructor(o: ILine, index: number, page: Page, config: MuseConfig) {\n    this.page = page;\n    this.index = index;\n    this.config = config;\n    this.decode(o);\n  }\n  addTrack() {\n    this.tracks.push(\n      new Track(\n        { bars: [{ notes: [{ n: \"0\" }] }] },\n        this.tracks.length,\n        this,\n        this.config\n      )\n    );\n    Selector.instance.selectTrack(this.tracks[this.tracks.length - 1]);\n  }\n  removeTrack(index: number) {\n    this.tracks = this.tracks.filter((it, idx) => idx !== index);\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: ILine): void {\n    if (o.tracks !== undefined) {\n      o.tracks.forEach((it: ITrack, idx) => {\n        this.tracks.push(new Track(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): ILine {\n    let tracks: ITrack[] = this.tracks.map((it) => it.code());\n    return { tracks };\n  }\n}\n\nconst LineHead: React.FC<{ height: number; clazz: string }> = ({\n  height,\n  clazz,\n}: {\n  height: number;\n  clazz: string;\n}) => {\n  return (\n    <g className={clazz + \"__line-head\"}>\n      <line x1={0} y1={0} x2={0} y2={height} strokeWidth={1} stroke=\"black\" />\n    </g>\n  );\n};\n\n@observer\nclass MuseLine extends React.Component<{ line: Line }> {\n  render() {\n    let clazz = \"muse-line\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.line.x + \",\" + this.props.line.y + \")\"\n        }\n        width={this.props.line.width}\n        height={this.props.line.height}\n      >\n        <Border\n          w={this.props.line.width}\n          h={this.props.line.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.line.isSelect}\n        />\n        <LineHead height={this.props.line.height} clazz={clazz} />\n        {this.props.line.tracks.map((it, idx) => (\n          <MuseTrack key={idx} track={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MuseLine;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseLine, { ILine, Line } from \"./MuseLine\";\nimport { Border, OuterBorder } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { Notation } from \"./MuseNotation\";\nimport { observer } from \"mobx-react\";\nimport Selector, { SelectionPage } from \"./Selector\";\n\nexport interface IPage {\n  lines: ILine[];\n}\n\nexport class Page implements Codec, SelectionPage {\n  readonly notation: Notation;\n  readonly config: MuseConfig;\n  readonly index: number;\n  @observable lines: Line[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width() {\n    return this.config.pageWidth - this.config.pageMarginHorizontal * 2;\n  }\n  @computed get height() {\n    return (\n      this.config.pageWidth * this.config.pageE -\n      this.config.pageMarginVertical -\n      this.marginTop\n    );\n  }\n  @computed get x() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get y() {\n    return (\n      this.marginTop + this.index * (this.config.pageWidth * this.config.pageE)\n    );\n  }\n  @computed get marginTop() {\n    let mt = 0;\n    if (this.index === 0) {\n      mt += this.config.pageMarginVertical;\n      let g = this.config.infoGap;\n      mt += this.config.infoTitleFontSize + g;\n      mt += this.config.infoSubtitleFontSize + g;\n      if (this.notation.info.author.length > 2) {\n        mt += this.notation.info.author.length * (this.config.infoFontSize + g);\n      } else {\n        mt += 2 * (this.config.infoFontSize + g);\n      }\n    } else {\n      mt = this.config.pageMarginVertical;\n    }\n    return mt;\n  }\n  @computed get marginBottom() {\n    return this.config.pageMarginVertical;\n  }\n  @computed get marginLeft() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get marginRight() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get linesHeight(): number[] {\n    return this.lines.map((it) => it.height);\n  }\n  @computed get linesY() {\n    let y = this.marginTop;\n    let sum = this.linesHeight.reduce((a, b) => a + b, 0);\n    let gap = (this.height - sum) / (this.lines.length - 1);\n    return this.linesHeight.map((it) => {\n      let r = y;\n      y += it + gap;\n      return r;\n    });\n  }\n  constructor(o: IPage, index: number, notation: Notation, config: MuseConfig) {\n    this.index = index;\n    this.notation = notation;\n    this.config = config;\n    this.decode(o);\n  }\n  addLine() {\n    this.lines.push(\n      new Line(\n        { tracks: [{ bars: [{ notes: [{ n: \"0\" }] }] }] },\n        this.lines.length,\n        this,\n        this.config\n      )\n    );\n    Selector.instance.selectLine(this.lines[this.lines.length - 1]);\n  }\n  removeLine(index: number) {\n    this.lines = this.lines.filter((it, idx) => idx !== index);\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: IPage): void {\n    if (o.lines !== undefined) {\n      o.lines.forEach((it: ILine, idx) => {\n        this.lines.push(new Line(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): IPage {\n    let lines: ILine[] = this.lines.map((it) => it.code());\n    return { lines };\n  }\n}\n\ninterface PageIndexProps {\n  index: number;\n  x: number;\n  y: number;\n  clazz: string;\n  config: MuseConfig;\n}\n\nconst PageIndex: React.FC<PageIndexProps> = ({\n  index,\n  x,\n  y,\n  clazz,\n  config,\n}: PageIndexProps) => {\n  return (\n    <g\n      className={clazz + \"__page-index\"}\n      transform={\"translate(\" + x + \",\" + y + \")\"}\n    >\n      <text\n        textAnchor={\"middle\"}\n        fontFamily={config.textFontFamily}\n        fontSize={config.pageIndexFontSize}\n      >\n        {(index + 1).toString()}\n      </text>\n    </g>\n  );\n};\n\n@observer\nclass MusePage extends React.Component<{ page: Page }> {\n  render() {\n    let clazz = \"muse-page\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" +\n          (this.props.page.x - this.props.page.marginLeft) +\n          \",\" +\n          (this.props.page.y - this.props.page.marginTop) +\n          \")\"\n        }\n        width={\n          this.props.page.width +\n          this.props.page.marginLeft +\n          this.props.page.marginRight\n        }\n        height={\n          this.props.page.height +\n          this.props.page.marginTop +\n          this.props.page.marginBottom\n        }\n      >\n        <Border\n          w={this.props.page.width}\n          h={this.props.page.height}\n          x={this.props.page.x}\n          y={this.props.page.marginTop}\n          clazz={clazz}\n          show={this.props.page.isSelect}\n        />\n        <OuterBorder\n          w={\n            this.props.page.width +\n            this.props.page.marginLeft +\n            this.props.page.marginLeft\n          }\n          h={\n            this.props.page.height +\n            this.props.page.marginTop +\n            this.props.page.marginBottom\n          }\n          clazz={clazz}\n          show={true}\n        />\n        <PageIndex\n          index={this.props.page.index}\n          x={this.props.page.marginLeft + this.props.page.width / 2}\n          y={\n            this.props.page.marginTop +\n            this.props.page.height +\n            this.props.page.marginBottom / 2\n          }\n          clazz={clazz}\n          config={this.props.page.config}\n        />\n        {this.props.page.lines.map((it, idx) => (\n          <MuseLine key={idx} line={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MusePage;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MusePage, { IPage, Page } from \"./MusePage\";\nimport { Border, OuterBorder } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport Selector, { SelectionNotation } from \"./Selector\";\n\nexport class NotationInfo {\n  @observable title: string = \"\";\n  @observable subtitle: string = \"\";\n  @observable author: string[] = [];\n  @observable speed: string = \"\";\n  @observable rhythmic: string = \"\";\n  @observable C: string = \"\";\n}\n\nexport interface INotation {\n  title: string;\n  subtitle: string;\n  author: string;\n  rhythmic: string;\n  speed: string;\n  C: string;\n  pages: IPage[];\n}\n\nexport class Notation implements Codec, SelectionNotation {\n  readonly config: MuseConfig;\n  @observable pages: Page[] = [];\n  @observable isSelect = false;\n  @observable info: NotationInfo = new NotationInfo();\n  @computed get height() {\n    let h = 0;\n    this.pages.forEach(\n      (it) => (h += it.height + it.marginTop + it.marginBottom)\n    );\n    return h;\n  }\n  @computed get width() {\n    return this.config.pageWidth;\n  }\n  constructor(o: INotation, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  addPage() {\n    this.pages.push(\n      new Page(\n        { lines: [{ tracks: [{ bars: [{ notes: [{ n: \"0\" }] }] }] }] },\n        this.pages.length,\n        this,\n        this.config\n      )\n    );\n    Selector.instance.selectPage(this.pages[this.pages.length - 1]);\n  }\n  reomvePage(index: number) {\n    this.pages = this.pages.filter((it, idx) => idx !== index);\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: INotation): void {\n    if (o.pages !== undefined) {\n      o.pages.forEach((it: IPage, idx) => {\n        this.pages.push(new Page(it, idx, this, this.config));\n      });\n    }\n    if (o.title !== undefined) {\n      this.info.title = o.title;\n    }\n    if (o.subtitle !== undefined) {\n      this.info.subtitle = o.subtitle;\n    }\n    if (o.author !== undefined) {\n      this.info.author = o.author.toString().split(\"|\");\n    }\n    if (o.speed !== undefined) {\n      this.info.speed = o.speed;\n    }\n    if (o.rhythmic) {\n      this.info.rhythmic = o.rhythmic;\n    }\n    if (o.C) {\n      this.info.C = o.C;\n    }\n  }\n  code(): INotation {\n    let pages: IPage[] = this.pages.map((it) => it.code());\n    let author: string = \"\";\n    this.info.author.forEach((it, idx) => {\n      if (idx === this.info.author.length - 1) {\n        author += it;\n      } else {\n        author += it + \"|\";\n      }\n    });\n    return {\n      title: this.info.title,\n      subtitle: this.info.subtitle,\n      author: author,\n      rhythmic: this.info.rhythmic,\n      speed: this.info.speed,\n      C: this.info.C,\n      pages,\n    };\n  }\n}\n\ninterface MuseNotationInfoProps {\n  info: NotationInfo;\n  config: MuseConfig;\n  clazz: string;\n}\n\nconst MuseNotationInfo: React.FC<MuseNotationInfoProps> = ({\n  info,\n  config,\n  clazz,\n}: MuseNotationInfoProps) => {\n  let y = 0;\n  y += config.pageMarginVertical;\n  let title = (\n    <text\n      className={clazz + \"__info-title\"}\n      fontFamily={config.textFontFamily}\n      width={config.pageWidth}\n      textAnchor={\"middle\"}\n      fontSize={config.infoTitleFontSize}\n      transform={\"translate(\" + config.pageWidth / 2 + \",\" + y + \")\"}\n    >\n      {info.title}\n    </text>\n  );\n  y += config.infoTitleFontSize + config.infoGap;\n  let subtitle = (\n    <text\n      className={clazz + \"__info-subtitle\"}\n      fontFamily={config.textFontFamily}\n      width={config.pageWidth}\n      textAnchor={\"middle\"}\n      fontSize={config.infoSubtitleFontSize}\n      transform={\"translate(\" + config.pageWidth / 2 + \",\" + y + \")\"}\n    >\n      {info.subtitle}\n    </text>\n  );\n  let y1 = y;\n  let x = info.author.length;\n  let author = (\n    <g className={clazz + \"__info-author\"}>\n      {info.author.map((it, idx) => {\n        y1 += config.infoFontSize + config.infoGap;\n        if (idx < x - 2) {\n          y += config.infoFontSize + config.infoGap;\n        }\n        return (\n          <text\n            key={idx}\n            fontFamily={config.textFontFamily}\n            width={config.pageWidth}\n            fontSize={config.infoFontSize}\n            textAnchor={\"end\"}\n            x={0}\n            transform={\n              \"translate(\" +\n              (config.pageWidth - config.pageMarginHorizontal) +\n              \",\" +\n              y1 +\n              \")\"\n            }\n          >\n            {it}\n          </text>\n        );\n      })}\n    </g>\n  );\n  let y2 = y + (config.infoGap + config.infoSubtitleFontSize);\n  let y3 = y2 + (config.infoGap + config.infoFontSize);\n  let rythimic = (\n    <g className={clazz + \"__info-rythmic\"} width={config.pageWidth}>\n      <text\n        fontFamily={config.textFontFamily}\n        width={config.pageWidth}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y2 + \")\"}\n      >\n        {info.speed}\n      </text>\n      <text\n        fontFamily={config.textFontFamily}\n        width={config.pageWidth}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y3 + \")\"}\n      >\n        {`1=${info.C} ${info.rhythmic}`}\n      </text>\n    </g>\n  );\n  return (\n    <g className={clazz + \"__info\"} width={config.pageWidth}>\n      {title}\n      {subtitle}\n      {author}\n      {rythimic}\n    </g>\n  );\n};\n\n@observer\nclass MuseNotation extends React.Component<{ notation: Notation }, {}> {\n  render() {\n    let margin = 10;\n    let clazz = \"muse-notation\";\n    return (\n      <svg\n        className=\"muse\"\n        width={this.props.notation.width + margin * 2}\n        height={this.props.notation.height + margin * 2}\n      >\n        <g\n          className={clazz}\n          transform={\"translate(\" + margin + \",\" + margin + \")\"}\n          width={this.props.notation.width}\n          height={this.props.notation.height}\n        >\n          <MuseNotationInfo\n            info={this.props.notation.info}\n            config={this.props.notation.config}\n            clazz={clazz}\n          />\n          <Border\n            w={this.props.notation.width}\n            h={this.props.notation.height}\n            x={0}\n            y={0}\n            clazz={clazz}\n            show={this.props.notation.isSelect}\n          />\n          <OuterBorder\n            w={this.props.notation.width}\n            h={this.props.notation.height}\n            clazz={clazz}\n          />\n          {this.props.notation.pages.map((it, idx) => (\n            <MusePage key={idx} page={it} />\n          ))}\n        </g>\n      </svg>\n    );\n  }\n}\n\nexport default MuseNotation;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNotation, { INotation, Notation } from \"./MuseNotation\";\n\nfunction Muse(props: { data: string; config?: MuseConfig }) {\n  let n: INotation = JSON.parse(props.data);\n  let notation = new Notation(\n    n,\n    props.config ? props.config : new MuseConfig()\n  );\n  return (\n    <div>\n      <MuseNotation notation={notation} />\n      <button\n        onClick={() => {\n          console.log(notation.code());\n        }}\n      >\n        log\n      </button>\n    </div>\n  );\n}\n\nexport default Muse;\n","import React from \"react\";\nimport \"./App.css\";\nimport Muse from \"./muse/Muse\";\n\nclass App extends React.Component<\n  {},\n  {\n    error: any | null;\n    isLoaded: boolean;\n    data: string;\n  }\n> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      data: \"\",\n    };\n  }\n\n  componentDidMount() {\n    let url = \"https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/b.json\";\n    // let url = \"http://localhost:8888/b.json\";\n    fetch(url)\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoaded: true,\n            data: result,\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error: error,\n          });\n        }\n      );\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <h1>Example</h1>\n        {this.state.isLoaded ? (\n          this.state.error ? (\n            \"error\"\n          ) : (\n            <Muse data={this.state.data} />\n          )\n        ) : (\n          \"loading...\"\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}