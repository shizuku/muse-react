(this["webpackJsonpmuse-react"]=this["webpackJsonpmuse-react"]||[]).push([[0],{21:function(t,e,i){t.exports=i(29)},26:function(t,e,i){},27:function(t,e,i){},29:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),r=i(18),o=i.n(r),a=(i(26),i(5)),h=i(4),c=i(7),l=i(6),p=(i(27),function t(){Object(a.a)(this,t),this.noteHeight=22,this.noteWidth=11,this.noteFontSize=22,this.noteFontFamily="serif",this.sigFontSize=14,this.trackGap=10,this.lineGap=40,this.pointGap=5,this.tailPointGap=8,this.pointRound=1.5,this.pageE=1.414,this.pageWidth=1e3,this.pageMarginHorizontal=100,this.pageMarginVertical=110,this.infoTitleFontSize=34,this.infoSubtitleFontSize=22,this.infoGap=7,this.infoFontSize=20,this.pageIndexFontSize=20,this.textFontFamily="serif",this.showBorder=!1}),u=i(3),g=i(2),f=(i(9),i(10)),b=i(15),d=function(t){var e=t.w,i=t.h,n=t.x,r=t.y,o=t.clazz,a=t.show,h=void 0!==a&&a,c=t.color,l=void 0===c?"blue":c;return h?s.a.createElement("rect",{className:o+"__border",transform:"translate("+n+","+r+")",width:e,height:i,stroke:l,strokeWidth:"0.4",fill:"none"}):s.a.createElement(s.a.Fragment,null)},y=function(t){var e=t.w,i=t.h,n=t.clazz,r=t.show,o=void 0!==r&&r,a=t.color,h=void 0===a?"gray":a;return o?s.a.createElement("rect",{className:n+"__outer-border",transform:"translate(0,0)",width:e,height:i,stroke:h,strokeWidth:"0.4",fill:"none"}):s.a.createElement(s.a.Fragment,null)},k=function(){function t(){Object(a.a)(this,t),this.u=0,this.d=1}return Object(h.a)(t,[{key:"parse",value:function(t){var e=t.search("/");return-1!==e?(this.u=parseInt(t.substr(0,e)),this.d=parseInt(t.substr(e+1))):this.u=parseInt(t),this}},{key:"init",value:function(t,e){return this.u=t,this.d=e,this}},{key:"gcd",value:function(t,e){for(;0!==e;){var i=e;e=t%e,t=i}return t}},{key:"simplify",value:function(){for(var t;(t=this.gcd(this.u,this.d))>1||t<-1;)this.u/=t,this.d/=t;return this}},{key:"plus",value:function(e){var i=new t;return i.u=this.u*e.d+this.d*e.u,i.d=this.d*e.d,i.simplify()}},{key:"minus",value:function(e){var i=new t;return i.u=this.u*e.d-this.d*e.u,i.d=this.d*e.d,i.simplify()}},{key:"multiply",value:function(e){var i=new t;return i.u=this.u*e.u,i.d=this.d*e.d,i.simplify()}},{key:"divide",value:function(e){var i=new t;return i.u=this.u*e.d,i.d=this.d*e.u,i.simplify()}},{key:"toNumber",value:function(){return this.u/this.d}},{key:"toString",value:function(){return 1===this.d?"".concat(this.u):"".concat(this.u,"/").concat(this.d)}}]),t}(),m=i(1),O=i(8),v=function(){function t(){var e=this;Object(a.a)(this,t),this.subnote=null,this.note=null,this.bar=null,this.track=null,this.line=null,this.page=null,this.notation=null,document.addEventListener("keydown",(function(t){(e.keySubNote(t)||e.keyNote(t)||e.keyBar(t)||e.keyTrack(t)||e.keyLine(t)||e.keyPage(t)||e.keyNotation(t))&&(t.returnValue=!1)}))}return Object(h.a)(t,[{key:"selectSubNote",value:function(t){var e;null===(e=this.subnote)||void 0===e||e.setSelect(!1),this.subnote=t,this.subnote.setSelect(!0),this.selectNote(t.getThis().note)}},{key:"selectNote",value:function(t){var e;null===(e=this.note)||void 0===e||e.setSelect(!1),this.note=t,null===this.subnote&&this.note.setSelect(!0),this.selectBar(t.getThis().bar)}},{key:"selectBar",value:function(t){var e;null===(e=this.bar)||void 0===e||e.setSelect(!1),this.bar=t,null===this.note&&this.bar.setSelect(!0),this.selectTrack(t.getThis().track)}},{key:"selectTrack",value:function(t){var e;null===(e=this.track)||void 0===e||e.setSelect(!1),this.track=t,null===this.bar&&this.track.setSelect(!0),this.selectLine(t.getThis().line)}},{key:"selectLine",value:function(t){var e;null===(e=this.line)||void 0===e||e.setSelect(!1),this.line=t,null===this.track&&this.line.setSelect(!0),this.selectPage(t.getThis().page)}},{key:"selectPage",value:function(t){var e;null===(e=this.page)||void 0===e||e.setSelect(!1),this.page=t,null===this.line&&this.page.setSelect(!0),this.selectNotation(t.getThis().notation)}},{key:"selectNotation",value:function(t){var e;null===(e=this.notation)||void 0===e||e.setSelect(!1),this.notation=t,null===this.page&&this.notation.setSelect(!0)}},{key:"keySubNote",value:function(t){var e;if(null===this.subnote)return!1;switch(t.key){case"Escape":return this.subnote.setSelect(!1),this.subnote=null,null===(e=this.note)||void 0===e||e.setSelect(!0),!0;case"Backspace":if(this.note){var i=this.subnote.getThis().index;this.note.removeSubNote(this.subnote.getThis().index),0===this.note.getThis().subNotes.length?(this.note.setSelect(!0),this.subnote.setSelect(!1),this.subnote=null):0===i?(this.subnote=this.note.getThis().subNotes[0],this.subnote.setSelect(!0)):(this.subnote=this.note.getThis().subNotes[i-1],this.subnote.setSelect(!0))}return!0;case" ":return!0;case"z":var n,s;if(this.note)null===(n=this.note)||void 0===n||n.addSubNote(0),this.selectSubNote(null===(s=this.note)||void 0===s?void 0:s.getThis().subNotes[0]);return!0;case"x":if(this.note){var r,o,a=this.subnote.getThis().index;null===(r=this.note)||void 0===r||r.addSubNote(a+1),this.selectSubNote(null===(o=this.note)||void 0===o?void 0:o.getThis().subNotes[a+1])}return!0;case"c":var h,c;if(this.note)null===(h=this.note)||void 0===h||h.addSubNote(this.note.getThis().subNotes.length),this.selectSubNote(null===(c=this.note)||void 0===c?void 0:c.getThis().subNotes[this.note.getThis().subNotes.length-1]);return!0;case"ArrowUp":if(this.note)this.note.getThis().subNotes.length>this.subnote.getThis().index+1&&(this.subnote.setSelect(!1),this.subnote=this.note.getThis().subNotes[this.subnote.getThis().index+1],this.subnote.setSelect(!0));return!0;case"ArrowDown":return this.note&&this.subnote.getThis().index>0&&(this.subnote.setSelect(!1),this.subnote=this.note.getThis().subNotes[this.subnote.getThis().index-1],this.subnote.setSelect(!0)),!0;case"ArrowLeft":case"ArrowRight":return!0;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":return this.subnote.setNum(t.key),!0;case"r":return this.subnote.reducePoint(1),!0;case"f":return this.subnote.reducePoint(-1),!0;case"q":return this.subnote.reduceLine(-1),!0;case"a":return this.subnote.reduceLine(1),!0;case"s":return this.subnote.reduceTailPoint(-1),!0;case"d":return this.subnote.reduceTailPoint(1),!0;default:return!1}}},{key:"keyNote",value:function(t){var e;if(!this.note)return!1;switch(t.key){case"Enter":return this.note.getThis().subNotes.length<=0&&this.note.addSubNote(this.note.getThis().subNotes.length),this.subnote=this.note.getThis().subNotes[0],this.subnote.setSelect(!0),this.note.setSelect(!1),!0;case"Escape":return this.note.setSelect(!1),this.note=null,null===(e=this.bar)||void 0===e||e.setSelect(!0),!0;case" ":return this.note.addSubNote(this.note.getThis().subNotes.length),!0;case"z":var i,n;if(this.bar)null===(i=this.bar)||void 0===i||i.addNote(0),this.selectNote(null===(n=this.bar)||void 0===n?void 0:n.getThis().notes[0]);return!0;case"x":if(this.bar){var s,r,o=this.note.getThis().index;null===(s=this.bar)||void 0===s||s.addNote(o+1),this.selectNote(null===(r=this.bar)||void 0===r?void 0:r.getThis().notes[o+1])}return!0;case"c":var a,h;if(this.bar)null===(a=this.bar)||void 0===a||a.addNote(this.bar.getThis().notes.length),this.selectNote(null===(h=this.bar)||void 0===h?void 0:h.getThis().notes[this.bar.getThis().notes.length-1]);return!0;case"Backspace":if(this.bar){var c=this.note.getThis().index;this.bar.removeNote(this.note.getThis().index),0===this.bar.getThis().notes.length?(this.bar.setSelect(!0),this.note.setSelect(!1),this.note=null):0===c?(this.note=this.bar.getThis().notes[0],this.note.setSelect(!0)):(this.note=this.bar.getThis().notes[c-1],this.note.setSelect(!0))}return!0;case"ArrowLeft":return!!this.bar&&(this.note.getThis().index>0?(this.note.setSelect(!1),this.note=this.bar.getThis().notes[this.note.getThis().index-1],this.note.setSelect(!0),!0):!!this.track&&(this.bar.getThis().index>0&&(this.bar.setSelect(!1),this.bar=this.track.getThis().bars[this.bar.getThis().index-1],this.note.setSelect(!1),this.note=this.bar.getThis().notes[this.bar.getThis().notes.length-1],this.note.setSelect(!0),!0)));case"ArrowRight":if(null!==this.bar){var l,p=this.bar.getThis().notes.length;return this.note.getThis().index<p-1?(this.note.setSelect(!1),this.note=this.bar.getThis().notes[this.note.getThis().index+1],this.note.setSelect(!0),!0):!!this.track&&(this.bar.getThis().index<(null===(l=this.track)||void 0===l?void 0:l.getThis().bars.length)-1&&(this.bar.setSelect(!1),this.bar=this.track.getThis().bars[this.bar.getThis().index+1],this.note.setSelect(!1),this.note=this.bar.getThis().notes[0],this.note.setSelect(!0),!0))}return!1;case"ArrowUp":case"ArrowDown":return!0;case"q":return this.note.reduceLine(-1),!0;case"a":return this.note.reduceLine(1),!0;case"s":return this.note.reduceTailPoint(-1),!0;case"d":return this.note.reduceTailPoint(1),!0;default:return!1}}},{key:"keyBar",value:function(t){var e;if(null===this.bar)return!1;switch(t.key){case"Enter":return this.bar.getThis().notes.length<=0&&this.bar.addNote(this.bar.getThis().notes.length),this.note=this.bar.getThis().notes[0],this.note.setSelect(!0),this.bar.setSelect(!1),!0;case"Escape":return this.bar.setSelect(!1),this.bar=null,null===(e=this.track)||void 0===e||e.setSelect(!0),!0;case" ":return this.bar.addNote(this.bar.getThis().notes.length),!0;case"z":return this.track&&(this.track.addBar(0),this.selectBar(this.track.getThis().bars[0])),!0;case"x":if(this.track){var i=this.bar.getThis().index;this.track.addBar(i+1),this.selectBar(this.track.getThis().bars[i+1])}return!0;case"c":return this.track&&(this.track.addBar(this.track.getThis().bars.length),this.selectBar(this.track.getThis().bars[this.track.getThis().bars.length-1])),!0;case"Backspace":if(this.track){var n=this.bar.getThis().index;this.track.removeBar(this.bar.getThis().index),0===this.track.getThis().bars.length?(this.track.setSelect(!0),this.bar.setSelect(!1),this.bar=null):0===n?(this.bar=this.track.getThis().bars[0],this.bar.setSelect(!0)):(this.bar=this.track.getThis().bars[n-1],this.bar.setSelect(!0))}return!0;case"ArrowLeft":return!!this.track&&(!(this.bar.getThis().index>0)||(this.bar.setSelect(!1),this.bar=this.track.getThis().bars[this.bar.getThis().index-1],this.bar.setSelect(!0),!0));case"ArrowRight":if(null!==this.track){var s=this.track.getThis().bars.length;return!(this.bar.getThis().index<s-1)||(this.bar.setSelect(!1),this.bar=this.track.getThis().bars[this.bar.getThis().index+1],this.bar.setSelect(!0),!0)}return!1;case"ArrowUp":return!(!this.track||!this.line)&&(!(this.track.getThis().index>0)||(this.track=this.line.getThis().tracks[this.track.getThis().index-1],this.bar.setSelect(!1),this.bar=this.track.getThis().bars[this.bar.getThis().index],this.bar.setSelect(!0),!0));case"ArrowDown":if(this.track&&this.line){var r=this.line.getThis().tracks.length;return!(this.track.getThis().index<r-1)||(this.track=this.line.getThis().tracks[this.track.getThis().index+1],this.bar.setSelect(!1),this.bar=this.track.getThis().bars[this.bar.getThis().index],this.bar.setSelect(!0),!0)}return!1;default:return!1}}},{key:"keyTrack",value:function(t){var e;if(null===this.track)return!1;switch(t.key){case"Enter":return this.track.getThis().bars.length<=0&&this.track.addBar(this.track.getThis().bars.length),this.bar=this.track.getThis().bars[0],this.bar.setSelect(!0),this.track.setSelect(!1),!0;case"Escape":return this.track.setSelect(!1),this.track=null,null===(e=this.line)||void 0===e||e.setSelect(!0),!0;case" ":return this.track.addBar(this.track.getThis().bars.length),t.returnValue=!1,!0;case"z":return this.line&&(this.line.addTrack(0),this.selectTrack(this.line.getThis().tracks[0])),!0;case"x":if(this.line){var i=this.track.getThis().index;this.line.addTrack(i+1),this.selectTrack(this.line.getThis().tracks[i+1])}return!0;case"c":return this.line&&(this.line.addTrack(this.line.getThis().tracks.length),this.selectTrack(this.line.getThis().tracks[this.line.getThis().tracks.length-1])),!0;case"Backspace":if(this.line){var n=this.track.getThis().index;this.line.removeTrack(this.track.getThis().index),0===this.line.getThis().tracks.length?(this.line.setSelect(!0),this.track.setSelect(!1),this.track=null):0===n?(this.track=this.line.getThis().tracks[0],this.track.setSelect(!0)):(this.track=this.line.getThis().tracks[n-1],this.track.setSelect(!0))}return!0;case"ArrowUp":return!!this.line&&(this.track.getThis().index>0?(this.track.setSelect(!1),this.track=this.line.getThis().tracks[this.track.getThis().index-1],this.track.setSelect(!0),!0):!!this.page&&(this.line.getThis().index>0?(this.line.setSelect(!1),this.line=this.page.getThis().lines[this.line.getThis().index-1],this.track.setSelect(!1),this.track=this.line.getThis().tracks[this.line.getThis().tracks.length-1],this.track.setSelect(!0),!0):!!this.notation&&(this.page.getThis().index>0&&(this.page=this.notation.getThis().pages[this.page.getThis().index-1],this.line=this.page.getThis().lines[this.page.getThis().lines.length-1],this.track.setSelect(!1),this.track=this.line.getThis().tracks[this.line.getThis().tracks.length-1],this.track.setSelect(!0),!0))));case"ArrowDown":if(null!==this.line){var s=this.line.getThis().tracks.length;return this.track.getThis().index<s-1?(this.track.setSelect(!1),this.track=this.line.getThis().tracks[this.track.getThis().index+1],this.track.setSelect(!0),!0):!!this.page&&(this.line.getThis().index<this.page.getThis().lines.length-1?(this.line.setSelect(!1),this.line=this.page.getThis().lines[this.line.getThis().index+1],this.track.setSelect(!1),this.track=this.line.getThis().tracks[0],this.track.setSelect(!0),!0):!!this.notation&&(this.page.getThis().index<this.notation.getThis().pages.length-1&&(this.page=this.notation.getThis().pages[this.page.getThis().index+1],this.line=this.page.getThis().lines[0],this.track.setSelect(!1),this.track=this.line.getThis().tracks[0],this.track.setSelect(!0),!0)))}return!1;default:return!1}}},{key:"keyLine",value:function(t){var e;if(null===this.line)return!1;switch(t.key){case"Enter":return this.line.getThis().tracks.length<=0&&this.line.getThis().addTrack(this.line.getThis().tracks.length),this.track=this.line.getThis().tracks[0],this.track.setSelect(!0),this.line.setSelect(!1),!0;case"Escape":return this.line.setSelect(!1),this.line=null,null===(e=this.page)||void 0===e||e.setSelect(!0),!0;case" ":return this.line.addTrack(this.line.getThis().tracks.length),!0;case"z":return this.page&&(this.page.addLine(0),this.selectLine(this.page.getThis().lines[0])),!0;case"x":if(this.page){var i=this.line.getThis().index;this.page.addLine(i+1),this.selectLine(this.page.getThis().lines[i+1])}return!0;case"c":return this.page&&(this.page.addLine(this.page.getThis().lines.length),this.selectLine(this.page.getThis().lines[this.page.getThis().lines.length-1])),!0;case"Backspace":if(this.page){var n=this.line.getThis().index;this.page.removeLine(this.line.getThis().index),0===this.page.getThis().lines.length?(this.page.setSelect(!0),this.line.setSelect(!1),this.line=null):0===n?(this.line=this.page.getThis().lines[0],this.line.setSelect(!0)):(this.line=this.page.getThis().lines[n-1],this.line.setSelect(!0))}return!0;case"ArrowUp":return!!this.page&&(this.line.getThis().index>0?(this.line.setSelect(!1),this.line=this.page.getThis().lines[this.line.getThis().index-1],this.line.setSelect(!0),!0):!!this.notation&&(this.page.getThis().index>0&&(this.page=this.notation.getThis().pages[this.page.getThis().index-1],this.line.setSelect(!1),this.line=this.page.getThis().lines[this.page.getThis().lines.length-1],this.line.setSelect(!0),!0)));case"ArrowDown":if(null!==this.page){var s=this.page.getThis().lines.length;return this.line.getThis().index<s-1?(this.line.setSelect(!1),this.line=this.page.getThis().lines[this.line.getThis().index+1],this.line.setSelect(!0),!0):!!this.notation&&(this.page.getThis().index<this.notation.getThis().pages.length-1&&(this.page=this.notation.getThis().pages[this.page.getThis().index+1],this.line.setSelect(!1),this.line=this.page.getThis().lines[0],this.line.setSelect(!0),!0))}return!1;default:return!1}}},{key:"keyPage",value:function(t){var e;if(null===this.page)return!1;switch(t.key){case"Enter":return this.page.getThis().lines.length<=0&&this.page.getThis().addLine(this.page.getThis().lines.length),this.line=this.page.getThis().lines[0],this.line.setSelect(!0),this.page.setSelect(!1),!0;case"Escape":return this.page.setSelect(!1),this.page=null,null===(e=this.notation)||void 0===e||e.setSelect(!0),!0;case" ":return this.page.addLine(this.page.getThis().lines.length),!0;case"z":return this.notation&&(this.notation.addPage(0),this.selectPage(this.notation.getThis().pages[0])),!0;case"x":if(this.notation){var i=this.page.getThis().index;this.notation.addPage(i+1),this.selectPage(this.notation.getThis().pages[i+1])}return!0;case"c":return this.notation&&(this.notation.addPage(this.notation.getThis().pages.length),this.selectPage(this.notation.getThis().pages[this.notation.getThis().pages.length-1])),!0;case"Backspace":if(this.notation){var n,s=this.page.getThis().index;null===(n=this.notation)||void 0===n||n.reomvePage(this.page.getThis().index),0===this.notation.getThis().pages.length?(this.notation.setSelect(!0),this.page.setSelect(!1),this.page=null):0===s?(this.page=this.notation.getThis().pages[0],this.page.setSelect(!0)):(this.page=this.notation.getThis().pages[s-1],this.page.setSelect(!0))}return!0;case"ArrowUp":return!!this.notation&&(!(this.page.getThis().index>0)||(this.page.setSelect(!1),this.page=this.notation.getThis().pages[this.page.getThis().index-1],this.page.setSelect(!0),!0));case"ArrowDown":if(null!==this.notation){var r=this.notation.getThis().pages.length;return!(this.page.getThis().index<r-1)||(this.page.setSelect(!1),this.page=this.notation.getThis().pages[this.page.getThis().index+1],this.page.setSelect(!0),!0)}return!1;default:return!1}}},{key:"keyNotation",value:function(t){if(null===this.notation)return!1;switch(t.key){case"Enter":return this.notation.getThis().pages.length<=0&&this.notation.getThis().addPage(this.notation.getThis().pages.length),this.page=this.notation.getThis().pages[0],this.page.setSelect(!0),this.notation.setSelect(!1),!0;case" ":return this.notation.addPage(this.notation.getThis().pages.length),t.returnValue=!1,!0;default:return!1}}}]),t}();v.instance=new v;var j,T,w,S,x,z,N,E,P,M,D,F,B,W,L,H,G,_=v,A=(j=function(){function t(e,i,n,s,r,o){Object(a.a)(this,t),this.config=void 0,Object(u.a)(this,"isSelect",T,this),Object(u.a)(this,"note",w,this),Object(u.a)(this,"index",S,this),Object(u.a)(this,"x",x,this),Object(u.a)(this,"n",z,this),Object(u.a)(this,"t",N,this),this.x=e,this.n=i,this.t=n,this.note=s,this.index=r,this.config=o}return Object(h.a)(t,[{key:"setSelect",value:function(t){this.isSelect=t}},{key:"setNum",value:function(t){this.n=t}},{key:"reducePoint",value:function(t){this.t+=t}},{key:"reduceLine",value:function(t){this.note.l+=t,this.note.l<0&&(this.note.l=0)}},{key:"reduceTailPoint",value:function(t){this.note.p+=t,this.note.p<0&&(this.note.p=0)}},{key:"getThis",value:function(){return this}}]),t}(),T=Object(g.a)(j.prototype,"isSelect",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(g.a)(j.prototype,"note",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=Object(g.a)(j.prototype,"index",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(g.a)(j.prototype,"x",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=Object(g.a)(j.prototype,"n",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=Object(g.a)(j.prototype,"t",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j),C=(E=function(){function t(e,i,n){Object(a.a)(this,t),this.config=void 0,Object(u.a)(this,"index",P,this),Object(u.a)(this,"bar",M,this),Object(u.a)(this,"subNotes",D,this),Object(u.a)(this,"l",F,this),Object(u.a)(this,"p",B,this),Object(u.a)(this,"d",W,this),Object(u.a)(this,"isSelect",L,this),this.config=i.config,this.bar=i,this.index=n,this.decode(e)}return Object(h.a)(t,[{key:"dx",get:function(){var t=!1;return this.subNotes.forEach((function(e){""!==e.x&&(t=!0)})),t?this.config.sigFontSize/2:0}},{key:"time",get:function(){var t=new k;return t.u=1,t.d*=Math.pow(2,this.l),t.d*=this.d,t.d*=Math.pow(2,this.p),t.u*=Math.pow(2,this.p+1)-1,t.simplify()}},{key:"notesY",get:function(){var t=this,e=[],i=0;return this.subNotes.forEach((function(n,s){if(n.t<0&&0!==s)for(var r=-n.t;r>0;--r){var o=t.config.pointGap;i+=o}e.push(i);var a=t.config.noteHeight;if(i+=a,n.t>0)for(var h=n.t;h>0;--h){var c=t.config.pointGap;i+=c}})),e}},{key:"pointsY",get:function(){var t=this,e=[],i=0,n=0,s=0;return s+=this.l*this.config.pointGap,this.subNotes.forEach((function(r,o){if(r.t<0){if(0===o)for(var a=-r.t;a>0;--a){var h=t.config.pointGap;s+=h/2,e.push(-s),s+=h/2}if(0!==o)for(var c=-r.t;c>0;--c){var l=t.config.pointGap;i+=l/2,e.push(i),i+=l/2,n+=l}}t.notesY.push(n);var p=t.config.noteHeight;if(n+=p,i+=p,r.t>0)for(var u=r.t;u>0;--u){var g=t.config.pointGap;i+=g/2,e.push(i),i+=g/2,n+=g}})),e}},{key:"tailPointsX",get:function(){for(var t=[],e=0;e<this.p;++e)t.push(this.dx+this.config.noteWidth+(e+.5)*this.config.tailPointGap);return t}},{key:"width",get:function(){return this.dx+this.config.noteWidth+this.p*this.config.tailPointGap}},{key:"preHeight",get:function(){var t=this,e=0;return this.subNotes.forEach((function(i,n){if(i.t<0&&0!==n)for(var s=-i.t;s>0;--s){var r=t.config.pointGap;e+=r}if(e+=t.config.noteHeight,i.t>0)for(var o=i.t;o>0;--o){var a=t.config.pointGap;e+=a}})),e}},{key:"height",get:function(){return this.bar.notesMaxHeight}},{key:"x",get:function(){return this.bar.notesX[this.index]}},{key:"preMarginBottom",get:function(){var t=this,e=0;return e+=this.l*this.config.pointGap,this.subNotes.forEach((function(i,n){if(i.t<0&&0===n)for(var s=-i.t;s>0;--s){var r=t.config.pointGap;e+=r}})),e}},{key:"marginBottom",get:function(){return this.bar.notesMaxMarginBottom}}]),Object(h.a)(t,[{key:"setSelect",value:function(t){this.isSelect=t}},{key:"reduceLine",value:function(t){this.l+=t,this.l<0&&(this.l=0)}},{key:"reduceTailPoint",value:function(t){this.p+=t,this.p<0&&(this.p=0)}},{key:"addSubNote",value:function(t){this.subNotes=this.subNotes.splice(t,0,new A("","0",0,this,this.subNotes.length,this.config)),this.subNotes.forEach((function(t,e){return t.index=e}))}},{key:"removeSubNote",value:function(t){this.subNotes=this.subNotes.filter((function(e,i){return i!==t})),this.subNotes.forEach((function(t,e){return t.index=e}))}},{key:"getThis",value:function(){return this}},{key:"decode",value:function(t){var e=this;if(void 0!==t.n){var i=t.n,n=i.search("@"),s="",r="";-1===n?(s=i,r="0|0"):(s=i.substr(0,n),r=i.substr(n+1)),s.split("|").forEach((function(t,i){for(var n=0;n<t.length;++n)if(t.charCodeAt(n)<=57&&t.charCodeAt(n)>=48||45===t.charCodeAt(n)){var s=t.substr(0,n),r=t.charAt(n),o=t.substr(n+1).length;0!==o&&"-"===t.charAt(n+1)&&(o=-o),e.subNotes.push(new A(s,r,o,e,i,e.config));break}}));var o=r.split("|");3===o.length?(this.l=parseInt(o[0]),this.p=parseInt(o[1]),this.d=parseInt(o[2])):2===o.length?(this.l=parseInt(o[0]),this.p=parseInt(o[1]),this.d=1):1===o.length?(this.l=parseInt(o[0]),this.p=0,this.d=1):(this.l=0,this.p=0,this.d=1)}}},{key:"code",value:function(){var t=this,e="";return this.subNotes.forEach((function(i,n){var s="";if(i.t>0)for(var r=0;r<i.t;++r)s+="+";else for(var o=0;o<-i.t;++o)s+="-";n+1>=t.subNotes.length?e+="".concat(i.x).concat(i.n).concat(s):e+="".concat(i.x).concat(i.n).concat(s,"|")})),{n:"".concat(e,"@").concat(this.l,"|").concat(this.p)}}}]),t}(),P=Object(g.a)(E.prototype,"index",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=Object(g.a)(E.prototype,"bar",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=Object(g.a)(E.prototype,"subNotes",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=Object(g.a)(E.prototype,"l",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=Object(g.a)(E.prototype,"p",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=Object(g.a)(E.prototype,"d",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(g.a)(E.prototype,"dx",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"dx"),E.prototype),Object(g.a)(E.prototype,"time",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"time"),E.prototype),Object(g.a)(E.prototype,"notesY",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"notesY"),E.prototype),Object(g.a)(E.prototype,"pointsY",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"pointsY"),E.prototype),Object(g.a)(E.prototype,"tailPointsX",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"tailPointsX"),E.prototype),Object(g.a)(E.prototype,"width",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"width"),E.prototype),Object(g.a)(E.prototype,"preHeight",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"preHeight"),E.prototype),Object(g.a)(E.prototype,"height",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"height"),E.prototype),Object(g.a)(E.prototype,"x",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"x"),E.prototype),Object(g.a)(E.prototype,"preMarginBottom",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"preMarginBottom"),E.prototype),Object(g.a)(E.prototype,"marginBottom",[m.f],Object.getOwnPropertyDescriptor(E.prototype,"marginBottom"),E.prototype),L=Object(g.a)(E.prototype,"isSelect",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E);var Y,I,X,R,V,U,J,q,$,K,Q,Z,tt,et,it,nt,st,rt,ot,at,ht,ct,lt,pt,ut,gt,ft,bt,dt,yt,kt,mt,Ot,vt,jt,Tt,wt=Object(O.a)(H=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){var t=this;return s.a.createElement("g",{className:"muse-note__subnote",transform:"translate(0,"+this.props.y+")",width:this.props.w,height:this.props.h,onClick:function(){_.instance.selectSubNote(t.props.subNote)}},s.a.createElement("text",{fontFamily:this.props.subNote.config.noteFontFamily,fontSize:this.props.subNote.config.noteFontSize,transform:"translate("+this.props.dx+",0)"},this.props.subNote.n),s.a.createElement("text",{fontFamily:this.props.subNote.config.noteFontFamily,fontSize:this.props.subNote.config.sigFontSize,transform:"translate(0,"+(this.props.subNote.config.sigFontSize-this.props.subNote.config.noteHeight)+")"},{S:"#",F:"b",DS:"x",DF:"d",N:"n"}[this.props.subNote.x]||""),s.a.createElement(d,{x:0,y:-this.props.h,w:this.props.w,h:this.props.subNote.config.noteFontSize,clazz:"muse-note__subnote",show:this.props.subNote.isSelect}))}}]),i}(s.a.Component))||H,St=Object(O.a)(G=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){var t=this,e="muse-note";return s.a.createElement("g",{className:e,transform:"translate("+this.props.note.x+",0)",width:this.props.note.width,height:this.props.note.height,onClick:function(){_.instance.selectNote(t.props.note)}},s.a.createElement(y,{w:this.props.note.width,h:this.props.note.height+this.props.note.marginBottom,clazz:e,show:this.props.note.isSelect,color:"blue"}),this.props.note.subNotes.map((function(e,i){return s.a.createElement(wt,{key:i,dx:t.props.note.dx,y:t.props.note.height-t.props.note.notesY[i],w:t.props.note.width,h:22,subNote:e})})),function(t,e){return s.a.createElement("g",{className:e+"__group-point"},t.pointsY.map((function(e,i){return s.a.createElement("circle",{key:i,r:t.config.pointRound,fill:"black",transform:"translate("+(t.dx+t.config.noteWidth/2)+","+(t.height-e+t.config.pointGap/2)+")"})})))}(this.props.note,e),function(t,e){return s.a.createElement("g",{className:e+"__tail-point"},t.tailPointsX.map((function(e,i){return s.a.createElement("circle",{key:i,r:t.config.pointRound,fill:"black",transform:"translate("+e+","+(t.height-t.config.noteHeight/3)+")"})})))}(this.props.note,e))}}]),i}(s.a.Component))||G,xt=i(14),zt=(Y=function(){function t(e,i,n,s){Object(a.a)(this,t),this.config=void 0,Object(u.a)(this,"index",I,this),Object(u.a)(this,"track",X,this),Object(u.a)(this,"notes",R,this),Object(u.a)(this,"isSelect",V,this),this.index=i,this.track=n,this.config=s,this.decode(e)}return Object(h.a)(t,[{key:"width",get:function(){return this.track.barsWidth[this.index]}},{key:"height",get:function(){var t=0;return this.notes.forEach((function(e){var i=e.height+e.marginBottom;t=i>t?i:t})),t}},{key:"x",get:function(){return this.track.barsX[this.index]}},{key:"y",get:function(){return 0}},{key:"notesTime",get:function(){return this.notes.map((function(t){return t.time}))}},{key:"notesTimeSum",get:function(){return this.notesTime.reduce((function(t,e){return t.plus(e)}),new k).plus((new k).init(1,1))}},{key:"notesWidth",get:function(){return this.notes.map((function(t){return t.width}))}},{key:"notesX",get:function(){var t=this,e=this.width-this.notesWidthSum,i=(new k).init(e,1).divide(this.notesTimeSum),n=i.toNumber();return this.notesWidth.map((function(e,s){var r=n;return n+=e+t.notesTime[s].multiply(i).toNumber(),r}))}},{key:"preNotesMaxHeight",get:function(){return Math.max.apply(Math,Object(f.a)(this.notes.map((function(t){return t.preHeight}))))}},{key:"notesMaxHeight",get:function(){return this.track.notesMaxHeight}},{key:"preNotesMaxMarginBottom",get:function(){return Math.max.apply(Math,Object(f.a)(this.notes.map((function(t){return t.preMarginBottom}))))}},{key:"notesMaxMarginBottom",get:function(){return this.track.notesMaxMarginBottom}},{key:"baselineGroup",get:function(){for(var t=this,e=[],i=function(i){var n=0,s=0,r=-1;if(t.notes.forEach((function(t,o){t.l>i?(r=o,n++):(s<=r&&e.push({y:i,s:s,e:r}),s=o+1,r=o)})),s<=r&&e.push({y:i,s:s,e:r}),0===n)return"break"},n=0;;++n){if("break"===i(n))break}return e}},{key:"notesWidthSum",get:function(){var t=0;return this.notes.forEach((function(e){return t+=e.width})),t}}]),Object(h.a)(t,[{key:"addNote",value:function(t){this.notes=this.notes.splice(t,0,new C({n:"0"},this,this.notes.length)),this.notes.forEach((function(t,e){return t.index=e}))}},{key:"removeNote",value:function(t){this.notes=this.notes.filter((function(e,i){return i!==t})),this.notes.forEach((function(t,e){return t.index=e}))}},{key:"setSelect",value:function(t){this.isSelect=t}},{key:"getThis",value:function(){return this}},{key:"decode",value:function(t){var e=this;void 0!==t.notes&&t.notes.forEach((function(t,i){e.notes.push(new C(t,e,i))}))}},{key:"code",value:function(){return{notes:this.notes.map((function(t){return t.code()}))}}}]),t}(),I=Object(g.a)(Y.prototype,"index",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(g.a)(Y.prototype,"track",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=Object(g.a)(Y.prototype,"notes",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=Object(g.a)(Y.prototype,"isSelect",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(g.a)(Y.prototype,"width",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"width"),Y.prototype),Object(g.a)(Y.prototype,"height",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"height"),Y.prototype),Object(g.a)(Y.prototype,"x",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"x"),Y.prototype),Object(g.a)(Y.prototype,"y",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"y"),Y.prototype),Object(g.a)(Y.prototype,"notesTime",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesTime"),Y.prototype),Object(g.a)(Y.prototype,"notesTimeSum",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesTimeSum"),Y.prototype),Object(g.a)(Y.prototype,"notesWidth",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesWidth"),Y.prototype),Object(g.a)(Y.prototype,"notesX",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesX"),Y.prototype),Object(g.a)(Y.prototype,"preNotesMaxHeight",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"preNotesMaxHeight"),Y.prototype),Object(g.a)(Y.prototype,"notesMaxHeight",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesMaxHeight"),Y.prototype),Object(g.a)(Y.prototype,"preNotesMaxMarginBottom",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"preNotesMaxMarginBottom"),Y.prototype),Object(g.a)(Y.prototype,"notesMaxMarginBottom",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesMaxMarginBottom"),Y.prototype),Object(g.a)(Y.prototype,"baselineGroup",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"baselineGroup"),Y.prototype),Object(g.a)(Y.prototype,"notesWidthSum",[m.f],Object.getOwnPropertyDescriptor(Y.prototype,"notesWidthSum"),Y.prototype),Y),Nt=function(t){var e=Object(xt.a)((function(){return[t.w,t.h]})),i=Object(b.a)(e,2),n=i[0],r=i[1];return s.a.createElement("line",{className:t.clazz+"__bar-line",x1:n,y1:0,x2:n,y2:r,strokeWidth:1,stroke:"black"})},Et=function(t){var e=t.bar,i=t.clazz,n=Object(xt.a)((function(){return[e.baselineGroup,e.notes]})),r=Object(b.a)(n,2),o=r[0],a=r[1];return s.a.createElement("g",{className:i+"__base-line"},o.map((function(t,i){return s.a.createElement("line",{key:i,x1:a[t.s].x,y1:a[t.s].height+(t.y+1)*e.config.pointGap,x2:a[t.e].x+e.notes[t.e].width,y2:a[t.s].height+(t.y+1)*e.config.pointGap,stroke:"black",strokeWidth:1})})))},Pt=Object(O.a)(U=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){var t=this.props.bar.notes,e="muse-bar";return s.a.createElement("g",{className:e,transform:"translate("+this.props.bar.x+","+this.props.bar.y+")",width:this.props.bar.width,height:this.props.bar.height},s.a.createElement(d,{w:this.props.bar.width,h:this.props.bar.height,x:0,y:0,clazz:e,show:this.props.bar.isSelect}),s.a.createElement(Nt,{w:this.props.bar.width,h:this.props.bar.height,clazz:e}),t.map((function(t,e){return s.a.createElement(St,{key:e,note:t})})),s.a.createElement(Et,{bar:this.props.bar,clazz:e}))}}]),i}(s.a.Component))||U,Mt=(J=function(){function t(e,i,n,s){Object(a.a)(this,t),this.config=void 0,Object(u.a)(this,"index",q,this),Object(u.a)(this,"line",$,this),Object(u.a)(this,"bars",K,this),Object(u.a)(this,"isSelect",Q,this),this.index=i,this.line=n,this.config=s,this.decode(e)}return Object(h.a)(t,[{key:"width",get:function(){return this.line.width}},{key:"height",get:function(){var t=0;return this.bars.forEach((function(e){t=e.height>t?e.height:t})),t}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return this.line.tracksY[this.index]}},{key:"barsTime",get:function(){return this.bars.map((function(t){return t.notesTimeSum}))}},{key:"barsWidth",get:function(){var t=this,e=this.barsTime.reduce((function(t,e){return t.plus(e)}),new k),i=this.width-this.notesWidthSum,n=(new k).init(i,1).divide(e);return this.barsNotesWidth.map((function(e,i){return e+t.barsTime[i].multiply(n).toNumber()}))}},{key:"barsX",get:function(){var t=0;return this.barsWidth.map((function(e){var i=t;return t+=e,i}))}},{key:"notesMaxHeight",get:function(){return Math.max.apply(Math,Object(f.a)(this.bars.map((function(t){return t.preNotesMaxHeight}))))}},{key:"notesMaxMarginBottom",get:function(){return Math.max.apply(Math,Object(f.a)(this.bars.map((function(t){return t.preNotesMaxMarginBottom}))))}},{key:"notesWidthSum",get:function(){return this.barsNotesWidth.reduce((function(t,e){return t+e}),0)}},{key:"barsNotesWidth",get:function(){return this.bars.map((function(t){return t.notesWidthSum}))}}]),Object(h.a)(t,[{key:"addBar",value:function(t){this.bars=this.bars.splice(t,0,new zt({notes:[{n:"0"}]},this.bars.length,this,this.config)),this.bars.forEach((function(t,e){return t.index=e}))}},{key:"removeBar",value:function(t){this.bars=this.bars.filter((function(e,i){return i!==t})),this.bars.forEach((function(t,e){return t.index=e}))}},{key:"setSelect",value:function(t){this.isSelect=t}},{key:"getThis",value:function(){return this}},{key:"decode",value:function(t){var e=this;void 0!==t.bars&&t.bars.forEach((function(t,i){e.bars.push(new zt(t,i,e,e.config))}))}},{key:"code",value:function(){return{bars:this.bars.map((function(t){return t.code()}))}}}]),t}(),q=Object(g.a)(J.prototype,"index",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=Object(g.a)(J.prototype,"line",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=Object(g.a)(J.prototype,"bars",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=Object(g.a)(J.prototype,"isSelect",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(g.a)(J.prototype,"width",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"width"),J.prototype),Object(g.a)(J.prototype,"height",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"height"),J.prototype),Object(g.a)(J.prototype,"x",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"x"),J.prototype),Object(g.a)(J.prototype,"y",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"y"),J.prototype),Object(g.a)(J.prototype,"barsTime",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"barsTime"),J.prototype),Object(g.a)(J.prototype,"barsWidth",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"barsWidth"),J.prototype),Object(g.a)(J.prototype,"barsX",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"barsX"),J.prototype),Object(g.a)(J.prototype,"notesMaxHeight",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"notesMaxHeight"),J.prototype),Object(g.a)(J.prototype,"notesMaxMarginBottom",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"notesMaxMarginBottom"),J.prototype),Object(g.a)(J.prototype,"notesWidthSum",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"notesWidthSum"),J.prototype),Object(g.a)(J.prototype,"barsNotesWidth",[m.f],Object.getOwnPropertyDescriptor(J.prototype,"barsNotesWidth"),J.prototype),J),Dt=Object(O.a)(Z=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){return s.a.createElement("g",{className:"muse-track",transform:"translate("+this.props.track.x+","+this.props.track.y+")",width:this.props.track.width,height:this.props.track.height},s.a.createElement(d,{w:this.props.track.width,h:this.props.track.height,x:0,y:0,clazz:"muse-track",show:this.props.track.isSelect}),this.props.track.bars.map((function(t,e){return s.a.createElement(Pt,{key:e,bar:t})})))}}]),i}(s.a.Component))||Z,Ft=(tt=function(){function t(e,i,n,s){Object(a.a)(this,t),this.config=void 0,Object(u.a)(this,"page",et,this),Object(u.a)(this,"index",it,this),Object(u.a)(this,"tracks",nt,this),Object(u.a)(this,"isSelect",st,this),this.page=n,this.index=i,this.config=s,this.decode(e)}return Object(h.a)(t,[{key:"width",get:function(){return this.page.width}},{key:"height",get:function(){var t=this,e=0;return this.tracks.forEach((function(i){e+=i.height+t.config.trackGap})),e-=this.config.trackGap}},{key:"x",get:function(){return this.page.x}},{key:"y",get:function(){return this.page.linesY[this.index]}},{key:"tracksY",get:function(){var t=this,e=0;return this.tracks.map((function(i){var n=e;return e+=i.height+t.config.trackGap,n}))}}]),Object(h.a)(t,[{key:"addTrack",value:function(t){this.tracks=this.tracks.splice(t,0,new Mt({bars:[{notes:[{n:"0"}]}]},this.tracks.length,this,this.config)),this.tracks.forEach((function(t,e){return t.index=e}))}},{key:"removeTrack",value:function(t){this.tracks=this.tracks.filter((function(e,i){return i!==t})),this.tracks.forEach((function(t,e){return t.index=e}))}},{key:"setSelect",value:function(t){this.isSelect=t}},{key:"getThis",value:function(){return this}},{key:"decode",value:function(t){var e=this;void 0!==t.tracks&&t.tracks.forEach((function(t,i){e.tracks.push(new Mt(t,i,e,e.config))}))}},{key:"code",value:function(){return{tracks:this.tracks.map((function(t){return t.code()}))}}}]),t}(),et=Object(g.a)(tt.prototype,"page",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=Object(g.a)(tt.prototype,"index",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=Object(g.a)(tt.prototype,"tracks",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),st=Object(g.a)(tt.prototype,"isSelect",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(g.a)(tt.prototype,"width",[m.f],Object.getOwnPropertyDescriptor(tt.prototype,"width"),tt.prototype),Object(g.a)(tt.prototype,"height",[m.f],Object.getOwnPropertyDescriptor(tt.prototype,"height"),tt.prototype),Object(g.a)(tt.prototype,"x",[m.f],Object.getOwnPropertyDescriptor(tt.prototype,"x"),tt.prototype),Object(g.a)(tt.prototype,"y",[m.f],Object.getOwnPropertyDescriptor(tt.prototype,"y"),tt.prototype),Object(g.a)(tt.prototype,"tracksY",[m.f],Object.getOwnPropertyDescriptor(tt.prototype,"tracksY"),tt.prototype),tt),Bt=function(t){var e=t.height,i=t.clazz;return s.a.createElement("g",{className:i+"__line-head"},s.a.createElement("line",{x1:0,y1:0,x2:0,y2:e,strokeWidth:1,stroke:"black"}))},Wt=Object(O.a)(rt=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){return s.a.createElement("g",{className:"muse-line",transform:"translate("+this.props.line.x+","+this.props.line.y+")",width:this.props.line.width,height:this.props.line.height},s.a.createElement(d,{w:this.props.line.width,h:this.props.line.height,x:0,y:0,clazz:"muse-line",show:this.props.line.isSelect}),s.a.createElement(Bt,{height:this.props.line.height,clazz:"muse-line"}),this.props.line.tracks.map((function(t,e){return s.a.createElement(Dt,{key:e,track:t})})))}}]),i}(s.a.Component))||rt,Lt=(ot=function(){function t(e,i,n,s){Object(a.a)(this,t),this.config=void 0,Object(u.a)(this,"notation",at,this),Object(u.a)(this,"index",ht,this),Object(u.a)(this,"lines",ct,this),Object(u.a)(this,"isSelect",lt,this),this.index=i,this.notation=n,this.config=s,this.decode(e)}return Object(h.a)(t,[{key:"width",get:function(){return this.config.pageWidth-2*this.config.pageMarginHorizontal}},{key:"height",get:function(){return this.config.pageWidth*this.config.pageE-this.config.pageMarginVertical-this.marginTop}},{key:"x",get:function(){return this.config.pageMarginHorizontal}},{key:"y",get:function(){return this.marginTop+this.index*(this.config.pageWidth*this.config.pageE)}},{key:"marginTop",get:function(){var t=0;if(0===this.index){t+=this.config.pageMarginVertical;var e=this.config.infoGap;t+=this.config.infoTitleFontSize+e,t+=this.config.infoSubtitleFontSize+e,this.notation.info.author.length>2?t+=this.notation.info.author.length*(this.config.infoFontSize+e):t+=2*(this.config.infoFontSize+e)}else t=this.config.pageMarginVertical;return t}},{key:"marginBottom",get:function(){return this.config.pageMarginVertical}},{key:"marginLeft",get:function(){return this.config.pageMarginHorizontal}},{key:"marginRight",get:function(){return this.config.pageMarginHorizontal}},{key:"linesHeight",get:function(){return this.lines.map((function(t){return t.height}))}},{key:"linesY",get:function(){var t=this.marginTop,e=this.linesHeight.reduce((function(t,e){return t+e}),0),i=(this.height-e)/(this.lines.length-1);return this.linesHeight.map((function(e){var n=t;return t+=e+i,n}))}}]),Object(h.a)(t,[{key:"addLine",value:function(t){this.lines=this.lines.splice(t,0,new Ft({tracks:[{bars:[{notes:[{n:"0"}]}]}]},this.lines.length,this,this.config)),this.lines.forEach((function(t,e){return t.index=e}))}},{key:"removeLine",value:function(t){this.lines=this.lines.filter((function(e,i){return i!==t})),this.lines.forEach((function(t,e){return t.index=e}))}},{key:"setSelect",value:function(t){this.isSelect=t}},{key:"getThis",value:function(){return this}},{key:"decode",value:function(t){var e=this;void 0!==t.lines&&t.lines.forEach((function(t,i){e.lines.push(new Ft(t,i,e,e.config))}))}},{key:"code",value:function(){return{lines:this.lines.map((function(t){return t.code()}))}}}]),t}(),at=Object(g.a)(ot.prototype,"notation",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=Object(g.a)(ot.prototype,"index",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=Object(g.a)(ot.prototype,"lines",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),lt=Object(g.a)(ot.prototype,"isSelect",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(g.a)(ot.prototype,"width",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"width"),ot.prototype),Object(g.a)(ot.prototype,"height",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"height"),ot.prototype),Object(g.a)(ot.prototype,"x",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"x"),ot.prototype),Object(g.a)(ot.prototype,"y",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"y"),ot.prototype),Object(g.a)(ot.prototype,"marginTop",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"marginTop"),ot.prototype),Object(g.a)(ot.prototype,"marginBottom",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"marginBottom"),ot.prototype),Object(g.a)(ot.prototype,"marginLeft",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"marginLeft"),ot.prototype),Object(g.a)(ot.prototype,"marginRight",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"marginRight"),ot.prototype),Object(g.a)(ot.prototype,"linesHeight",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"linesHeight"),ot.prototype),Object(g.a)(ot.prototype,"linesY",[m.f],Object.getOwnPropertyDescriptor(ot.prototype,"linesY"),ot.prototype),ot),Ht=function(t){var e=t.index,i=t.x,n=t.y,r=t.clazz,o=t.config;return s.a.createElement("g",{className:r+"__page-index",transform:"translate("+i+","+n+")"},s.a.createElement("text",{textAnchor:"middle",fontFamily:o.textFontFamily,fontSize:o.pageIndexFontSize},(e+1).toString()))},Gt=Object(O.a)(pt=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){var t="muse-page";return s.a.createElement("g",{className:t,transform:"translate("+(this.props.page.x-this.props.page.marginLeft)+","+(this.props.page.y-this.props.page.marginTop)+")",width:this.props.page.width+this.props.page.marginLeft+this.props.page.marginRight,height:this.props.page.height+this.props.page.marginTop+this.props.page.marginBottom},s.a.createElement(d,{w:this.props.page.width,h:this.props.page.height,x:this.props.page.x,y:this.props.page.marginTop,clazz:t,show:this.props.page.isSelect}),s.a.createElement(y,{w:this.props.page.width+this.props.page.marginLeft+this.props.page.marginLeft,h:this.props.page.height+this.props.page.marginTop+this.props.page.marginBottom,clazz:t,show:!0}),s.a.createElement(Ht,{index:this.props.page.index,x:this.props.page.marginLeft+this.props.page.width/2,y:this.props.page.marginTop+this.props.page.height+this.props.page.marginBottom/2,clazz:t,config:this.props.page.config}),this.props.page.lines.map((function(t,e){return s.a.createElement(Wt,{key:e,line:t})})))}}]),i}(s.a.Component))||pt,_t=(ut=function t(){Object(a.a)(this,t),Object(u.a)(this,"title",gt,this),Object(u.a)(this,"subtitle",ft,this),Object(u.a)(this,"author",bt,this),Object(u.a)(this,"speed",dt,this),Object(u.a)(this,"rhythmic",yt,this),Object(u.a)(this,"C",kt,this)},gt=Object(g.a)(ut.prototype,"title",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ft=Object(g.a)(ut.prototype,"subtitle",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),bt=Object(g.a)(ut.prototype,"author",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dt=Object(g.a)(ut.prototype,"speed",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yt=Object(g.a)(ut.prototype,"rhythmic",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),kt=Object(g.a)(ut.prototype,"C",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ut),At=(mt=function(){function t(e,i){Object(a.a)(this,t),this.config=void 0,Object(u.a)(this,"pages",Ot,this),Object(u.a)(this,"isSelect",vt,this),Object(u.a)(this,"info",jt,this),this.config=i,this.decode(e)}return Object(h.a)(t,[{key:"height",get:function(){var t=0;return this.pages.forEach((function(e){return t+=e.height+e.marginTop+e.marginBottom})),t}},{key:"width",get:function(){return this.config.pageWidth}}]),Object(h.a)(t,[{key:"addPage",value:function(t){this.pages=this.pages.splice(t,0,new Lt({lines:[{tracks:[{bars:[{notes:[{n:"0"}]}]}]}]},this.pages.length,this,this.config)),this.pages.forEach((function(t,e){return t.index=e}))}},{key:"reomvePage",value:function(t){this.pages=this.pages.filter((function(e,i){return i!==t})),this.pages.forEach((function(t,e){return t.index=e}))}},{key:"setSelect",value:function(t){this.isSelect=t}},{key:"getThis",value:function(){return this}},{key:"decode",value:function(t){var e=this;void 0!==t.pages&&t.pages.forEach((function(t,i){e.pages.push(new Lt(t,i,e,e.config))})),void 0!==t.title&&(this.info.title=t.title),void 0!==t.subtitle&&(this.info.subtitle=t.subtitle),void 0!==t.author&&(this.info.author=t.author.toString().split("|")),void 0!==t.speed&&(this.info.speed=t.speed),t.rhythmic&&(this.info.rhythmic=t.rhythmic),t.C&&(this.info.C=t.C)}},{key:"code",value:function(){var t=this,e=this.pages.map((function(t){return t.code()})),i="";return this.info.author.forEach((function(e,n){n===t.info.author.length-1?i+=e:i+=e+"|"})),{title:this.info.title,subtitle:this.info.subtitle,author:i,rhythmic:this.info.rhythmic,speed:this.info.speed,C:this.info.C,pages:e}}}]),t}(),Ot=Object(g.a)(mt.prototype,"pages",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vt=Object(g.a)(mt.prototype,"isSelect",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jt=Object(g.a)(mt.prototype,"info",[m.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _t}}),Object(g.a)(mt.prototype,"height",[m.f],Object.getOwnPropertyDescriptor(mt.prototype,"height"),mt.prototype),Object(g.a)(mt.prototype,"width",[m.f],Object.getOwnPropertyDescriptor(mt.prototype,"width"),mt.prototype),mt),Ct=function(t){var e=t.info,i=t.config,n=t.clazz,r=0;r+=i.pageMarginVertical;var o=s.a.createElement("text",{className:n+"__info-title",fontFamily:i.textFontFamily,width:i.pageWidth,textAnchor:"middle",fontSize:i.infoTitleFontSize,transform:"translate("+i.pageWidth/2+","+r+")"},e.title);r+=i.infoTitleFontSize+i.infoGap;var a=s.a.createElement("text",{className:n+"__info-subtitle",fontFamily:i.textFontFamily,width:i.pageWidth,textAnchor:"middle",fontSize:i.infoSubtitleFontSize,transform:"translate("+i.pageWidth/2+","+r+")"},e.subtitle),h=r,c=e.author.length,l=s.a.createElement("g",{className:n+"__info-author"},e.author.map((function(t,e){return h+=i.infoFontSize+i.infoGap,e<c-2&&(r+=i.infoFontSize+i.infoGap),s.a.createElement("text",{key:e,fontFamily:i.textFontFamily,width:i.pageWidth,fontSize:i.infoFontSize,textAnchor:"end",x:0,transform:"translate("+(i.pageWidth-i.pageMarginHorizontal)+","+h+")"},t)}))),p=r+(i.infoGap+i.infoSubtitleFontSize),u=p+(i.infoGap+i.infoFontSize),g=s.a.createElement("g",{className:n+"__info-rythmic",width:i.pageWidth},s.a.createElement("text",{fontFamily:i.textFontFamily,width:i.pageWidth,fontSize:i.infoFontSize,transform:"translate("+i.pageMarginHorizontal+","+p+")"},e.speed),s.a.createElement("text",{fontFamily:i.textFontFamily,width:i.pageWidth,fontSize:i.infoFontSize,transform:"translate("+i.pageMarginHorizontal+","+u+")"},"1=".concat(e.C," ").concat(e.rhythmic)));return s.a.createElement("g",{className:n+"__info",width:i.pageWidth},o,a,l,g)},Yt=Object(O.a)(Tt=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){var t="muse-notation";return s.a.createElement("svg",{className:"muse",width:this.props.notation.width+20,height:this.props.notation.height+20},s.a.createElement("g",{className:t,transform:"translate(10,10)",width:this.props.notation.width,height:this.props.notation.height},s.a.createElement(Ct,{info:this.props.notation.info,config:this.props.notation.config,clazz:t}),s.a.createElement(d,{w:this.props.notation.width,h:this.props.notation.height,x:0,y:0,clazz:t,show:this.props.notation.isSelect}),s.a.createElement(y,{w:this.props.notation.width,h:this.props.notation.height,clazz:t}),this.props.notation.pages.map((function(t,e){return s.a.createElement(Gt,{key:e,page:t})}))))}}]),i}(s.a.Component))||Tt,It=function(t){Object(c.a)(i,t);var e=Object(l.a)(i);function i(t){var n;return Object(a.a)(this,i),(n=e.call(this,t)).state={error:null,isLoaded:!1,notation:null},n}return Object(h.a)(i,[{key:"componentDidMount",value:function(){var t=this;fetch("https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/b.json").then((function(t){return t.text()})).then((function(e){t.setState({isLoaded:!0,notation:new At(JSON.parse(e),new p)})}),(function(e){t.setState({isLoaded:!0,error:e})}))}},{key:"render",value:function(){var t=this;return this.state.notation?s.a.createElement("div",{className:"app"},s.a.createElement("h1",null,"Example"),this.state.isLoaded?this.state.error?"error":s.a.createElement(Yt,{notation:this.state.notation}):"loading...",s.a.createElement("button",{onClick:function(){var e;console.log(JSON.stringify(null===(e=t.state.notation)||void 0===e?void 0:e.code()))}},"log")):s.a.createElement(s.a.Fragment,null)}}]),i}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(It,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.084553d7.chunk.js.map