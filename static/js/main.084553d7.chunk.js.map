{"version":3,"sources":["muse/MuseConfig.ts","muse/Border.tsx","muse/Fraction.ts","muse/Selector.ts","muse/MuseNote.tsx","muse/MuseBar.tsx","muse/MuseTrack.tsx","muse/MuseLine.tsx","muse/MusePage.tsx","muse/MuseNotation.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["MuseConfig","noteHeight","noteWidth","noteFontSize","noteFontFamily","sigFontSize","trackGap","lineGap","pointGap","tailPointGap","pointRound","pageE","pageWidth","pageMarginHorizontal","pageMarginVertical","infoTitleFontSize","infoSubtitleFontSize","infoGap","infoFontSize","pageIndexFontSize","textFontFamily","showBorder","Border","w","h","x","y","clazz","show","color","className","transform","width","height","stroke","strokeWidth","fill","OuterBorder","Fraction","u","d","pos","search","this","parseInt","substr","a","b","t","n","gcd","f","r","simplify","Selector","subnote","note","bar","track","line","page","notation","document","addEventListener","ev","keySubNote","keyNote","keyBar","keyTrack","keyLine","keyPage","keyNotation","returnValue","s","setSelect","selectNote","getThis","selectBar","selectTrack","selectLine","selectPage","selectNotation","key","idx","index","removeSubNote","subNotes","length","addSubNote","selectSubNote","setNum","reducePoint","reduceLine","reduceTailPoint","addNote","notes","removeNote","bars","l","addBar","removeBar","tracks","addTrack","removeTrack","lines","pages","addLine","removeLine","addPage","reomvePage","instance","SubNote","config","isSelect","p","observable","Note","o","decode","dxx","forEach","it","Math","pow","ny","i","push","py","mb","notesY","dx","notesMaxHeight","notesX","notesMaxMarginBottom","splice","filter","undefined","ns","ts","split","charCodeAt","charAt","tg","computed","MuseSubNote","observer","props","onClick","subNote","fontFamily","fontSize","S","F","DS","DF","N","React","Component","MuseNote","marginBottom","map","pointsY","pointGroup","tailPointsX","tailPoint","Bar","barsWidth","barsX","time","notesTime","reduce","plus","init","space","notesWidthSum","unit","divide","notesTimeSum","toNumber","notesWidth","multiply","max","preHeight","preMarginBottom","e","code","BarLine","useObserver","x1","y1","x2","y2","BaseLine","baselineGroup","MuseBar","Track","tracksY","timeSum","barsTime","barsNotesWidth","preNotesMaxHeight","preNotesMaxMarginBottom","MuseTrack","Line","linesY","LineHead","MuseLine","Page","marginTop","mt","g","info","author","sum","linesHeight","gap","PageIndex","textAnchor","toString","MusePage","marginLeft","marginRight","NotationInfo","Notation","title","subtitle","speed","rhythmic","C","MuseNotationInfo","y3","rythimic","MuseNotation","margin","App","state","error","isLoaded","fetch","then","res","text","result","setState","JSON","parse","console","log","stringify","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"6QAAqBA,G,4CACnBC,WAAa,G,KACbC,UAAY,G,KACZC,aAAe,G,KACfC,eAAiB,Q,KACjBC,YAAc,G,KAEdC,SAAW,G,KAEXC,QAAU,G,KAEVC,SAAW,E,KACXC,aAAe,E,KACfC,WAAa,I,KAEbC,MAAQ,M,KACRC,UAAY,I,KACZC,qBAAuB,I,KACvBC,mBAAqB,I,KAErBC,kBAAoB,G,KACpBC,qBAAuB,G,KACvBC,QAAU,E,KACVC,aAAe,G,KAEfC,kBAAoB,G,KAEpBC,eAAiB,Q,KAEjBC,YAAa,I,qCCjBFC,EAAgC,SAAC,GAQ1B,IAPlBC,EAOiB,EAPjBA,EACAC,EAMiB,EANjBA,EACAC,EAKiB,EALjBA,EACAC,EAIiB,EAJjBA,EACAC,EAGiB,EAHjBA,MAGiB,IAFjBC,YAEiB,aADjBC,aACiB,MADT,OACS,EACjB,OAAID,EAEA,0BACEE,UAAWH,EAAQ,WACnBI,UAAW,aAAeN,EAAI,IAAMC,EAAI,IACxCM,MAAOT,EACPU,OAAQT,EACRU,OAAQL,EACRM,YAAY,MACZC,KAAK,SAIF,sCAYEC,EAA0C,SAAC,GAM/B,IALvBd,EAKsB,EALtBA,EACAC,EAIsB,EAJtBA,EACAG,EAGsB,EAHtBA,MAGsB,IAFtBC,YAEsB,aADtBC,aACsB,MADd,OACc,EACtB,OAAID,EAEA,0BACEE,UAAWH,EAAQ,iBACnBI,UAAW,iBACXC,MAAOT,EACPU,OAAQT,EACRU,OAAQL,EACRM,YAAY,MACZC,KAAK,SAIF,sCClEUE,E,iDACnBC,EAAY,E,KACZC,EAAY,E,kDACNf,GACJ,IAAIgB,EAAMhB,EAAEiB,OAAO,KAOnB,OANa,IAATD,GACFE,KAAKJ,EAAIK,SAASnB,EAAEoB,OAAO,EAAGJ,IAC9BE,KAAKH,EAAII,SAASnB,EAAEoB,OAAOJ,EAAM,KAEjCE,KAAKJ,EAAIK,SAASnB,GAEbkB,O,2BAEJJ,EAAWC,GAGd,OAFAG,KAAKJ,EAAIA,EACTI,KAAKH,EAAIA,EACFG,O,0BAELG,EAAWC,GACb,KAAa,IAANA,GAAS,CACd,IAAIC,EAAID,EACRA,EAAID,EAAIC,EACRD,EAAIE,EAEN,OAAOF,I,iCAIP,IADA,IAAIG,GACIA,EAAIN,KAAKO,IAAIP,KAAKJ,EAAGI,KAAKH,IAAM,GAAKS,GAAK,GAChDN,KAAKJ,GAAKU,EACVN,KAAKH,GAAKS,EAEZ,OAAON,O,2BAEJQ,GACH,IAAIC,EAAI,IAAId,EAGZ,OAFAc,EAAEb,EAAII,KAAKJ,EAAIY,EAAEX,EAAIG,KAAKH,EAAIW,EAAEZ,EAChCa,EAAEZ,EAAIG,KAAKH,EAAIW,EAAEX,EACVY,EAAEC,a,4BAELF,GACJ,IAAIC,EAAI,IAAId,EAGZ,OAFAc,EAAEb,EAAII,KAAKJ,EAAIY,EAAEX,EAAIG,KAAKH,EAAIW,EAAEZ,EAChCa,EAAEZ,EAAIG,KAAKH,EAAIW,EAAEX,EACVY,EAAEC,a,+BAEFF,GACP,IAAIC,EAAI,IAAId,EAGZ,OAFAc,EAAEb,EAAII,KAAKJ,EAAIY,EAAEZ,EACjBa,EAAEZ,EAAIG,KAAKH,EAAIW,EAAEX,EACVY,EAAEC,a,6BAEJF,GACL,IAAIC,EAAI,IAAId,EAGZ,OAFAc,EAAEb,EAAII,KAAKJ,EAAIY,EAAEX,EACjBY,EAAEZ,EAAIG,KAAKH,EAAIW,EAAEZ,EACVa,EAAEC,a,iCAGT,OAAOV,KAAKJ,EAAII,KAAKH,I,iCAGrB,OAAe,IAAXG,KAAKH,EACD,GAAN,OAAUG,KAAKJ,GAET,GAAN,OAAUI,KAAKJ,EAAf,YAAoBI,KAAKH,O,mBCLzBc,E,WASJ,aAAuB,IAAD,gCARtBC,QAAmC,KAQb,KAPtBC,KAA6B,KAOP,KANtBC,IAA2B,KAML,KALtBC,MAA+B,KAKT,KAJtBC,KAA6B,KAIP,KAHtBC,KAA6B,KAGP,KAFtBC,SAAqC,KAGnCC,SAASC,iBAAiB,WAAW,SAACC,IAC/B,EAAKC,WAAWD,IACd,EAAKE,QAAQF,IACX,EAAKG,OAAOH,IACV,EAAKI,SAASJ,IACZ,EAAKK,QAAQL,IACX,EAAKM,QAAQN,IACZ,EAAKO,YAAYP,MAM1BA,EAAGQ,aAAc,M,0DAGdC,GAAsB,IAAD,EACjC,UAAA9B,KAAKY,eAAL,SAAcmB,WAAU,GACxB/B,KAAKY,QAAUkB,EACf9B,KAAKY,QAAQmB,WAAU,GACvB/B,KAAKgC,WAAWF,EAAEG,UAAUpB,Q,iCAEnBiB,GAAmB,IAAD,EAC3B,UAAA9B,KAAKa,YAAL,SAAWkB,WAAU,GACrB/B,KAAKa,KAAOiB,EACS,OAAjB9B,KAAKY,SAAkBZ,KAAKa,KAAKkB,WAAU,GAC/C/B,KAAKkC,UAAUJ,EAAEG,UAAUnB,O,gCAEnBgB,GAAkB,IAAD,EACzB,UAAA9B,KAAKc,WAAL,SAAUiB,WAAU,GACpB/B,KAAKc,IAAMgB,EACO,OAAd9B,KAAKa,MAAeb,KAAKc,IAAIiB,WAAU,GAC3C/B,KAAKmC,YAAYL,EAAEG,UAAUlB,S,kCAEnBe,GAAoB,IAAD,EAC7B,UAAA9B,KAAKe,aAAL,SAAYgB,WAAU,GACtB/B,KAAKe,MAAQe,EACI,OAAb9B,KAAKc,KAAcd,KAAKe,MAAMgB,WAAU,GAC5C/B,KAAKoC,WAAWN,EAAEG,UAAUjB,Q,iCAEnBc,GAAmB,IAAD,EAC3B,UAAA9B,KAAKgB,YAAL,SAAWe,WAAU,GACrB/B,KAAKgB,KAAOc,EACO,OAAf9B,KAAKe,OAAgBf,KAAKgB,KAAKe,WAAU,GAC7C/B,KAAKqC,WAAWP,EAAEG,UAAUhB,Q,iCAEnBa,GAAmB,IAAD,EAC3B,UAAA9B,KAAKiB,YAAL,SAAWc,WAAU,GACrB/B,KAAKiB,KAAOa,EACM,OAAd9B,KAAKgB,MAAehB,KAAKiB,KAAKc,WAAU,GAC5C/B,KAAKsC,eAAeR,EAAEG,UAAUf,Y,qCAEnBY,GAAuB,IAAD,EACnC,UAAA9B,KAAKkB,gBAAL,SAAea,WAAU,GACzB/B,KAAKkB,SAAWY,EACE,OAAd9B,KAAKiB,MAAejB,KAAKkB,SAASa,WAAU,K,iCAEvCV,GAA6B,IAAD,EACrC,GAAqB,OAAjBrB,KAAKY,QAgHF,OAAO,EA/GZ,OAAQS,EAAGkB,KACT,IAAK,SAIH,OAHAvC,KAAKY,QAAQmB,WAAU,GACvB/B,KAAKY,QAAU,KACf,UAAAZ,KAAKa,YAAL,SAAWkB,WAAU,IACd,EACT,IAAK,YACH,GAAI/B,KAAKa,KAAM,CACb,IAAI2B,EAAMxC,KAAKY,QAAQqB,UAAUQ,MACjCzC,KAAKa,KAAK6B,cAAc1C,KAAKY,QAAQqB,UAAUQ,OACH,IAAxCzC,KAAKa,KAAKoB,UAAUU,SAASC,QAC/B5C,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKY,QAAQmB,WAAU,GACvB/B,KAAKY,QAAU,MAEH,IAAR4B,GACFxC,KAAKY,QAAUZ,KAAKa,KAAKoB,UAAUU,SAAS,GAC5C3C,KAAKY,QAAQmB,WAAU,KAEvB/B,KAAKY,QAAUZ,KAAKa,KAAKoB,UAAUU,SAASH,EAAM,GAClDxC,KAAKY,QAAQmB,WAAU,IAI7B,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACa,IAAD,IAAf,GAAI/B,KAAKa,KACP,UAAAb,KAAKa,YAAL,SAAWgC,WAAW,GACtB7C,KAAK8C,cAAL,UAAmB9C,KAAKa,YAAxB,aAAmB,EAAWoB,UAAUU,SAAS,IAEnD,OAAO,EACT,IAAK,IACH,GAAI3C,KAAKa,KAAM,CAAC,IAAD,IACT2B,EAAMxC,KAAKY,QAAQqB,UAAUQ,MACjC,UAAAzC,KAAKa,YAAL,SAAWgC,WAAWL,EAAM,GAC5BxC,KAAK8C,cAAL,UAAmB9C,KAAKa,YAAxB,aAAmB,EAAWoB,UAAUU,SAASH,EAAM,IAEzD,OAAO,EACT,IAAK,IACa,IAAD,IAAf,GAAIxC,KAAKa,KACP,UAAAb,KAAKa,YAAL,SAAWgC,WAAW7C,KAAKa,KAAKoB,UAAUU,SAASC,QACnD5C,KAAK8C,cAAL,UACE9C,KAAKa,YADP,aACE,EAAWoB,UAAUU,SACnB3C,KAAKa,KAAKoB,UAAUU,SAASC,OAAS,IAI5C,OAAO,EACT,IAAK,UACH,GAAI5C,KAAKa,KACCb,KAAKa,KAAKoB,UAAUU,SAASC,OAC7B5C,KAAKY,QAAQqB,UAAUQ,MAAQ,IACrCzC,KAAKY,QAAQmB,WAAU,GACvB/B,KAAKY,QAAUZ,KAAKa,KAAKoB,UAAUU,SACjC3C,KAAKY,QAAQqB,UAAUQ,MAAQ,GAEjCzC,KAAKY,QAAQmB,WAAU,IAG3B,OAAO,EACT,IAAK,YAUH,OATI/B,KAAKa,MACHb,KAAKY,QAAQqB,UAAUQ,MAAQ,IACjCzC,KAAKY,QAAQmB,WAAU,GACvB/B,KAAKY,QAAUZ,KAAKa,KAAKoB,UAAUU,SACjC3C,KAAKY,QAAQqB,UAAUQ,MAAQ,GAEjCzC,KAAKY,QAAQmB,WAAU,KAGpB,EACT,IAAK,YAEL,IAAK,aACH,OAAO,EACT,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IAEH,OADA/B,KAAKY,QAAQmC,OAAO1B,EAAGkB,MAChB,EACT,IAAK,IAEH,OADAvC,KAAKY,QAAQoC,YAAY,IAClB,EACT,IAAK,IAEH,OADAhD,KAAKY,QAAQoC,aAAa,IACnB,EACT,IAAK,IAEH,OADAhD,KAAKY,QAAQqC,YAAY,IAClB,EACT,IAAK,IAEH,OADAjD,KAAKY,QAAQqC,WAAW,IACjB,EACT,IAAK,IAEH,OADAjD,KAAKY,QAAQsC,iBAAiB,IACvB,EACT,IAAK,IAEH,OADAlD,KAAKY,QAAQsC,gBAAgB,IACtB,EACT,QACE,OAAO,K,8BAIP7B,GAA6B,IAAD,EAClC,IAAIrB,KAAKa,KA+HF,OAAO,EA9HZ,OAAQQ,EAAGkB,KACT,IAAK,QAOH,OANIvC,KAAKa,KAAKoB,UAAUU,SAASC,QAAU,GACzC5C,KAAKa,KAAKgC,WAAW7C,KAAKa,KAAKoB,UAAUU,SAASC,QAEpD5C,KAAKY,QAAUZ,KAAKa,KAAKoB,UAAUU,SAAS,GAC5C3C,KAAKY,QAAQmB,WAAU,GACvB/B,KAAKa,KAAKkB,WAAU,IACb,EACT,IAAK,SAIH,OAHA/B,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKa,KAAO,KACZ,UAAAb,KAAKc,WAAL,SAAUiB,WAAU,IACb,EACT,IAAK,IAEH,OADA/B,KAAKa,KAAKgC,WAAW7C,KAAKa,KAAKoB,UAAUU,SAASC,SAC3C,EACT,IAAK,IACY,IAAD,IAAd,GAAI5C,KAAKc,IACP,UAAAd,KAAKc,WAAL,SAAUqC,QAAQ,GAClBnD,KAAKgC,WAAL,UAAgBhC,KAAKc,WAArB,aAAgB,EAAUmB,UAAUmB,MAAM,IAE5C,OAAO,EACT,IAAK,IACH,GAAIpD,KAAKc,IAAK,CAAC,IAAD,IACR0B,EAAMxC,KAAKa,KAAKoB,UAAUQ,MAC9B,UAAAzC,KAAKc,WAAL,SAAUqC,QAAQX,EAAM,GACxBxC,KAAKgC,WAAL,UAAgBhC,KAAKc,WAArB,aAAgB,EAAUmB,UAAUmB,MAAMZ,EAAM,IAElD,OAAO,EACT,IAAK,IACY,IAAD,IAAd,GAAIxC,KAAKc,IACP,UAAAd,KAAKc,WAAL,SAAUqC,QAAQnD,KAAKc,IAAImB,UAAUmB,MAAMR,QAC3C5C,KAAKgC,WAAL,UACEhC,KAAKc,WADP,aACE,EAAUmB,UAAUmB,MAAMpD,KAAKc,IAAImB,UAAUmB,MAAMR,OAAS,IAGhE,OAAO,EACT,IAAK,YACH,GAAI5C,KAAKc,IAAK,CACZ,IAAI0B,EAAMxC,KAAKa,KAAKoB,UAAUQ,MAC9BzC,KAAKc,IAAIuC,WAAWrD,KAAKa,KAAKoB,UAAUQ,OACA,IAApCzC,KAAKc,IAAImB,UAAUmB,MAAMR,QAC3B5C,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKa,KAAO,MAEA,IAAR2B,GACFxC,KAAKa,KAAOb,KAAKc,IAAImB,UAAUmB,MAAM,GACrCpD,KAAKa,KAAKkB,WAAU,KAEpB/B,KAAKa,KAAOb,KAAKc,IAAImB,UAAUmB,MAAMZ,EAAM,GAC3CxC,KAAKa,KAAKkB,WAAU,IAI1B,OAAO,EACT,IAAK,YACH,QAAI/B,KAAKc,MACHd,KAAKa,KAAKoB,UAAUQ,MAAQ,GAC9BzC,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKa,KAAOb,KAAKc,IAAImB,UAAUmB,MAC7BpD,KAAKa,KAAKoB,UAAUQ,MAAQ,GAE9BzC,KAAKa,KAAKkB,WAAU,IACb,KACE/B,KAAKe,QACVf,KAAKc,IAAImB,UAAUQ,MAAQ,IAC7BzC,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAC9BtD,KAAKc,IAAImB,UAAUQ,MAAQ,GAE7BzC,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKa,KAAOb,KAAKc,IAAImB,UAAUmB,MAC7BpD,KAAKc,IAAImB,UAAUmB,MAAMR,OAAS,GAEpC5C,KAAKa,KAAKkB,WAAU,IACb,KAIf,IAAK,aACH,GAAiB,OAAb/B,KAAKc,IAAc,CACrB,IAQuB,EARnByC,EAAIvD,KAAKc,IAAImB,UAAUmB,MAAMR,OACjC,OAAI5C,KAAKa,KAAKoB,UAAUQ,MAAQc,EAAI,GAClCvD,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKa,KAAOb,KAAKc,IAAImB,UAAUmB,MAC7BpD,KAAKa,KAAKoB,UAAUQ,MAAQ,GAE9BzC,KAAKa,KAAKkB,WAAU,IACb,KACE/B,KAAKe,QAEZf,KAAKc,IAAImB,UAAUQ,OACnB,UAAAzC,KAAKe,aAAL,eAAYkB,UAAUqB,KAAKV,QAAS,IAEpC5C,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAC9BtD,KAAKc,IAAImB,UAAUQ,MAAQ,GAE7BzC,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKa,KAAOb,KAAKc,IAAImB,UAAUmB,MAAM,GACrCpD,KAAKa,KAAKkB,WAAU,IACb,IAGN,OAAO,EAChB,IAAK,UAEL,IAAK,YACH,OAAO,EACT,IAAK,IAEH,OADA/B,KAAKa,KAAKoC,YAAY,IACf,EACT,IAAK,IAEH,OADAjD,KAAKa,KAAKoC,WAAW,IACd,EACT,IAAK,IAEH,OADAjD,KAAKa,KAAKqC,iBAAiB,IACpB,EACT,IAAK,IAEH,OADAlD,KAAKa,KAAKqC,gBAAgB,IACnB,EACT,QACE,OAAO,K,6BAIR7B,GAA6B,IAAD,EACjC,GAAiB,OAAbrB,KAAKc,IA6GF,OAAO,EA5GZ,OAAQO,EAAGkB,KACT,IAAK,QAOH,OANIvC,KAAKc,IAAImB,UAAUmB,MAAMR,QAAU,GACrC5C,KAAKc,IAAIqC,QAAQnD,KAAKc,IAAImB,UAAUmB,MAAMR,QAE5C5C,KAAKa,KAAOb,KAAKc,IAAImB,UAAUmB,MAAM,GACrCpD,KAAKa,KAAKkB,WAAU,GACpB/B,KAAKc,IAAIiB,WAAU,IACZ,EACT,IAAK,SAIH,OAHA/B,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAM,KACX,UAAAd,KAAKe,aAAL,SAAYgB,WAAU,IACf,EACT,IAAK,IAEH,OADA/B,KAAKc,IAAIqC,QAAQnD,KAAKc,IAAImB,UAAUmB,MAAMR,SACnC,EACT,IAAK,IAKH,OAJI5C,KAAKe,QACPf,KAAKe,MAAMyC,OAAO,GAClBxD,KAAKkC,UAAUlC,KAAKe,MAAMkB,UAAUqB,KAAK,MAEpC,EACT,IAAK,IACH,GAAItD,KAAKe,MAAO,CACd,IAAIyB,EAAMxC,KAAKc,IAAImB,UAAUQ,MAC7BzC,KAAKe,MAAMyC,OAAOhB,EAAM,GACxBxC,KAAKkC,UAAUlC,KAAKe,MAAMkB,UAAUqB,KAAKd,EAAM,IAEjD,OAAO,EACT,IAAK,IAOH,OANIxC,KAAKe,QACPf,KAAKe,MAAMyC,OAAOxD,KAAKe,MAAMkB,UAAUqB,KAAKV,QAC5C5C,KAAKkC,UACHlC,KAAKe,MAAMkB,UAAUqB,KAAKtD,KAAKe,MAAMkB,UAAUqB,KAAKV,OAAS,MAG1D,EACT,IAAK,YACH,GAAI5C,KAAKe,MAAO,CACd,IAAIyB,EAAMxC,KAAKc,IAAImB,UAAUQ,MAC7BzC,KAAKe,MAAM0C,UAAUzD,KAAKc,IAAImB,UAAUQ,OACC,IAArCzC,KAAKe,MAAMkB,UAAUqB,KAAKV,QAC5B5C,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAM,MAEC,IAAR0B,GACFxC,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAAK,GACrCtD,KAAKc,IAAIiB,WAAU,KAEnB/B,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAAKd,EAAM,GAC3CxC,KAAKc,IAAIiB,WAAU,IAIzB,OAAO,EACT,IAAK,YACH,QAAI/B,KAAKe,UACHf,KAAKc,IAAImB,UAAUQ,MAAQ,KAC7BzC,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAC9BtD,KAAKc,IAAImB,UAAUQ,MAAQ,GAE7BzC,KAAKc,IAAIiB,WAAU,IACZ,IAGb,IAAK,aACH,GAAmB,OAAf/B,KAAKe,MAAgB,CACvB,IAAIwC,EAAIvD,KAAKe,MAAMkB,UAAUqB,KAAKV,OAClC,QAAI5C,KAAKc,IAAImB,UAAUQ,MAAQc,EAAI,KACjCvD,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAC9BtD,KAAKc,IAAImB,UAAUQ,MAAQ,GAE7BzC,KAAKc,IAAIiB,WAAU,IACZ,GAEJ,OAAO,EAChB,IAAK,UACH,SAAI/B,KAAKe,QAASf,KAAKgB,UACjBhB,KAAKe,MAAMkB,UAAUQ,MAAQ,KAC/BzC,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAC/B1D,KAAKe,MAAMkB,UAAUQ,MAAQ,GAE/BzC,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAAKtD,KAAKc,IAAImB,UAAUQ,OACxDzC,KAAKc,IAAIiB,WAAU,IACZ,IAGb,IAAK,YACH,GAAI/B,KAAKe,OAASf,KAAKgB,KAAM,CAC3B,IAAIuC,EAAIvD,KAAKgB,KAAKiB,UAAUyB,OAAOd,OACnC,QAAI5C,KAAKe,MAAMkB,UAAUQ,MAAQc,EAAI,KACnCvD,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAC/B1D,KAAKe,MAAMkB,UAAUQ,MAAQ,GAE/BzC,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAAKtD,KAAKc,IAAImB,UAAUQ,OACxDzC,KAAKc,IAAIiB,WAAU,IACZ,GAEJ,OAAO,EAChB,QACE,OAAO,K,+BAINV,GAA6B,IAAD,EACnC,GAAmB,OAAfrB,KAAKe,MA6IF,OAAO,EA5IZ,OAAQM,EAAGkB,KACT,IAAK,QAOH,OANIvC,KAAKe,MAAMkB,UAAUqB,KAAKV,QAAU,GACtC5C,KAAKe,MAAMyC,OAAOxD,KAAKe,MAAMkB,UAAUqB,KAAKV,QAE9C5C,KAAKc,IAAMd,KAAKe,MAAMkB,UAAUqB,KAAK,GACrCtD,KAAKc,IAAIiB,WAAU,GACnB/B,KAAKe,MAAMgB,WAAU,IACd,EACT,IAAK,SAIH,OAHA/B,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQ,KACb,UAAAf,KAAKgB,YAAL,SAAWe,WAAU,IACd,EACT,IAAK,IAGH,OAFA/B,KAAKe,MAAMyC,OAAOxD,KAAKe,MAAMkB,UAAUqB,KAAKV,QAC5CvB,EAAGQ,aAAc,GACV,EACT,IAAK,IAKH,OAJI7B,KAAKgB,OACPhB,KAAKgB,KAAK2C,SAAS,GACnB3D,KAAKmC,YAAYnC,KAAKgB,KAAKiB,UAAUyB,OAAO,MAEvC,EACT,IAAK,IACH,GAAI1D,KAAKgB,KAAM,CACb,IAAIwB,EAAMxC,KAAKe,MAAMkB,UAAUQ,MAC/BzC,KAAKgB,KAAK2C,SAASnB,EAAM,GACzBxC,KAAKmC,YAAYnC,KAAKgB,KAAKiB,UAAUyB,OAAOlB,EAAM,IAEpD,OAAO,EACT,IAAK,IAOH,OANIxC,KAAKgB,OACPhB,KAAKgB,KAAK2C,SAAS3D,KAAKgB,KAAKiB,UAAUyB,OAAOd,QAC9C5C,KAAKmC,YACHnC,KAAKgB,KAAKiB,UAAUyB,OAAO1D,KAAKgB,KAAKiB,UAAUyB,OAAOd,OAAS,MAG5D,EACT,IAAK,YACH,GAAI5C,KAAKgB,KAAM,CACb,IAAIwB,EAAMxC,KAAKe,MAAMkB,UAAUQ,MAC/BzC,KAAKgB,KAAK4C,YAAY5D,KAAKe,MAAMkB,UAAUQ,OACD,IAAtCzC,KAAKgB,KAAKiB,UAAUyB,OAAOd,QAC7B5C,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQ,MAED,IAARyB,GACFxC,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAAO,GACxC1D,KAAKe,MAAMgB,WAAU,KAErB/B,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAAOlB,EAAM,GAC9CxC,KAAKe,MAAMgB,WAAU,IAI3B,OAAO,EACT,IAAK,UACH,QAAI/B,KAAKgB,OACHhB,KAAKe,MAAMkB,UAAUQ,MAAQ,GAC/BzC,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAC/B1D,KAAKe,MAAMkB,UAAUQ,MAAQ,GAE/BzC,KAAKe,MAAMgB,WAAU,IACd,KACE/B,KAAKiB,OACVjB,KAAKgB,KAAKiB,UAAUQ,MAAQ,GAC9BzC,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAC9B7D,KAAKgB,KAAKiB,UAAUQ,MAAQ,GAE9BzC,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAC/B1D,KAAKgB,KAAKiB,UAAUyB,OAAOd,OAAS,GAEtC5C,KAAKe,MAAMgB,WAAU,IACd,KACE/B,KAAKkB,WACVlB,KAAKiB,KAAKgB,UAAUQ,MAAQ,IAC9BzC,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAClC9D,KAAKiB,KAAKgB,UAAUQ,MAAQ,GAE9BzC,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAC9B7D,KAAKiB,KAAKgB,UAAU4B,MAAMjB,OAAS,GAErC5C,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAC/B1D,KAAKgB,KAAKiB,UAAUyB,OAAOd,OAAS,GAEtC5C,KAAKe,MAAMgB,WAAU,IACd,MAKjB,IAAK,YACH,GAAkB,OAAd/B,KAAKgB,KAAe,CACtB,IAAIuC,EAAIvD,KAAKgB,KAAKiB,UAAUyB,OAAOd,OACnC,OAAI5C,KAAKe,MAAMkB,UAAUQ,MAAQc,EAAI,GACnCvD,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAC/B1D,KAAKe,MAAMkB,UAAUQ,MAAQ,GAE/BzC,KAAKe,MAAMgB,WAAU,IACd,KACE/B,KAAKiB,OAEZjB,KAAKgB,KAAKiB,UAAUQ,MACpBzC,KAAKiB,KAAKgB,UAAU4B,MAAMjB,OAAS,GAEnC5C,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAC9B7D,KAAKgB,KAAKiB,UAAUQ,MAAQ,GAE9BzC,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAAO,GACxC1D,KAAKe,MAAMgB,WAAU,IACd,KACE/B,KAAKkB,WAEZlB,KAAKiB,KAAKgB,UAAUQ,MACpBzC,KAAKkB,SAASe,UAAU6B,MAAMlB,OAAS,IAEvC5C,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAClC9D,KAAKiB,KAAKgB,UAAUQ,MAAQ,GAE9BzC,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAAM,GACtC7D,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAAO,GACxC1D,KAAKe,MAAMgB,WAAU,IACd,KAIR,OAAO,EAChB,QACE,OAAO,K,8BAIPV,GAA6B,IAAD,EAClC,GAAkB,OAAdrB,KAAKgB,KA6GF,OAAO,EA5GZ,OAAQK,EAAGkB,KACT,IAAK,QAOH,OANIvC,KAAKgB,KAAKiB,UAAUyB,OAAOd,QAAU,GACvC5C,KAAKgB,KAAKiB,UAAU0B,SAAS3D,KAAKgB,KAAKiB,UAAUyB,OAAOd,QAE1D5C,KAAKe,MAAQf,KAAKgB,KAAKiB,UAAUyB,OAAO,GACxC1D,KAAKe,MAAMgB,WAAU,GACrB/B,KAAKgB,KAAKe,WAAU,IACb,EACT,IAAK,SAIH,OAHA/B,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAO,KACZ,UAAAhB,KAAKiB,YAAL,SAAWc,WAAU,IACd,EACT,IAAK,IAEH,OADA/B,KAAKgB,KAAK2C,SAAS3D,KAAKgB,KAAKiB,UAAUyB,OAAOd,SACvC,EACT,IAAK,IAKH,OAJI5C,KAAKiB,OACPjB,KAAKiB,KAAK8C,QAAQ,GAClB/D,KAAKoC,WAAWpC,KAAKiB,KAAKgB,UAAU4B,MAAM,MAErC,EACT,IAAK,IACH,GAAI7D,KAAKiB,KAAM,CACb,IAAIuB,EAAMxC,KAAKgB,KAAKiB,UAAUQ,MAC9BzC,KAAKiB,KAAK8C,QAAQvB,EAAM,GACxBxC,KAAKoC,WAAWpC,KAAKiB,KAAKgB,UAAU4B,MAAMrB,EAAM,IAElD,OAAO,EACT,IAAK,IAOH,OANIxC,KAAKiB,OACPjB,KAAKiB,KAAK8C,QAAQ/D,KAAKiB,KAAKgB,UAAU4B,MAAMjB,QAC5C5C,KAAKoC,WACHpC,KAAKiB,KAAKgB,UAAU4B,MAAM7D,KAAKiB,KAAKgB,UAAU4B,MAAMjB,OAAS,MAG1D,EACT,IAAK,YACH,GAAI5C,KAAKiB,KAAM,CACb,IAAIuB,EAAMxC,KAAKgB,KAAKiB,UAAUQ,MAC9BzC,KAAKiB,KAAK+C,WAAWhE,KAAKgB,KAAKiB,UAAUQ,OACA,IAArCzC,KAAKiB,KAAKgB,UAAU4B,MAAMjB,QAC5B5C,KAAKiB,KAAKc,WAAU,GACpB/B,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAO,MAEA,IAARwB,GACFxC,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAAM,GACtC7D,KAAKgB,KAAKe,WAAU,KAEpB/B,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAAMrB,EAAM,GAC5CxC,KAAKgB,KAAKe,WAAU,IAI1B,OAAO,EACT,IAAK,UACH,QAAI/B,KAAKiB,OACHjB,KAAKgB,KAAKiB,UAAUQ,MAAQ,GAC9BzC,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAC9B7D,KAAKgB,KAAKiB,UAAUQ,MAAQ,GAE9BzC,KAAKgB,KAAKe,WAAU,IACb,KACE/B,KAAKkB,WACVlB,KAAKiB,KAAKgB,UAAUQ,MAAQ,IAC9BzC,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAClC9D,KAAKiB,KAAKgB,UAAUQ,MAAQ,GAE9BzC,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAC9B7D,KAAKiB,KAAKgB,UAAU4B,MAAMjB,OAAS,GAErC5C,KAAKgB,KAAKe,WAAU,IACb,KAIf,IAAK,YACH,GAAkB,OAAd/B,KAAKiB,KAAe,CACtB,IAAIsC,EAAIvD,KAAKiB,KAAKgB,UAAU4B,MAAMjB,OAClC,OAAI5C,KAAKgB,KAAKiB,UAAUQ,MAAQc,EAAI,GAClCvD,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAC9B7D,KAAKgB,KAAKiB,UAAUQ,MAAQ,GAE9BzC,KAAKgB,KAAKe,WAAU,IACb,KACE/B,KAAKkB,WAEZlB,KAAKiB,KAAKgB,UAAUQ,MACpBzC,KAAKkB,SAASe,UAAU6B,MAAMlB,OAAS,IAEvC5C,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAClC9D,KAAKiB,KAAKgB,UAAUQ,MAAQ,GAE9BzC,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAAM,GACtC7D,KAAKgB,KAAKe,WAAU,IACb,IAGN,OAAO,EAChB,QACE,OAAO,K,8BAIPV,GAA6B,IAAD,EAClC,GAAkB,OAAdrB,KAAKiB,KAsFF,OAAO,EArFZ,OAAQI,EAAGkB,KACT,IAAK,QAOH,OANIvC,KAAKiB,KAAKgB,UAAU4B,MAAMjB,QAAU,GACtC5C,KAAKiB,KAAKgB,UAAU8B,QAAQ/D,KAAKiB,KAAKgB,UAAU4B,MAAMjB,QAExD5C,KAAKgB,KAAOhB,KAAKiB,KAAKgB,UAAU4B,MAAM,GACtC7D,KAAKgB,KAAKe,WAAU,GACpB/B,KAAKiB,KAAKc,WAAU,IACb,EACT,IAAK,SAIH,OAHA/B,KAAKiB,KAAKc,WAAU,GACpB/B,KAAKiB,KAAO,KACZ,UAAAjB,KAAKkB,gBAAL,SAAea,WAAU,IAClB,EACT,IAAK,IAEH,OADA/B,KAAKiB,KAAK8C,QAAQ/D,KAAKiB,KAAKgB,UAAU4B,MAAMjB,SACrC,EACT,IAAK,IAKH,OAJI5C,KAAKkB,WACPlB,KAAKkB,SAAS+C,QAAQ,GACtBjE,KAAKqC,WAAWrC,KAAKkB,SAASe,UAAU6B,MAAM,MAEzC,EACT,IAAK,IACH,GAAI9D,KAAKkB,SAAU,CACjB,IAAIsB,EAAMxC,KAAKiB,KAAKgB,UAAUQ,MAC9BzC,KAAKkB,SAAS+C,QAAQzB,EAAM,GAC5BxC,KAAKqC,WAAWrC,KAAKkB,SAASe,UAAU6B,MAAMtB,EAAM,IAEtD,OAAO,EACT,IAAK,IASH,OARIxC,KAAKkB,WACPlB,KAAKkB,SAAS+C,QAAQjE,KAAKkB,SAASe,UAAU6B,MAAMlB,QACpD5C,KAAKqC,WACHrC,KAAKkB,SAASe,UAAU6B,MACtB9D,KAAKkB,SAASe,UAAU6B,MAAMlB,OAAS,MAItC,EACT,IAAK,YACH,GAAI5C,KAAKkB,SAAU,CAAC,IAAD,EACbsB,EAAMxC,KAAKiB,KAAKgB,UAAUQ,MAC9B,UAAAzC,KAAKkB,gBAAL,SAAegD,WAAWlE,KAAKiB,KAAKgB,UAAUQ,OACD,IAAzCzC,KAAKkB,SAASe,UAAU6B,MAAMlB,QAChC5C,KAAKkB,SAASa,WAAU,GACxB/B,KAAKiB,KAAKc,WAAU,GACpB/B,KAAKiB,KAAO,MAEA,IAARuB,GACFxC,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAAM,GAC1C9D,KAAKiB,KAAKc,WAAU,KAEpB/B,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAAMtB,EAAM,GAChDxC,KAAKiB,KAAKc,WAAU,IAI1B,OAAO,EACT,IAAK,UACH,QAAI/B,KAAKkB,aACHlB,KAAKiB,KAAKgB,UAAUQ,MAAQ,KAC9BzC,KAAKiB,KAAKc,WAAU,GACpB/B,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAClC9D,KAAKiB,KAAKgB,UAAUQ,MAAQ,GAE9BzC,KAAKiB,KAAKc,WAAU,IACb,IAGb,IAAK,YACH,GAAsB,OAAlB/B,KAAKkB,SAAmB,CAC1B,IAAIqC,EAAIvD,KAAKkB,SAASe,UAAU6B,MAAMlB,OACtC,QAAI5C,KAAKiB,KAAKgB,UAAUQ,MAAQc,EAAI,KAClCvD,KAAKiB,KAAKc,WAAU,GACpB/B,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAClC9D,KAAKiB,KAAKgB,UAAUQ,MAAQ,GAE9BzC,KAAKiB,KAAKc,WAAU,IACb,GAEJ,OAAO,EAChB,QACE,OAAO,K,kCAIHV,GACV,GAAsB,OAAlBrB,KAAKkB,SAmBF,OAAO,EAlBZ,OAAQG,EAAGkB,KACT,IAAK,QASH,OARIvC,KAAKkB,SAASe,UAAU6B,MAAMlB,QAAU,GAC1C5C,KAAKkB,SACFe,UACAgC,QAAQjE,KAAKkB,SAASe,UAAU6B,MAAMlB,QAE3C5C,KAAKiB,KAAOjB,KAAKkB,SAASe,UAAU6B,MAAM,GAC1C9D,KAAKiB,KAAKc,WAAU,GACpB/B,KAAKkB,SAASa,WAAU,IACjB,EACT,IAAK,IAGH,OAFA/B,KAAKkB,SAAS+C,QAAQjE,KAAKkB,SAASe,UAAU6B,MAAMlB,QACpDvB,EAAGQ,aAAc,GACV,EACT,QACE,OAAO,O,KAnxBXlB,EAQGwD,SAAW,IAAIxD,EAixBTA,I,kCAAAA,ICv0BFyD,GAAb,aAQE,WACEtF,EACAwB,EACAD,EACAQ,EACA4B,EACA4B,GACC,yBAdMA,YAcP,8LACArE,KAAKlB,EAAIA,EACTkB,KAAKM,EAAIA,EACTN,KAAKK,EAAIA,EACTL,KAAKa,KAAOA,EACZb,KAAKyC,MAAQA,EACbzC,KAAKqE,OAASA,EArBlB,sDAuBYvC,GACR9B,KAAKsE,SAAWxC,IAxBpB,6BA0BSxB,GACLN,KAAKM,EAAIA,IA3Bb,kCA6BczB,GACVmB,KAAKK,GAAKxB,IA9Bd,iCAgCa0E,GACTvD,KAAKa,KAAK0C,GAAKA,EACXvD,KAAKa,KAAK0C,EAAI,IAChBvD,KAAKa,KAAK0C,EAAI,KAnCpB,sCAsCkBgB,GACdvE,KAAKa,KAAK0D,GAAKA,EACXvE,KAAKa,KAAK0D,EAAI,IAChBvE,KAAKa,KAAK0D,EAAI,KAzCpB,gCA6CI,OAAOvE,SA7CX,2CAEGwE,KAFH,yEAEyB,KAFzB,kCAGGA,KAHH,iGAIGA,KAJH,6FAKGA,KALH,wEAK0B,MAL1B,+BAMGA,KANH,wEAM0B,MAN1B,+BAOGA,KAPH,yEAO0B,KAP1B,GAiDaC,GAAb,aA8JE,WAAYC,EAAU5D,EAAU0B,GAAc,yBA7JrC6B,YA6JoC,iOAC3CrE,KAAKqE,OAASvD,EAAIuD,OAClBrE,KAAKc,IAAMA,EACXd,KAAKyC,MAAQD,EACbxC,KAAK2E,OAAOD,GAlKhB,+CASI,IAAIE,GAAM,EAMV,OALA5E,KAAK2C,SAASkC,SAAQ,SAACC,GACR,KAATA,EAAGhG,IACL8F,GAAM,MAGHA,EAAM5E,KAAKqE,OAAO3G,YAAc,EAAI,IAf/C,2BAkBI,IAAI+C,EAAI,IAAId,EAMZ,OALAc,EAAEb,EAAI,EACNa,EAAEZ,GAAKkF,KAAKC,IAAI,EAAGhF,KAAKuD,GACxB9C,EAAEZ,GAAKG,KAAKH,EACZY,EAAEZ,GAAKkF,KAAKC,IAAI,EAAGhF,KAAKuE,GACxB9D,EAAEb,GAAKmF,KAAKC,IAAI,EAAGhF,KAAKuE,EAAI,GAAK,EAC1B9D,EAAEC,aAxBb,6BA0BoC,IAAD,OAC3BD,EAAc,GACdwE,EAAK,EAsBT,OArBAjF,KAAK2C,SAASkC,SAAQ,SAACC,EAAItC,GACzB,GAAIsC,EAAGzE,EAAI,GACG,IAARmC,EAEF,IADA,IAAI0C,GAAKJ,EAAGzE,EACL6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBoH,GAAMnG,EAIZ2B,EAAE0E,KAAKF,GACP,IAAIpG,EAAI,EAAKwF,OAAO/G,WAEpB,GADA2H,GAAMpG,EACFiG,EAAGzE,EAAI,EAET,IADA,IAAI6E,EAAIJ,EAAGzE,EACJ6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBoH,GAAMnG,MAIL2B,IAlDX,8BAoDqC,IAAD,OAC5BA,EAAc,GACd2E,EAAK,EACLH,EAAK,EACLI,EAAK,EAuCT,OAtCAA,GAAMrF,KAAKuD,EAAIvD,KAAKqE,OAAOxG,SAC3BmC,KAAK2C,SAASkC,SAAQ,SAACC,EAAItC,GACzB,GAAIsC,EAAGzE,EAAI,EAAG,CACZ,GAAY,IAARmC,EAEF,IADA,IAAI0C,GAAKJ,EAAGzE,EACL6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBwH,GAAMvG,EAAI,EACV2B,EAAE0E,MAAME,GACRA,GAAMvG,EAAI,EAGd,GAAY,IAAR0D,EAEF,IADA,IAAI0C,GAAKJ,EAAGzE,EACL6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBuH,GAAMtG,EAAI,EACV2B,EAAE0E,KAAKC,GACPA,GAAMtG,EAAI,EACVmG,GAAMnG,GAIZ,EAAKwG,OAAOH,KAAKF,GACjB,IAAIpG,EAAI,EAAKwF,OAAO/G,WAGpB,GAFA2H,GAAMpG,EACNuG,GAAMvG,EACFiG,EAAGzE,EAAI,EAET,IADA,IAAI6E,EAAIJ,EAAGzE,EACJ6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBuH,GAAMtG,EAAI,EACV2B,EAAE0E,KAAKC,GACPA,GAAMtG,EAAI,EACVmG,GAAMnG,MAIL2B,IA/FX,kCAmGI,IADA,IAAIA,EAAc,GACTyE,EAAI,EAAGA,EAAIlF,KAAKuE,IAAKW,EAC5BzE,EAAE0E,KACAnF,KAAKuF,GAAKvF,KAAKqE,OAAO9G,WAAa2H,EAAI,IAASlF,KAAKqE,OAAOvG,cAGhE,OAAO2C,IAxGX,4BA2GI,OAAOT,KAAKuF,GAAKvF,KAAKqE,OAAO9G,UAAYyC,KAAKuE,EAAIvE,KAAKqE,OAAOvG,eA3GlE,gCA6GqC,IAAD,OAC5Be,EAAI,EAoBR,OAnBAmB,KAAK2C,SAASkC,SAAQ,SAACC,EAAItC,GACzB,GAAIsC,EAAGzE,EAAI,GACG,IAARmC,EAEF,IADA,IAAI0C,GAAKJ,EAAGzE,EACL6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBgB,GAAKC,EAKX,GADAD,GAAK,EAAKwF,OAAO/G,WACbwH,EAAGzE,EAAI,EAET,IADA,IAAI6E,EAAIJ,EAAGzE,EACJ6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBgB,GAAKC,MAIJD,IAlIX,6BAqII,OAAOmB,KAAKc,IAAI0E,iBArIpB,wBAwII,OAAOxF,KAAKc,IAAI2E,OAAOzF,KAAKyC,SAxIhC,sCA0I2C,IAAD,OAClC4C,EAAK,EAaT,OAZAA,GAAMrF,KAAKuD,EAAIvD,KAAKqE,OAAOxG,SAC3BmC,KAAK2C,SAASkC,SAAQ,SAACC,EAAItC,GACzB,GAAIsC,EAAGzE,EAAI,GACG,IAARmC,EAEF,IADA,IAAI0C,GAAKJ,EAAGzE,EACL6E,EAAI,IAAKA,EAAG,CACjB,IAAIpG,EAAI,EAAKuF,OAAOxG,SACpBwH,GAAMvG,MAKPuG,IAxJX,mCA2JI,OAAOrF,KAAKc,IAAI4E,yBA3JpB,+CAoKY5D,GACR9B,KAAKsE,SAAWxC,IArKpB,iCAuKayB,GACTvD,KAAKuD,GAAKA,EACNvD,KAAKuD,EAAI,IACXvD,KAAKuD,EAAI,KA1Kf,sCA6KkBgB,GACdvE,KAAKuE,GAAKA,EACNvE,KAAKuE,EAAI,IACXvE,KAAKuE,EAAI,KAhLf,iCAmLa9B,GACTzC,KAAK2C,SAAW3C,KAAK2C,SAASgD,OAC5BlD,EACA,EACA,IAAI2B,EAAQ,GAAI,IAAK,EAAGpE,KAAMA,KAAK2C,SAASC,OAAQ5C,KAAKqE,SAE3DrE,KAAK2C,SAASkC,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OAzLnD,oCA2LgBC,GACZzC,KAAK2C,SAAW3C,KAAK2C,SAASiD,QAAO,SAACd,EAAItC,GAAL,OAAaA,IAAQC,KAC1DzC,KAAK2C,SAASkC,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OA7LnD,gCAgMI,OAAOxC,OAhMX,6BAmMS0E,GAAiB,IAAD,OACrB,QAAYmB,IAARnB,EAAEpE,EAAiB,CACrB,IAAIA,EAAYoE,EAAEpE,EACdR,EAAMQ,EAAEP,OAAO,KACf+F,EAAK,GACLC,EAAK,IACI,IAATjG,GACFgG,EAAKxF,EACLyF,EAAK,QAELD,EAAKxF,EAAEJ,OAAO,EAAGJ,GACjBiG,EAAKzF,EAAEJ,OAAOJ,EAAM,IAEbgG,EAAGE,MAAM,KACfnB,SAAQ,SAACC,EAAItC,GACd,IAAK,IAAI0C,EAAI,EAAGA,EAAIJ,EAAGlC,SAAUsC,EAC/B,GACGJ,EAAGmB,WAAWf,IAAM,IAAMJ,EAAGmB,WAAWf,IAAM,IAC1B,KAArBJ,EAAGmB,WAAWf,GACd,CACA,IAAIpG,EAAIgG,EAAG5E,OAAO,EAAGgF,GACjB5E,EAAIwE,EAAGoB,OAAOhB,GACd7E,EAAIyE,EAAG5E,OAAOgF,EAAI,GAAGtC,OACf,IAANvC,GAAgC,MAArByE,EAAGoB,OAAOhB,EAAI,KAC3B7E,GAAKA,GAEP,EAAKsC,SAASwC,KAAK,IAAIf,EAAQtF,EAAGwB,EAAGD,EAAG,EAAMmC,EAAK,EAAK6B,SACxD,UAIN,IAAI8B,EAAKJ,EAAGC,MAAM,KACA,IAAdG,EAAGvD,QACL5C,KAAKuD,EAAItD,SAASkG,EAAG,IACrBnG,KAAKuE,EAAItE,SAASkG,EAAG,IACrBnG,KAAKH,EAAII,SAASkG,EAAG,KACE,IAAdA,EAAGvD,QACZ5C,KAAKuD,EAAItD,SAASkG,EAAG,IACrBnG,KAAKuE,EAAItE,SAASkG,EAAG,IACrBnG,KAAKH,EAAI,GACc,IAAdsG,EAAGvD,QACZ5C,KAAKuD,EAAItD,SAASkG,EAAG,IACrBnG,KAAKuE,EAAI,EACTvE,KAAKH,EAAI,IAETG,KAAKuD,EAAI,EACTvD,KAAKuE,EAAI,EACTvE,KAAKH,EAAI,MAlPjB,6BAsPiB,IAAD,OACRiG,EAAa,GAmBjB,OAlBA9F,KAAK2C,SAASkC,SAAQ,SAACC,EAAItC,GACzB,IAAInC,EAAI,GACR,GAAIyE,EAAGzE,EAAI,EACT,IAAK,IAAI6E,EAAI,EAAGA,EAAIJ,EAAGzE,IAAK6E,EAC1B7E,GAAK,SAGP,IAAK,IAAI6E,EAAI,EAAGA,GAAKJ,EAAGzE,IAAK6E,EAC3B7E,GAAK,IAGLmC,EAAM,GAAK,EAAKG,SAASC,OAC3BkD,GAAE,UAAOhB,EAAGhG,GAAV,OAAcgG,EAAGxE,GAAjB,OAAqBD,GAEvByF,GAAE,UAAOhB,EAAGhG,GAAV,OAAcgG,EAAGxE,GAAjB,OAAqBD,EAArB,QAIC,CAAEC,EADJ,UAAMwF,EAAN,YAAY9F,KAAKuD,EAAjB,YAAsBvD,KAAKuE,QAzQpC,wCAEGC,KAFH,+FAGGA,KAHH,oGAIGA,KAJH,wEAIoC,MAJpC,+BAKGA,KALH,yEAK0B,KAL1B,+BAMGA,KANH,yEAM0B,KAN1B,+BAOGA,KAPH,yEAO0B,KAP1B,8BAQG4B,KARH,+FAiBGA,KAjBH,mGA0BGA,KA1BH,sGAoDGA,KApDH,2GAiGGA,KAjGH,yGA0GGA,KA1GH,uGA6GGA,KA7GH,wGAoIGA,KApIH,gGAuIGA,KAvIH,yGA0IGA,KA1IH,oHA0JGA,KA1JH,+GA6JG5B,KA7JH,yEA6JkC,KA7JlC,G,oGA4UM6B,GADLC,Y,yKAEW,IAAD,OACP,OACE,uBACEnH,UAAW,qBACXC,UAAW,eAAyBY,KAAKuG,MAAMxH,EAAI,IACnDM,MAAOW,KAAKuG,MAAM3H,EAClBU,OAAQU,KAAKuG,MAAM1H,EACnB2H,QAAS,WACP7F,EAASwD,SAASrB,cAAc,EAAKyD,MAAME,WAG7C,0BACEC,WAAY1G,KAAKuG,MAAME,QAAQpC,OAAO5G,eACtCkJ,SAAU3G,KAAKuG,MAAME,QAAQpC,OAAO7G,aACpC4B,UAAW,aAAeY,KAAKuG,MAAMhB,GAA1B,OAEVvF,KAAKuG,MAAME,QAAQnG,GAEtB,0BACEoG,WAAY1G,KAAKuG,MAAME,QAAQpC,OAAO5G,eACtCkJ,SAAU3G,KAAKuG,MAAME,QAAQpC,OAAO3G,YACpC0B,UACE,gBAGCY,KAAKuG,MAAME,QAAQpC,OAAO3G,YACzBsC,KAAKuG,MAAME,QAAQpC,OAAO/G,YAC5B,KAzFsB,CAC9BsJ,EAAG,IACHC,EAAG,IACHC,GAAI,IACJC,GAAI,IACJC,EAAG,KAuFUhH,KAAKuG,MAAME,QAAQ3H,IArFnB,IAuFT,kBAAC,EAAD,CACEA,EAAG,EACHC,GAAIiB,KAAKuG,MAAM1H,EACfD,EAAGoB,KAAKuG,MAAM3H,EACdC,EAAGmB,KAAKuG,MAAME,QAAQpC,OAAO7G,aAC7BwB,MAAO,qBACPC,KAAMe,KAAKuG,MAAME,QAAQnC,gB,GAvCT2C,IAAMC,a,EAoFjBC,GAtCdb,Y,yKAEW,IAAD,OACHtH,EAAQ,YACZ,OACE,uBACEG,UAAWH,EACXI,UAAW,aAAeY,KAAKuG,MAAM1F,KAAK/B,EAA/B,MACXO,MAAOW,KAAKuG,MAAM1F,KAAKxB,MACvBC,OAAQU,KAAKuG,MAAM1F,KAAKvB,OACxBkH,QAAS,WACP7F,EAASwD,SAASnC,WAAW,EAAKuE,MAAM1F,QAG1C,kBAAC,EAAD,CACEjC,EAAGoB,KAAKuG,MAAM1F,KAAKxB,MACnBR,EAAGmB,KAAKuG,MAAM1F,KAAKvB,OAASU,KAAKuG,MAAM1F,KAAKuG,aAC5CpI,MAAOA,EACPC,KAAMe,KAAKuG,MAAM1F,KAAKyD,SACtBpF,MAAO,SAERc,KAAKuG,MAAM1F,KAAK8B,SAAS0E,KAAI,SAACvC,EAAItC,GAAL,OAC5B,kBAAC,GAAD,CACED,IAAKC,EACL+C,GAAI,EAAKgB,MAAM1F,KAAK0E,GACpBxG,EAAG,EAAKwH,MAAM1F,KAAKvB,OAAS,EAAKiH,MAAM1F,KAAKyE,OAAO9C,GACnD5D,EAAG,EAAK2H,MAAM1F,KAAKxB,MACnBR,EAAG,GACH4H,QAAS3B,OA7HrB,SAAoBjE,EAAY7B,GAC9B,OACE,uBAAGG,UAAWH,EAAQ,iBACnB6B,EAAKyG,QAAQD,KAAI,SAACvC,EAAItC,GAAL,OAChB,4BACED,IAAKC,EACL/B,EAAGI,EAAKwD,OAAOtG,WACf0B,KAAK,QACLL,UACE,cACCyB,EAAK0E,GAAK1E,EAAKwD,OAAO9G,UAAY,GACnC,KACCsD,EAAKvB,OAASwF,EAAKjE,EAAKwD,OAAOxG,SAAW,GAC3C,UAmHH0J,CAAWvH,KAAKuG,MAAM1F,KAAM7B,GA3GrC,SAAmB6B,EAAY7B,GAC7B,OACE,uBAAGG,UAAWH,EAAQ,gBACnB6B,EAAK2G,YAAYH,KAAI,SAACvC,EAAItC,GAAL,OACpB,4BACED,IAAKC,EACL/B,EAAGI,EAAKwD,OAAOtG,WACf0B,KAAK,QACLL,UACE,aACA0F,EACA,KACCjE,EAAKvB,OAASuB,EAAKwD,OAAO/G,WAAa,GACxC,UA+FHmK,CAAUzH,KAAKuG,MAAM1F,KAAM7B,Q,GA/BbiI,IAAMC,a,WCrahBQ,IAAb,aAwFE,WAAYhD,EAASjC,EAAe1B,EAAcsD,GAAqB,yBAvF9DA,YAuF6D,yIACpErE,KAAKyC,MAAQA,EACbzC,KAAKe,MAAQA,EACbf,KAAKqE,OAASA,EACdrE,KAAK2E,OAAOD,GA5FhB,kDAOI,OAAO1E,KAAKe,MAAM4G,UAAU3H,KAAKyC,SAPrC,6BAUI,IAAI5D,EAAI,EAKR,OAJAmB,KAAKoD,MAAMyB,SAAQ,SAACC,GAClB,IAAIlF,EAAIkF,EAAGxF,OAASwF,EAAGsC,aACvBvI,EAAIe,EAAIf,EAAIe,EAAIf,KAEXA,IAfX,wBAkBI,OAAOmB,KAAKe,MAAM6G,MAAM5H,KAAKyC,SAlBjC,wBAqBI,OAAO,IArBX,gCAwBI,OAAOzC,KAAKoD,MAAMiE,KAAI,SAACvC,GAAD,OAAQA,EAAG+C,UAxBrC,mCA2BI,OAAO7H,KAAK8H,UACTC,QAAO,SAAC5H,EAAGC,GAAJ,OAAUD,EAAE6H,KAAK5H,KAAI,IAAIT,GAChCqI,MAAK,IAAIrI,GAAWsI,KAAK,EAAG,MA7BnC,iCAgCI,OAAOjI,KAAKoD,MAAMiE,KAAI,SAACvC,GAAD,OAAQA,EAAGzF,WAhCrC,6BAkCoC,IAAD,OAC3B6I,EAAQlI,KAAKX,MAAQW,KAAKmI,cAC1BC,GAAO,IAAIzI,GAAWsI,KAAKC,EAAO,GAAGG,OAAOrI,KAAKsI,cACjDxJ,EAAIsJ,EAAKG,WACb,OAAOvI,KAAKwI,WAAWnB,KAAI,SAACvC,EAAItC,GAC9B,IAAI/B,EAAI3B,EAER,OADAA,GAAKgG,EAAK,EAAKgD,UAAUtF,GAAKiG,SAASL,GAAMG,WACtC9H,OAzCb,wCA6CI,OAAOsE,KAAK2D,IAAL,MAAA3D,KAAI,YAAQ/E,KAAKoD,MAAMiE,KAAI,SAACvC,GAAD,OAAQA,EAAG6D,iBA7CjD,qCAgDI,OAAO3I,KAAKe,MAAMyE,iBAhDtB,8CAmDI,OAAOT,KAAK2D,IAAL,MAAA3D,KAAI,YAAQ/E,KAAKoD,MAAMiE,KAAI,SAACvC,GAAD,OAAQA,EAAG8D,uBAnDjD,2CAsDI,OAAO5I,KAAKe,MAAM2E,uBAtDtB,oCA8DI,IANyC,IAAD,OACpCjF,EAIE,GALkC,WAM/ByE,GACP,IAAIpG,EAAI,EACJgD,EAAI,EACJ+G,GAAK,EAYT,GAXA,EAAKzF,MAAMyB,SAAQ,SAACC,EAAItC,GAClBsC,EAAGvB,EAAI2B,GACT2D,EAAIrG,EACJ1D,MAEIgD,GAAK+G,GAAGpI,EAAE0E,KAAK,CAAEpG,EAAGmG,EAAGpD,EAAGA,EAAG+G,EAAGA,IACpC/G,EAAIU,EAAM,EACVqG,EAAIrG,MAGJV,GAAK+G,GAAGpI,EAAE0E,KAAK,CAAEpG,EAAGmG,EAAGpD,EAAGA,EAAG+G,EAAGA,IAC1B,IAAN/J,EACF,eAhBKoG,EAAI,KAAOA,EAAG,gBAAdA,GAgBL,MAGJ,OAAOzE,IAjFX,oCAoFI,IAAI7B,EAAI,EAER,OADAoB,KAAKoD,MAAMyB,SAAQ,SAACC,GAAD,OAASlG,GAAKkG,EAAGzF,SAC7BT,MAtFX,6CA8FU6D,GACNzC,KAAKoD,MAAQpD,KAAKoD,MAAMuC,OACtBlD,EACA,EACA,IAAIgC,EAAK,CAAEnE,EAAG,KAAON,KAAMA,KAAKoD,MAAMR,SAExC5C,KAAKoD,MAAMyB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OApGhD,iCAsGaC,GACTzC,KAAKoD,MAAQpD,KAAKoD,MAAMwC,QAAO,SAACd,EAAItC,GAAL,OAAaA,IAAQC,KACpDzC,KAAKoD,MAAMyB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OAxGhD,gCA0GY0C,GACRlF,KAAKsE,SAAWY,IA3GpB,gCA8GI,OAAOlF,OA9GX,6BAgHS0E,GAAgB,IAAD,YACJmB,IAAZnB,EAAEtB,OACJsB,EAAEtB,MAAMyB,SAAQ,SAACC,EAAWtC,GAC1B,EAAKY,MAAM+B,KAAK,IAAIV,EAAKK,EAAI,EAAMtC,SAnH3C,6BAyHI,MAAO,CAAEY,MADYpD,KAAKoD,MAAMiE,KAAI,SAACvC,GAAD,OAAQA,EAAGgE,eAxHnD,wCAEGtE,KAFH,iGAGGA,KAHH,iGAIGA,KAJH,wEAI8B,MAJ9B,sCAKGA,KALH,yEAKkC,KALlC,iCAMG4B,KANH,oGASGA,KATH,gGAiBGA,KAjBH,2FAoBGA,KApBH,mGAuBGA,KAvBH,8GA0BGA,KA1BH,+GA+BGA,KA/BH,yGAkCGA,KAlCH,gHA4CGA,KA5CH,wHA+CGA,KA/CH,8HAkDGA,KAlDH,oIAqDGA,KArDH,0HAwDGA,KAxDH,mHAmFGA,KAnFH,6EA6HM2C,GAA6D,SAACxC,GAI7D,IAAD,EACkByC,cAAY,WAChC,MAAO,CAACzC,EAAM3H,EAAG2H,EAAM1H,MAFrB,mBACCQ,EADD,KACQC,EADR,KAIJ,OACE,0BACEH,UAAWoH,EAAMvH,MAAQ,aACzBiK,GAAI5J,EACJ6J,GAAI,EACJC,GAAI9J,EACJ+J,GAAI9J,EACJE,YAAa,EACbD,OAAO,WAKP8J,GAAkD,SAAC,GAMlD,IALLvI,EAKI,EALJA,IACA9B,EAII,EAJJA,MAII,EACyBgK,cAAY,WACvC,MAAO,CAAClI,EAAIwI,cAAexI,EAAIsC,UAF7B,mBACCkG,EADD,KACgBlG,EADhB,KAIJ,OACE,uBAAGjE,UAAWH,EAAQ,eACnBsK,EAAcjC,KAAI,SAACvC,EAAItC,GAAL,OACjB,0BACED,IAAKC,EACLyG,GAAI7F,EAAM0B,EAAGhD,GAAGhD,EAChBoK,GAAI9F,EAAM0B,EAAGhD,GAAGxC,QAAUwF,EAAG/F,EAAI,GAAK+B,EAAIuD,OAAOxG,SACjDsL,GAAI/F,EAAM0B,EAAG+D,GAAG/J,EAAIgC,EAAIsC,MAAM0B,EAAG+D,GAAGxJ,MACpC+J,GAAIhG,EAAM0B,EAAGhD,GAAGxC,QAAUwF,EAAG/F,EAAI,GAAK+B,EAAIuD,OAAOxG,SACjD0B,OAAQ,QACRC,YAAa,SA2CR+J,GApCdjD,Y,yKAGG,IAAIlD,EAAQpD,KAAKuG,MAAMzF,IAAIsC,MACvBpE,EAAQ,WACZ,OACE,uBACEG,UAAWH,EACXI,UACE,aAAeY,KAAKuG,MAAMzF,IAAIhC,EAAI,IAAMkB,KAAKuG,MAAMzF,IAAI/B,EAAI,IAE7DM,MAAOW,KAAKuG,MAAMzF,IAAIzB,MACtBC,OAAQU,KAAKuG,MAAMzF,IAAIxB,QAEvB,kBAAC,EAAD,CACEV,EAAGoB,KAAKuG,MAAMzF,IAAIzB,MAClBR,EAAGmB,KAAKuG,MAAMzF,IAAIxB,OAClBR,EAAG,EACHC,EAAG,EACHC,MAAOA,EACPC,KAAMe,KAAKuG,MAAMzF,IAAIwD,WAEvB,kBAAC,GAAD,CACE1F,EAAGoB,KAAKuG,MAAMzF,IAAIzB,MAClBR,EAAGmB,KAAKuG,MAAMzF,IAAIxB,OAClBN,MAAOA,IAERoE,EAAMiE,KAAI,SAACvC,EAAItC,GAAL,OACT,kBAAC,GAAD,CAAUD,IAAKC,EAAK3B,KAAMiE,OAE5B,kBAAC,GAAD,CAAUhE,IAAKd,KAAKuG,MAAMzF,IAAK9B,MAAOA,S,GA7BxBiI,IAAMC,a,ECpLfsC,IAAb,aAqDE,WAAY9E,EAAWjC,EAAezB,EAAYqD,GAAqB,yBApD9DA,YAoD6D,uIACpErE,KAAKyC,MAAQA,EACbzC,KAAKgB,KAAOA,EACZhB,KAAKqE,OAASA,EACdrE,KAAK2E,OAAOD,GAzDhB,kDAOI,OAAO1E,KAAKgB,KAAK3B,QAPrB,6BAUI,IAAIR,EAAI,EAIR,OAHAmB,KAAKsD,KAAKuB,SAAQ,SAACC,GACjBjG,EAAIiG,EAAGxF,OAAST,EAAIiG,EAAGxF,OAAST,KAE3BA,IAdX,wBAiBI,OAAO,IAjBX,wBAoBI,OAAOmB,KAAKgB,KAAKyI,QAAQzJ,KAAKyC,SApBlC,+BAuBI,OAAOzC,KAAKsD,KAAK+D,KAAI,SAACvC,GAAD,OAAQA,EAAGwD,kBAvBpC,gCAyBuC,IAAD,OAC9BoB,EAAU1J,KAAK2J,SAAS5B,QAAO,SAAC5H,EAAGC,GAAJ,OAAUD,EAAE6H,KAAK5H,KAAI,IAAIT,GACxDuI,EAAQlI,KAAKX,MAAQW,KAAKmI,cAC1BC,GAAO,IAAIzI,GAAWsI,KAAKC,EAAO,GAAGG,OAAOqB,GAChD,OAAO1J,KAAK4J,eAAevC,KAAI,SAACvC,EAAItC,GAClC,OAAOsC,EAAK,EAAK6E,SAASnH,GAAKiG,SAASL,GAAMG,gBA9BpD,4BAkCI,IAAIzJ,EAAI,EACR,OAAOkB,KAAK2H,UAAUN,KAAI,SAACvC,GACzB,IAAIrE,EAAI3B,EAER,OADAA,GAAKgG,EACErE,OAtCb,qCA0CI,OAAOsE,KAAK2D,IAAL,MAAA3D,KAAI,YAAQ/E,KAAKsD,KAAK+D,KAAI,SAACvC,GAAD,OAAQA,EAAG+E,yBA1ChD,2CA6CI,OAAO9E,KAAK2D,IAAL,MAAA3D,KAAI,YAAQ/E,KAAKsD,KAAK+D,KAAI,SAACvC,GAAD,OAAQA,EAAGgF,+BA7ChD,oCAgDI,OAAO9J,KAAK4J,eAAe7B,QAAO,SAAC5H,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,KAhDvD,qCAmDI,OAAOJ,KAAKsD,KAAK+D,KAAI,SAACvC,GAAD,OAAQA,EAAGqD,qBAnDpC,4CA2DS1F,GACLzC,KAAKsD,KAAOtD,KAAKsD,KAAKqC,OACpBlD,EACA,EACA,IAAIiF,GAAI,CAAEtE,MAAO,CAAC,CAAE9C,EAAG,OAAUN,KAAKsD,KAAKV,OAAQ5C,KAAMA,KAAKqE,SAEhErE,KAAKsD,KAAKuB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OAjE/C,gCAmEYC,GACRzC,KAAKsD,KAAOtD,KAAKsD,KAAKsC,QAAO,SAACd,EAAItC,GAAL,OAAaA,IAAQC,KAClDzC,KAAKsD,KAAKuB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OArE/C,gCAuEYV,GACR9B,KAAKsE,SAAWxC,IAxEpB,gCA2EI,OAAO9B,OA3EX,6BA6ES0E,GAAkB,IAAD,YACPmB,IAAXnB,EAAEpB,MACJoB,EAAEpB,KAAKuB,SAAQ,SAACC,EAAStC,GACvB,EAAKc,KAAK6B,KAAK,IAAIuC,GAAI5C,EAAItC,EAAK,EAAM,EAAK6B,cAhFnD,6BAsFI,MAAO,CAAEf,KADUtD,KAAKsD,KAAK+D,KAAI,SAACvC,GAAD,OAAQA,EAAGgE,eArFhD,wCAEGtE,KAFH,gGAGGA,KAHH,gGAIGA,KAJH,wEAI4B,MAJ5B,sCAKGA,KALH,yEAKkC,KALlC,iCAMG4B,KANH,oGASGA,KATH,gGAgBGA,KAhBH,2FAmBGA,KAnBH,kGAsBGA,KAtBH,0GAyBGA,KAzBH,uGAiCGA,KAjCH,4GAyCGA,KAzCH,2HA4CGA,KA5CH,0HA+CGA,KA/CH,oHAkDGA,KAlDH,8EAuHe2D,GA7BdzD,Y,yKAIG,OACE,uBACEnH,UAHQ,aAIRC,UACE,aAAeY,KAAKuG,MAAMxF,MAAMjC,EAAI,IAAMkB,KAAKuG,MAAMxF,MAAMhC,EAAI,IAEjEM,MAAOW,KAAKuG,MAAMxF,MAAM1B,MACxBC,OAAQU,KAAKuG,MAAMxF,MAAMzB,QAEzB,kBAAC,EAAD,CACEV,EAAGoB,KAAKuG,MAAMxF,MAAM1B,MACpBR,EAAGmB,KAAKuG,MAAMxF,MAAMzB,OACpBR,EAAG,EACHC,EAAG,EACHC,MAfM,aAgBNC,KAAMe,KAAKuG,MAAMxF,MAAMuD,WAExBtE,KAAKuG,MAAMxF,MAAMuC,KAAK+D,KAAI,SAACvC,EAAItC,GAAL,OACzB,kBAAC,GAAD,CAASD,IAAKC,EAAK1B,IAAKgE,Y,GArBVmC,IAAMC,a,EC5FjB8C,IAAb,cA+BE,WAAYtF,EAAUjC,EAAexB,EAAYoD,GAAqB,yBA9B7DA,YA8B4D,6IACnErE,KAAKiB,KAAOA,EACZjB,KAAKyC,MAAQA,EACbzC,KAAKqE,OAASA,EACdrE,KAAK2E,OAAOD,GAnChB,kDAOI,OAAO1E,KAAKiB,KAAK5B,QAPrB,6BAS0B,IAAD,OACjBR,EAAI,EAKR,OAJAmB,KAAK0D,OAAOmB,SAAQ,SAACC,GACnBjG,GAAKiG,EAAGxF,OAAS,EAAK+E,OAAO1G,YAE/BkB,GAAKmB,KAAKqE,OAAO1G,WAdrB,wBAkBI,OAAOqC,KAAKiB,KAAKnC,IAlBrB,wBAqBI,OAAOkB,KAAKiB,KAAKgJ,OAAOjK,KAAKyC,SArBjC,8BAuBqC,IAAD,OAC5B1D,EAAI,EACR,OAAOiB,KAAK0D,OAAO2D,KAAI,SAACvC,GACtB,IAAIrE,EAAI1B,EAER,OADAA,GAAK+F,EAAGxF,OAAS,EAAK+E,OAAO1G,SACtB8C,SA5Bb,8CAqCWgC,GACPzC,KAAK0D,OAAS1D,KAAK0D,OAAOiC,OACxBlD,EACA,EACA,IAAI+G,GACF,CAAElG,KAAM,CAAC,CAAEF,MAAO,CAAC,CAAE9C,EAAG,SACxBN,KAAK0D,OAAOd,OACZ5C,KACAA,KAAKqE,SAGTrE,KAAK0D,OAAOmB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OAhDjD,kCAkDcC,GACVzC,KAAK0D,OAAS1D,KAAK0D,OAAOkC,QAAO,SAACd,EAAItC,GAAL,OAAaA,IAAQC,KACtDzC,KAAK0D,OAAOmB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OApDjD,gCAsDYV,GACR9B,KAAKsE,SAAWxC,IAvDpB,gCA0DI,OAAO9B,OA1DX,6BA4DS0E,GAAiB,IAAD,YACJmB,IAAbnB,EAAEhB,QACJgB,EAAEhB,OAAOmB,SAAQ,SAACC,EAAYtC,GAC5B,EAAKkB,OAAOyB,KAAK,IAAIqE,GAAM1E,EAAItC,EAAK,EAAM,EAAK6B,cA/DvD,6BAqEI,MAAO,CAAEX,OADc1D,KAAK0D,OAAO2D,KAAI,SAACvC,GAAD,OAAQA,EAAGgE,eApEtD,yCAEGtE,KAFH,mGAGGA,KAHH,oGAIGA,KAJH,wEAIgC,MAJhC,wCAKGA,KALH,yEAKkC,KALlC,kCAMG4B,KANH,uGASGA,KATH,mGAiBGA,KAjBH,8FAoBGA,KApBH,oGAuBGA,KAvBH,0EAyEM8D,GAAwD,SAAC,GAMxD,IALL5K,EAKI,EALJA,OACAN,EAII,EAJJA,MAKA,OACE,uBAAGG,UAAWH,EAAQ,eACpB,0BAAMiK,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI9J,EAAQE,YAAa,EAAGD,OAAO,YAmCrD4K,GA9Bd7D,Y,0KAIG,OACE,uBACEnH,UAHQ,YAIRC,UACE,aAAeY,KAAKuG,MAAMvF,KAAKlC,EAAI,IAAMkB,KAAKuG,MAAMvF,KAAKjC,EAAI,IAE/DM,MAAOW,KAAKuG,MAAMvF,KAAK3B,MACvBC,OAAQU,KAAKuG,MAAMvF,KAAK1B,QAExB,kBAAC,EAAD,CACEV,EAAGoB,KAAKuG,MAAMvF,KAAK3B,MACnBR,EAAGmB,KAAKuG,MAAMvF,KAAK1B,OACnBR,EAAG,EACHC,EAAG,EACHC,MAfM,YAgBNC,KAAMe,KAAKuG,MAAMvF,KAAKsD,WAExB,kBAAC,GAAD,CAAUhF,OAAQU,KAAKuG,MAAMvF,KAAK1B,OAAQN,MAlBlC,cAmBPgB,KAAKuG,MAAMvF,KAAK0C,OAAO2D,KAAI,SAACvC,EAAItC,GAAL,OAC1B,kBAAC,GAAD,CAAWD,IAAKC,EAAKzB,MAAO+D,Y,GAtBfmC,IAAMC,a,GCxFhBkD,IAAb,cA+DE,WAAY1F,EAAUjC,EAAevB,EAAoBmD,GAAqB,yBA9DrEA,YA8DoE,gJAC3ErE,KAAKyC,MAAQA,EACbzC,KAAKkB,SAAWA,EAChBlB,KAAKqE,OAASA,EACdrE,KAAK2E,OAAOD,GAnEhB,kDAOI,OAAO1E,KAAKqE,OAAOpG,UAA+C,EAAnC+B,KAAKqE,OAAOnG,uBAP/C,6BAUI,OACE8B,KAAKqE,OAAOpG,UAAY+B,KAAKqE,OAAOrG,MACpCgC,KAAKqE,OAAOlG,mBACZ6B,KAAKqK,YAbX,wBAiBI,OAAOrK,KAAKqE,OAAOnG,uBAjBvB,wBAoBI,OACE8B,KAAKqK,UAAYrK,KAAKyC,OAASzC,KAAKqE,OAAOpG,UAAY+B,KAAKqE,OAAOrG,SArBzE,gCAyBI,IAAIsM,EAAK,EACT,GAAmB,IAAftK,KAAKyC,MAAa,CACpB6H,GAAMtK,KAAKqE,OAAOlG,mBAClB,IAAIoM,EAAIvK,KAAKqE,OAAO/F,QACpBgM,GAAMtK,KAAKqE,OAAOjG,kBAAoBmM,EACtCD,GAAMtK,KAAKqE,OAAOhG,qBAAuBkM,EACrCvK,KAAKkB,SAASsJ,KAAKC,OAAO7H,OAAS,EACrC0H,GAAMtK,KAAKkB,SAASsJ,KAAKC,OAAO7H,QAAU5C,KAAKqE,OAAO9F,aAAegM,GAErED,GAAM,GAAKtK,KAAKqE,OAAO9F,aAAegM,QAGxCD,EAAKtK,KAAKqE,OAAOlG,mBAEnB,OAAOmM,IAvCX,mCA0CI,OAAOtK,KAAKqE,OAAOlG,qBA1CvB,iCA6CI,OAAO6B,KAAKqE,OAAOnG,uBA7CvB,kCAgDI,OAAO8B,KAAKqE,OAAOnG,uBAhDvB,kCAmDI,OAAO8B,KAAK6D,MAAMwD,KAAI,SAACvC,GAAD,OAAQA,EAAGxF,YAnDrC,6BAsDI,IAAIP,EAAIiB,KAAKqK,UACTK,EAAM1K,KAAK2K,YAAY5C,QAAO,SAAC5H,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,GAC/CwK,GAAO5K,KAAKV,OAASoL,IAAQ1K,KAAK6D,MAAMjB,OAAS,GACrD,OAAO5C,KAAK2K,YAAYtD,KAAI,SAACvC,GAC3B,IAAIrE,EAAI1B,EAER,OADAA,GAAK+F,EAAK8F,EACHnK,SA5Db,6CAqEUgC,GACNzC,KAAK6D,MAAQ7D,KAAK6D,MAAM8B,OACtBlD,EACA,EACA,IAAIuH,GACF,CAAEtG,OAAQ,CAAC,CAAEJ,KAAM,CAAC,CAAEF,MAAO,CAAC,CAAE9C,EAAG,WACnCN,KAAK6D,MAAMjB,OACX5C,KACAA,KAAKqE,SAGTrE,KAAK6D,MAAMgB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OAhFhD,iCAkFaC,GACTzC,KAAK6D,MAAQ7D,KAAK6D,MAAM+B,QAAO,SAACd,EAAItC,GAAL,OAAaA,IAAQC,KACpDzC,KAAK6D,MAAMgB,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OApFhD,gCAsFYV,GACR9B,KAAKsE,SAAWxC,IAvFpB,gCA0FI,OAAO9B,OA1FX,6BA4FS0E,GAAiB,IAAD,YACLmB,IAAZnB,EAAEb,OACJa,EAAEb,MAAMgB,SAAQ,SAACC,EAAWtC,GAC1B,EAAKqB,MAAMsB,KAAK,IAAI6E,GAAKlF,EAAItC,EAAK,EAAM,EAAK6B,cA/FrD,6BAqGI,MAAO,CAAER,MADY7D,KAAK6D,MAAMwD,KAAI,SAACvC,GAAD,OAAQA,EAAGgE,eApGnD,6CAEGtE,KAFH,mGAGGA,KAHH,mGAIGA,KAJH,wEAI8B,MAJ9B,wCAKGA,KALH,yEAKkC,KALlC,kCAMG4B,KANH,uGASGA,KATH,mGAgBGA,KAhBH,8FAmBGA,KAnBH,sGAwBGA,KAxBH,iHAyCGA,KAzCH,kHA4CGA,KA5CH,iHA+CGA,KA/CH,kHAkDGA,KAlDH,6GAqDGA,KArDH,yEAiHMyE,GAAsC,SAAC,GAMtB,IALrBpI,EAKoB,EALpBA,MACA3D,EAIoB,EAJpBA,EACAC,EAGoB,EAHpBA,EACAC,EAEoB,EAFpBA,MACAqF,EACoB,EADpBA,OAEA,OACE,uBACElF,UAAWH,EAAQ,eACnBI,UAAW,aAAeN,EAAI,IAAMC,EAAI,KAExC,0BACE+L,WAAY,SACZpE,WAAYrC,EAAO5F,eACnBkI,SAAUtC,EAAO7F,oBAEfiE,EAAQ,GAAGsI,cAwENC,GAlEd1E,Y,0KAGG,IAAItH,EAAQ,YACZ,OACE,uBACEG,UAAWH,EACXI,UACE,cACCY,KAAKuG,MAAMtF,KAAKnC,EAAIkB,KAAKuG,MAAMtF,KAAKgK,YACrC,KACCjL,KAAKuG,MAAMtF,KAAKlC,EAAIiB,KAAKuG,MAAMtF,KAAKoJ,WACrC,IAEFhL,MACEW,KAAKuG,MAAMtF,KAAK5B,MAChBW,KAAKuG,MAAMtF,KAAKgK,WAChBjL,KAAKuG,MAAMtF,KAAKiK,YAElB5L,OACEU,KAAKuG,MAAMtF,KAAK3B,OAChBU,KAAKuG,MAAMtF,KAAKoJ,UAChBrK,KAAKuG,MAAMtF,KAAKmG,cAGlB,kBAAC,EAAD,CACExI,EAAGoB,KAAKuG,MAAMtF,KAAK5B,MACnBR,EAAGmB,KAAKuG,MAAMtF,KAAK3B,OACnBR,EAAGkB,KAAKuG,MAAMtF,KAAKnC,EACnBC,EAAGiB,KAAKuG,MAAMtF,KAAKoJ,UACnBrL,MAAOA,EACPC,KAAMe,KAAKuG,MAAMtF,KAAKqD,WAExB,kBAAC,EAAD,CACE1F,EACEoB,KAAKuG,MAAMtF,KAAK5B,MAChBW,KAAKuG,MAAMtF,KAAKgK,WAChBjL,KAAKuG,MAAMtF,KAAKgK,WAElBpM,EACEmB,KAAKuG,MAAMtF,KAAK3B,OAChBU,KAAKuG,MAAMtF,KAAKoJ,UAChBrK,KAAKuG,MAAMtF,KAAKmG,aAElBpI,MAAOA,EACPC,MAAM,IAER,kBAAC,GAAD,CACEwD,MAAOzC,KAAKuG,MAAMtF,KAAKwB,MACvB3D,EAAGkB,KAAKuG,MAAMtF,KAAKgK,WAAajL,KAAKuG,MAAMtF,KAAK5B,MAAQ,EACxDN,EACEiB,KAAKuG,MAAMtF,KAAKoJ,UAChBrK,KAAKuG,MAAMtF,KAAK3B,OAChBU,KAAKuG,MAAMtF,KAAKmG,aAAe,EAEjCpI,MAAOA,EACPqF,OAAQrE,KAAKuG,MAAMtF,KAAKoD,SAEzBrE,KAAKuG,MAAMtF,KAAK4C,MAAMwD,KAAI,SAACvC,EAAItC,GAAL,OACzB,kBAAC,GAAD,CAAUD,IAAKC,EAAKxB,KAAM8D,Y,GA1DbmC,IAAMC,a,GC9IhBiE,IAAb,yRACG3G,KADH,wEAC8B,MAD9B,wCAEGA,KAFH,wEAEiC,MAFjC,sCAGGA,KAHH,wEAGiC,MAHjC,qCAIGA,KAJH,wEAI8B,MAJ9B,wCAKGA,KALH,wEAKiC,MALjC,iCAMGA,KANH,wEAM0B,MAN1B,IAmBa4G,IAAb,cAeE,WAAY1G,EAAcL,GAAqB,yBAdtCA,YAcqC,0GAC5CrE,KAAKqE,OAASA,EACdrE,KAAK2E,OAAOD,GAjBhB,mDAMI,IAAI7F,EAAI,EAIR,OAHAmB,KAAK8D,MAAMe,SACT,SAACC,GAAD,OAASjG,GAAKiG,EAAGxF,OAASwF,EAAGuF,UAAYvF,EAAGsC,gBAEvCvI,IAVX,4BAaI,OAAOmB,KAAKqE,OAAOpG,cAbvB,6CAmBUwE,GACNzC,KAAK8D,MAAQ9D,KAAK8D,MAAM6B,OACtBlD,EACA,EACA,IAAI2H,GACF,CAAEvG,MAAO,CAAC,CAAEH,OAAQ,CAAC,CAAEJ,KAAM,CAAC,CAAEF,MAAO,CAAC,CAAE9C,EAAG,aAC7CN,KAAK8D,MAAMlB,OACX5C,KACAA,KAAKqE,SAGTrE,KAAK8D,MAAMe,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OA9BhD,iCAgCaC,GACTzC,KAAK8D,MAAQ9D,KAAK8D,MAAM8B,QAAO,SAACd,EAAItC,GAAL,OAAaA,IAAQC,KACpDzC,KAAK8D,MAAMe,SAAQ,SAACC,EAAItC,GAAL,OAAcsC,EAAGrC,MAAQD,OAlChD,gCAoCYV,GACR9B,KAAKsE,SAAWxC,IArCpB,gCAwCI,OAAO9B,OAxCX,6BA0CS0E,GAAqB,IAAD,YACTmB,IAAZnB,EAAEZ,OACJY,EAAEZ,MAAMe,SAAQ,SAACC,EAAWtC,GAC1B,EAAKsB,MAAMqB,KAAK,IAAIiF,GAAKtF,EAAItC,EAAK,EAAM,EAAK6B,iBAGjCwB,IAAZnB,EAAE2G,QACJrL,KAAKwK,KAAKa,MAAQ3G,EAAE2G,YAEHxF,IAAfnB,EAAE4G,WACJtL,KAAKwK,KAAKc,SAAW5G,EAAE4G,eAERzF,IAAbnB,EAAE+F,SACJzK,KAAKwK,KAAKC,OAAS/F,EAAE+F,OAAOM,WAAW/E,MAAM,WAE/BH,IAAZnB,EAAE6G,QACJvL,KAAKwK,KAAKe,MAAQ7G,EAAE6G,OAElB7G,EAAE8G,WACJxL,KAAKwK,KAAKgB,SAAW9G,EAAE8G,UAErB9G,EAAE+G,IACJzL,KAAKwK,KAAKiB,EAAI/G,EAAE+G,KAhEtB,6BAmEqB,IAAD,OACZ3H,EAAiB9D,KAAK8D,MAAMuD,KAAI,SAACvC,GAAD,OAAQA,EAAGgE,UAC3C2B,EAAiB,GAQrB,OAPAzK,KAAKwK,KAAKC,OAAO5F,SAAQ,SAACC,EAAItC,GACxBA,IAAQ,EAAKgI,KAAKC,OAAO7H,OAAS,EACpC6H,GAAU3F,EAEV2F,GAAU3F,EAAK,OAGZ,CACLuG,MAAOrL,KAAKwK,KAAKa,MACjBC,SAAUtL,KAAKwK,KAAKc,SACpBb,OAAQA,EACRe,SAAUxL,KAAKwK,KAAKgB,SACpBD,MAAOvL,KAAKwK,KAAKe,MACjBE,EAAGzL,KAAKwK,KAAKiB,EACb3H,aApFN,0CAEGU,KAFH,wEAE8B,MAF9B,wCAGGA,KAHH,yEAGyB,KAHzB,oCAIGA,KAJH,yEAImC,IAAI2G,MAJvC,mCAKG/E,KALH,uGAYGA,KAZH,wEA+FMsF,GAAoD,SAAC,GAI7B,IAH5BlB,EAG2B,EAH3BA,KACAnG,EAE2B,EAF3BA,OACArF,EAC2B,EAD3BA,MAEID,EAAI,EACRA,GAAKsF,EAAOlG,mBACZ,IAAIkN,EACF,0BACElM,UAAWH,EAAQ,eACnB0H,WAAYrC,EAAO5F,eACnBY,MAAOgF,EAAOpG,UACd6M,WAAY,SACZnE,SAAUtC,EAAOjG,kBACjBgB,UAAW,aAAeiF,EAAOpG,UAAY,EAAI,IAAMc,EAAI,KAE1DyL,EAAKa,OAGVtM,GAAKsF,EAAOjG,kBAAoBiG,EAAO/F,QACvC,IAAIgN,EACF,0BACEnM,UAAWH,EAAQ,kBACnB0H,WAAYrC,EAAO5F,eACnBY,MAAOgF,EAAOpG,UACd6M,WAAY,SACZnE,SAAUtC,EAAOhG,qBACjBe,UAAW,aAAeiF,EAAOpG,UAAY,EAAI,IAAMc,EAAI,KAE1DyL,EAAKc,UAGNpC,EAAKnK,EACLD,EAAI0L,EAAKC,OAAO7H,OAChB6H,EACF,uBAAGtL,UAAWH,EAAQ,iBACnBwL,EAAKC,OAAOpD,KAAI,SAACvC,EAAItC,GAKpB,OAJA0G,GAAM7E,EAAO9F,aAAe8F,EAAO/F,QAC/BkE,EAAM1D,EAAI,IACZC,GAAKsF,EAAO9F,aAAe8F,EAAO/F,SAGlC,0BACEiE,IAAKC,EACLkE,WAAYrC,EAAO5F,eACnBY,MAAOgF,EAAOpG,UACd0I,SAAUtC,EAAO9F,aACjBuM,WAAY,MACZhM,EAAG,EACHM,UACE,cACCiF,EAAOpG,UAAYoG,EAAOnG,sBAC3B,IACAgL,EACA,KAGDpE,OAMPsE,EAAKrK,GAAKsF,EAAO/F,QAAU+F,EAAOhG,sBAClCsN,EAAKvC,GAAM/E,EAAO/F,QAAU+F,EAAO9F,cACnCqN,EACF,uBAAGzM,UAAWH,EAAQ,iBAAkBK,MAAOgF,EAAOpG,WACpD,0BACEyI,WAAYrC,EAAO5F,eACnBY,MAAOgF,EAAOpG,UACd0I,SAAUtC,EAAO9F,aACjBa,UAAW,aAAeiF,EAAOnG,qBAAuB,IAAMkL,EAAK,KAElEoB,EAAKe,OAER,0BACE7E,WAAYrC,EAAO5F,eACnBY,MAAOgF,EAAOpG,UACd0I,SAAUtC,EAAO9F,aACjBa,UAAW,aAAeiF,EAAOnG,qBAAuB,IAAMyN,EAAK,KAJrE,YAMQnB,EAAKiB,EANb,YAMkBjB,EAAKgB,YAI3B,OACE,uBAAGrM,UAAWH,EAAQ,SAAUK,MAAOgF,EAAOpG,WAC3CoN,EACAC,EACAb,EACAmB,IAiDQC,GA5CdvF,Y,0KAGG,IACItH,EAAQ,gBACZ,OACE,yBACEG,UAAU,OACVE,MAAOW,KAAKuG,MAAMrF,SAAS7B,MAAQyM,GACnCxM,OAAQU,KAAKuG,MAAMrF,SAAS5B,OAASwM,IAErC,uBACE3M,UAAWH,EACXI,UAAW,mBACXC,MAAOW,KAAKuG,MAAMrF,SAAS7B,MAC3BC,OAAQU,KAAKuG,MAAMrF,SAAS5B,QAE5B,kBAAC,GAAD,CACEkL,KAAMxK,KAAKuG,MAAMrF,SAASsJ,KAC1BnG,OAAQrE,KAAKuG,MAAMrF,SAASmD,OAC5BrF,MAAOA,IAET,kBAAC,EAAD,CACEJ,EAAGoB,KAAKuG,MAAMrF,SAAS7B,MACvBR,EAAGmB,KAAKuG,MAAMrF,SAAS5B,OACvBR,EAAG,EACHC,EAAG,EACHC,MAAOA,EACPC,KAAMe,KAAKuG,MAAMrF,SAASoD,WAE5B,kBAAC,EAAD,CACE1F,EAAGoB,KAAKuG,MAAMrF,SAAS7B,MACvBR,EAAGmB,KAAKuG,MAAMrF,SAAS5B,OACvBN,MAAOA,IAERgB,KAAKuG,MAAMrF,SAAS4C,MAAMuD,KAAI,SAACvC,EAAItC,GAAL,OAC7B,kBAAC,GAAD,CAAUD,IAAKC,EAAKvB,KAAM6D,a,GAnCXmC,IAAMC,a,GCvJlB6E,G,kDAxDb,WAAYxF,GAAY,IAAD,8BACrB,cAAMA,IACDyF,MAAQ,CACXC,MAAO,KACPC,UAAU,EACVhL,SAAU,MALS,E,gEASF,IAAD,OAGlBiL,MAFU,mEAGPC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MACC,SAACG,GACC,EAAKC,SAAS,CACZN,UAAU,EACVhL,SAAU,IAAIkK,GAASqB,KAAKC,MAAMH,GAAS,IAAIlP,QAGnD,SAAC4O,GACC,EAAKO,SAAS,CACZN,UAAU,EACVD,MAAOA,S,+BAKP,IAAD,OACP,OAAIjM,KAAKgM,MAAM9K,SAEX,yBAAK/B,UAAU,OACb,uCACCa,KAAKgM,MAAME,SACVlM,KAAKgM,MAAMC,MACT,QAEA,kBAAC,GAAD,CAAc/K,SAAUlB,KAAKgM,MAAM9K,WAGrC,aAEF,4BACEsF,QAAS,WAAO,IAAD,EACbmG,QAAQC,IAAIH,KAAKI,UAAL,UAAe,EAAKb,MAAM9K,gBAA1B,aAAe,EAAqB4H,WAFpD,QASQ,yC,GA5DA7B,IAAMC,WCQJ4F,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFlM,SAASmM,eAAe,SDiIpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBrB,MAAK,SAAAsB,GACJA,EAAaC,gBAEdC,OAAM,SAAA3B,GACLU,QAAQV,MAAMA,EAAM4B,c","file":"static/js/main.084553d7.chunk.js","sourcesContent":["export default class MuseConfig {\n  noteHeight = 22;\n  noteWidth = 11;\n  noteFontSize = 22;\n  noteFontFamily = \"serif\";\n  sigFontSize = 14;\n\n  trackGap = 10;\n\n  lineGap = 40;\n\n  pointGap = 5;\n  tailPointGap = 8;\n  pointRound = 1.5;\n\n  pageE = 1.414;\n  pageWidth = 1000;\n  pageMarginHorizontal = 100;\n  pageMarginVertical = 110;\n\n  infoTitleFontSize = 34;\n  infoSubtitleFontSize = 22;\n  infoGap = 7;\n  infoFontSize = 20;\n\n  pageIndexFontSize = 20;\n\n  textFontFamily = \"serif\";\n\n  showBorder = false;\n}\n","import React from \"react\";\n\ninterface BorderProps {\n  w: number;\n  h: number;\n  x: number;\n  y: number;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const Border: React.FC<BorderProps> = ({\n  w,\n  h,\n  x,\n  y,\n  clazz,\n  show = false,\n  color = \"blue\",\n}: BorderProps) => {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__border\"}\n        transform={\"translate(\" + x + \",\" + y + \")\"}\n        width={w}\n        height={h}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n\ninterface OuterBorderProps {\n  w: number;\n  h: number;\n  clazz: string;\n  show?: boolean;\n  color?: string;\n}\n\nexport const OuterBorder: React.FC<OuterBorderProps> = ({\n  w,\n  h,\n  clazz,\n  show = false,\n  color = \"gray\",\n}: OuterBorderProps) => {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__outer-border\"}\n        transform={\"translate(0,0)\"}\n        width={w}\n        height={h}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n","export default class Fraction {\n  u: number = 0;\n  d: number = 1;\n  parse(x: string): Fraction {\n    let pos = x.search(\"/\");\n    if (pos !== -1) {\n      this.u = parseInt(x.substr(0, pos));\n      this.d = parseInt(x.substr(pos + 1));\n    } else {\n      this.u = parseInt(x);\n    }\n    return this;\n  }\n  init(u: number, d: number): Fraction {\n    this.u = u;\n    this.d = d;\n    return this;\n  }\n  gcd(a: number, b: number): number {\n    while (b !== 0) {\n      let t = b;\n      b = a % b;\n      a = t;\n    }\n    return a;\n  }\n  simplify(): Fraction {\n    let n: number;\n    while ((n = this.gcd(this.u, this.d)) > 1 || n < -1) {\n      this.u /= n;\n      this.d /= n;\n    }\n    return this;\n  }\n  plus(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d + this.d * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  minus(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d - this.d * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  multiply(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.u;\n    r.d = this.d * f.d;\n    return r.simplify();\n  }\n  divide(f: Fraction): Fraction {\n    let r = new Fraction();\n    r.u = this.u * f.d;\n    r.d = this.d * f.u;\n    return r.simplify();\n  }\n  toNumber(): number {\n    return this.u / this.d;\n  }\n  toString(): string {\n    if (this.d === 1) {\n      return `${this.u}`\n    } else {\n      return `${this.u}/${this.d}`\n    }\n  }\n}\n","import { Bar } from \"./MuseBar\";\nimport { Line } from \"./MuseLine\";\nimport { Notation } from \"./MuseNotation\";\nimport { Note, SubNote } from \"./MuseNote\";\nimport { Page } from \"./MusePage\";\nimport { Track } from \"./MuseTrack\";\n\nexport interface SelectionSubNote {\n  setSelect: (i: boolean) => void;\n  getThis: () => SubNote;\n  setNum: (n: string) => void;\n  reducePoint: (h: number) => void;\n  reduceLine: (l: number) => void;\n  reduceTailPoint: (p: number) => void;\n}\n\nexport interface SelectionNote {\n  setSelect: (i: boolean) => void;\n  getThis: () => Note;\n  reduceLine: (l: number) => void;\n  reduceTailPoint: (p: number) => void;\n  addSubNote: (index: number) => void;\n  removeSubNote: (index: number) => void;\n}\n\nexport interface SelectionBar {\n  setSelect: (i: boolean) => void;\n  getThis: () => Bar;\n  addNote: (index: number) => void;\n  removeNote: (index: number) => void;\n}\n\nexport interface SelectionTrack {\n  setSelect: (s: boolean) => void;\n  getThis: () => Track;\n  addBar: (index: number) => void;\n  removeBar: (index: number) => void;\n}\n\nexport interface SelectionLine {\n  setSelect: (s: boolean) => void;\n  getThis: () => Line;\n  addTrack: (index: number) => void;\n  removeTrack: (index: number) => void;\n}\n\nexport interface SelectionPage {\n  setSelect: (s: boolean) => void;\n  getThis: () => Page;\n  addLine: (index: number) => void;\n  removeLine: (index: number) => void;\n}\n\nexport interface SelectionNotation {\n  setSelect: (s: boolean) => void;\n  getThis: () => Notation;\n  addPage: (index: number) => void;\n  reomvePage: (index: number) => void;\n}\n\nclass Selector {\n  subnote: SelectionSubNote | null = null;\n  note: SelectionNote | null = null;\n  bar: SelectionBar | null = null;\n  track: SelectionTrack | null = null;\n  line: SelectionLine | null = null;\n  page: SelectionPage | null = null;\n  notation: SelectionNotation | null = null;\n  static instance = new Selector();\n  private constructor() {\n    document.addEventListener(\"keydown\", (ev) => {\n      if (!this.keySubNote(ev)) {\n        if (!this.keyNote(ev)) {\n          if (!this.keyBar(ev)) {\n            if (!this.keyTrack(ev)) {\n              if (!this.keyLine(ev)) {\n                if (!this.keyPage(ev)) {\n                  if (this.keyNotation(ev)) ev.returnValue = false;\n                } else ev.returnValue = false;\n              } else ev.returnValue = false;\n            } else ev.returnValue = false;\n          } else ev.returnValue = false;\n        } else ev.returnValue = false;\n      } else ev.returnValue = false;\n    });\n  }\n  selectSubNote(s: SelectionSubNote) {\n    this.subnote?.setSelect(false);\n    this.subnote = s;\n    this.subnote.setSelect(true);\n    this.selectNote(s.getThis().note);\n  }\n  selectNote(s: SelectionNote) {\n    this.note?.setSelect(false);\n    this.note = s;\n    if (this.subnote === null) this.note.setSelect(true);\n    this.selectBar(s.getThis().bar);\n  }\n  selectBar(s: SelectionBar) {\n    this.bar?.setSelect(false);\n    this.bar = s;\n    if (this.note === null) this.bar.setSelect(true);\n    this.selectTrack(s.getThis().track);\n  }\n  selectTrack(s: SelectionTrack) {\n    this.track?.setSelect(false);\n    this.track = s;\n    if (this.bar === null) this.track.setSelect(true);\n    this.selectLine(s.getThis().line);\n  }\n  selectLine(s: SelectionLine) {\n    this.line?.setSelect(false);\n    this.line = s;\n    if (this.track === null) this.line.setSelect(true);\n    this.selectPage(s.getThis().page);\n  }\n  selectPage(s: SelectionPage) {\n    this.page?.setSelect(false);\n    this.page = s;\n    if (this.line === null) this.page.setSelect(true);\n    this.selectNotation(s.getThis().notation);\n  }\n  selectNotation(s: SelectionNotation) {\n    this.notation?.setSelect(false);\n    this.notation = s;\n    if (this.page === null) this.notation.setSelect(true);\n  }\n  keySubNote(ev: KeyboardEvent): boolean {\n    if (this.subnote !== null) {\n      switch (ev.key) {\n        case \"Escape\":\n          this.subnote.setSelect(false);\n          this.subnote = null;\n          this.note?.setSelect(true);\n          return true;\n        case \"Backspace\":\n          if (this.note) {\n            let idx = this.subnote.getThis().index;\n            this.note.removeSubNote(this.subnote.getThis().index);\n            if (this.note.getThis().subNotes.length === 0) {\n              this.note.setSelect(true);\n              this.subnote.setSelect(false);\n              this.subnote = null;\n            } else {\n              if (idx === 0) {\n                this.subnote = this.note.getThis().subNotes[0];\n                this.subnote.setSelect(true);\n              } else {\n                this.subnote = this.note.getThis().subNotes[idx - 1];\n                this.subnote.setSelect(true);\n              }\n            }\n          }\n          return true;\n        case \" \":\n          return true;\n        case \"z\":\n          if (this.note) {\n            this.note?.addSubNote(0);\n            this.selectSubNote(this.note?.getThis().subNotes[0]);\n          }\n          return true;\n        case \"x\":\n          if (this.note) {\n            let idx = this.subnote.getThis().index;\n            this.note?.addSubNote(idx + 1);\n            this.selectSubNote(this.note?.getThis().subNotes[idx + 1]);\n          }\n          return true;\n        case \"c\":\n          if (this.note) {\n            this.note?.addSubNote(this.note.getThis().subNotes.length);\n            this.selectSubNote(\n              this.note?.getThis().subNotes[\n                this.note.getThis().subNotes.length - 1\n              ]\n            );\n          }\n          return true;\n        case \"ArrowUp\":\n          if (this.note) {\n            let l = this.note.getThis().subNotes.length;\n            if (l > this.subnote.getThis().index + 1) {\n              this.subnote.setSelect(false);\n              this.subnote = this.note.getThis().subNotes[\n                this.subnote.getThis().index + 1\n              ];\n              this.subnote.setSelect(true);\n            }\n          }\n          return true;\n        case \"ArrowDown\":\n          if (this.note) {\n            if (this.subnote.getThis().index > 0) {\n              this.subnote.setSelect(false);\n              this.subnote = this.note.getThis().subNotes[\n                this.subnote.getThis().index - 1\n              ];\n              this.subnote.setSelect(true);\n            }\n          }\n          return true;\n        case \"ArrowLeft\":\n          return true;\n        case \"ArrowRight\":\n          return true;\n        case \"0\":\n        case \"1\":\n        case \"2\":\n        case \"3\":\n        case \"4\":\n        case \"5\":\n        case \"6\":\n        case \"7\":\n        case \"8\":\n        case \"9\":\n        case \"-\":\n          this.subnote.setNum(ev.key);\n          return true;\n        case \"r\":\n          this.subnote.reducePoint(1);\n          return true;\n        case \"f\":\n          this.subnote.reducePoint(-1);\n          return true;\n        case \"q\":\n          this.subnote.reduceLine(-1);\n          return true;\n        case \"a\":\n          this.subnote.reduceLine(1);\n          return true;\n        case \"s\":\n          this.subnote.reduceTailPoint(-1);\n          return true;\n        case \"d\":\n          this.subnote.reduceTailPoint(1);\n          return true;\n        default:\n          return false;\n      }\n    } else return false;\n  }\n  keyNote(ev: KeyboardEvent): boolean {\n    if (this.note) {\n      switch (ev.key) {\n        case \"Enter\":\n          if (this.note.getThis().subNotes.length <= 0) {\n            this.note.addSubNote(this.note.getThis().subNotes.length);\n          }\n          this.subnote = this.note.getThis().subNotes[0];\n          this.subnote.setSelect(true);\n          this.note.setSelect(false);\n          return true;\n        case \"Escape\":\n          this.note.setSelect(false);\n          this.note = null;\n          this.bar?.setSelect(true);\n          return true;\n        case \" \":\n          this.note.addSubNote(this.note.getThis().subNotes.length);\n          return true;\n        case \"z\":\n          if (this.bar) {\n            this.bar?.addNote(0);\n            this.selectNote(this.bar?.getThis().notes[0]);\n          }\n          return true;\n        case \"x\":\n          if (this.bar) {\n            let idx = this.note.getThis().index;\n            this.bar?.addNote(idx + 1);\n            this.selectNote(this.bar?.getThis().notes[idx + 1]);\n          }\n          return true;\n        case \"c\":\n          if (this.bar) {\n            this.bar?.addNote(this.bar.getThis().notes.length);\n            this.selectNote(\n              this.bar?.getThis().notes[this.bar.getThis().notes.length - 1]\n            );\n          }\n          return true;\n        case \"Backspace\":\n          if (this.bar) {\n            let idx = this.note.getThis().index;\n            this.bar.removeNote(this.note.getThis().index);\n            if (this.bar.getThis().notes.length === 0) {\n              this.bar.setSelect(true);\n              this.note.setSelect(false);\n              this.note = null;\n            } else {\n              if (idx === 0) {\n                this.note = this.bar.getThis().notes[0];\n                this.note.setSelect(true);\n              } else {\n                this.note = this.bar.getThis().notes[idx - 1];\n                this.note.setSelect(true);\n              }\n            }\n          }\n          return true;\n        case \"ArrowLeft\":\n          if (this.bar) {\n            if (this.note.getThis().index > 0) {\n              this.note.setSelect(false);\n              this.note = this.bar.getThis().notes[\n                this.note.getThis().index - 1\n              ];\n              this.note.setSelect(true);\n              return true;\n            } else if (this.track) {\n              if (this.bar.getThis().index > 0) {\n                this.bar.setSelect(false);\n                this.bar = this.track.getThis().bars[\n                  this.bar.getThis().index - 1\n                ];\n                this.note.setSelect(false);\n                this.note = this.bar.getThis().notes[\n                  this.bar.getThis().notes.length - 1\n                ];\n                this.note.setSelect(true);\n                return true;\n              } else return false;\n            } else return false;\n          } else return false;\n        case \"ArrowRight\":\n          if (this.bar !== null) {\n            let l = this.bar.getThis().notes.length;\n            if (this.note.getThis().index < l - 1) {\n              this.note.setSelect(false);\n              this.note = this.bar.getThis().notes[\n                this.note.getThis().index + 1\n              ];\n              this.note.setSelect(true);\n              return true;\n            } else if (this.track) {\n              if (\n                this.bar.getThis().index <\n                this.track?.getThis().bars.length - 1\n              ) {\n                this.bar.setSelect(false);\n                this.bar = this.track.getThis().bars[\n                  this.bar.getThis().index + 1\n                ];\n                this.note.setSelect(false);\n                this.note = this.bar.getThis().notes[0];\n                this.note.setSelect(true);\n                return true;\n              } else return false;\n            } else return false;\n          } else return false;\n        case \"ArrowUp\":\n          return true;\n        case \"ArrowDown\":\n          return true;\n        case \"q\":\n          this.note.reduceLine(-1);\n          return true;\n        case \"a\":\n          this.note.reduceLine(1);\n          return true;\n        case \"s\":\n          this.note.reduceTailPoint(-1);\n          return true;\n        case \"d\":\n          this.note.reduceTailPoint(1);\n          return true;\n        default:\n          return false;\n      }\n    } else return false;\n  }\n  keyBar(ev: KeyboardEvent): boolean {\n    if (this.bar !== null) {\n      switch (ev.key) {\n        case \"Enter\":\n          if (this.bar.getThis().notes.length <= 0) {\n            this.bar.addNote(this.bar.getThis().notes.length);\n          }\n          this.note = this.bar.getThis().notes[0];\n          this.note.setSelect(true);\n          this.bar.setSelect(false);\n          return true;\n        case \"Escape\":\n          this.bar.setSelect(false);\n          this.bar = null;\n          this.track?.setSelect(true);\n          return true;\n        case \" \":\n          this.bar.addNote(this.bar.getThis().notes.length);\n          return true;\n        case \"z\":\n          if (this.track) {\n            this.track.addBar(0);\n            this.selectBar(this.track.getThis().bars[0]);\n          }\n          return true;\n        case \"x\":\n          if (this.track) {\n            let idx = this.bar.getThis().index;\n            this.track.addBar(idx + 1);\n            this.selectBar(this.track.getThis().bars[idx + 1]);\n          }\n          return true;\n        case \"c\":\n          if (this.track) {\n            this.track.addBar(this.track.getThis().bars.length);\n            this.selectBar(\n              this.track.getThis().bars[this.track.getThis().bars.length - 1]\n            );\n          }\n          return true;\n        case \"Backspace\":\n          if (this.track) {\n            let idx = this.bar.getThis().index;\n            this.track.removeBar(this.bar.getThis().index);\n            if (this.track.getThis().bars.length === 0) {\n              this.track.setSelect(true);\n              this.bar.setSelect(false);\n              this.bar = null;\n            } else {\n              if (idx === 0) {\n                this.bar = this.track.getThis().bars[0];\n                this.bar.setSelect(true);\n              } else {\n                this.bar = this.track.getThis().bars[idx - 1];\n                this.bar.setSelect(true);\n              }\n            }\n          }\n          return true;\n        case \"ArrowLeft\":\n          if (this.track) {\n            if (this.bar.getThis().index > 0) {\n              this.bar.setSelect(false);\n              this.bar = this.track.getThis().bars[\n                this.bar.getThis().index - 1\n              ];\n              this.bar.setSelect(true);\n              return true;\n            } else return true;\n          } else return false;\n        case \"ArrowRight\":\n          if (this.track !== null) {\n            let l = this.track.getThis().bars.length;\n            if (this.bar.getThis().index < l - 1) {\n              this.bar.setSelect(false);\n              this.bar = this.track.getThis().bars[\n                this.bar.getThis().index + 1\n              ];\n              this.bar.setSelect(true);\n              return true;\n            } else return true;\n          } else return false;\n        case \"ArrowUp\":\n          if (this.track && this.line) {\n            if (this.track.getThis().index > 0) {\n              this.track = this.line.getThis().tracks[\n                this.track.getThis().index - 1\n              ];\n              this.bar.setSelect(false);\n              this.bar = this.track.getThis().bars[this.bar.getThis().index];\n              this.bar.setSelect(true);\n              return true;\n            } else return true;\n          } else return false;\n        case \"ArrowDown\":\n          if (this.track && this.line) {\n            let l = this.line.getThis().tracks.length;\n            if (this.track.getThis().index < l - 1) {\n              this.track = this.line.getThis().tracks[\n                this.track.getThis().index + 1\n              ];\n              this.bar.setSelect(false);\n              this.bar = this.track.getThis().bars[this.bar.getThis().index];\n              this.bar.setSelect(true);\n              return true;\n            } else return true;\n          } else return false;\n        default:\n          return false;\n      }\n    } else return false;\n  }\n  keyTrack(ev: KeyboardEvent): boolean {\n    if (this.track !== null) {\n      switch (ev.key) {\n        case \"Enter\":\n          if (this.track.getThis().bars.length <= 0) {\n            this.track.addBar(this.track.getThis().bars.length);\n          }\n          this.bar = this.track.getThis().bars[0];\n          this.bar.setSelect(true);\n          this.track.setSelect(false);\n          return true;\n        case \"Escape\":\n          this.track.setSelect(false);\n          this.track = null;\n          this.line?.setSelect(true);\n          return true;\n        case \" \":\n          this.track.addBar(this.track.getThis().bars.length);\n          ev.returnValue = false;\n          return true;\n        case \"z\":\n          if (this.line) {\n            this.line.addTrack(0);\n            this.selectTrack(this.line.getThis().tracks[0]);\n          }\n          return true;\n        case \"x\":\n          if (this.line) {\n            let idx = this.track.getThis().index;\n            this.line.addTrack(idx + 1);\n            this.selectTrack(this.line.getThis().tracks[idx + 1]);\n          }\n          return true;\n        case \"c\":\n          if (this.line) {\n            this.line.addTrack(this.line.getThis().tracks.length);\n            this.selectTrack(\n              this.line.getThis().tracks[this.line.getThis().tracks.length - 1]\n            );\n          }\n          return true;\n        case \"Backspace\":\n          if (this.line) {\n            let idx = this.track.getThis().index;\n            this.line.removeTrack(this.track.getThis().index);\n            if (this.line.getThis().tracks.length === 0) {\n              this.line.setSelect(true);\n              this.track.setSelect(false);\n              this.track = null;\n            } else {\n              if (idx === 0) {\n                this.track = this.line.getThis().tracks[0];\n                this.track.setSelect(true);\n              } else {\n                this.track = this.line.getThis().tracks[idx - 1];\n                this.track.setSelect(true);\n              }\n            }\n          }\n          return true;\n        case \"ArrowUp\":\n          if (this.line) {\n            if (this.track.getThis().index > 0) {\n              this.track.setSelect(false);\n              this.track = this.line.getThis().tracks[\n                this.track.getThis().index - 1\n              ];\n              this.track.setSelect(true);\n              return true;\n            } else if (this.page) {\n              if (this.line.getThis().index > 0) {\n                this.line.setSelect(false);\n                this.line = this.page.getThis().lines[\n                  this.line.getThis().index - 1\n                ];\n                this.track.setSelect(false);\n                this.track = this.line.getThis().tracks[\n                  this.line.getThis().tracks.length - 1\n                ];\n                this.track.setSelect(true);\n                return true;\n              } else if (this.notation) {\n                if (this.page.getThis().index > 0) {\n                  this.page = this.notation.getThis().pages[\n                    this.page.getThis().index - 1\n                  ];\n                  this.line = this.page.getThis().lines[\n                    this.page.getThis().lines.length - 1\n                  ];\n                  this.track.setSelect(false);\n                  this.track = this.line.getThis().tracks[\n                    this.line.getThis().tracks.length - 1\n                  ];\n                  this.track.setSelect(true);\n                  return true;\n                } else return false;\n              } else return false;\n            } else return false;\n          } else return false;\n        case \"ArrowDown\":\n          if (this.line !== null) {\n            let l = this.line.getThis().tracks.length;\n            if (this.track.getThis().index < l - 1) {\n              this.track.setSelect(false);\n              this.track = this.line.getThis().tracks[\n                this.track.getThis().index + 1\n              ];\n              this.track.setSelect(true);\n              return true;\n            } else if (this.page) {\n              if (\n                this.line.getThis().index <\n                this.page.getThis().lines.length - 1\n              ) {\n                this.line.setSelect(false);\n                this.line = this.page.getThis().lines[\n                  this.line.getThis().index + 1\n                ];\n                this.track.setSelect(false);\n                this.track = this.line.getThis().tracks[0];\n                this.track.setSelect(true);\n                return true;\n              } else if (this.notation) {\n                if (\n                  this.page.getThis().index <\n                  this.notation.getThis().pages.length - 1\n                ) {\n                  this.page = this.notation.getThis().pages[\n                    this.page.getThis().index + 1\n                  ];\n                  this.line = this.page.getThis().lines[0];\n                  this.track.setSelect(false);\n                  this.track = this.line.getThis().tracks[0];\n                  this.track.setSelect(true);\n                  return true;\n                } else return false;\n              } else return false;\n            } else return false;\n          } else return false;\n        default:\n          return false;\n      }\n    } else return false;\n  }\n  keyLine(ev: KeyboardEvent): boolean {\n    if (this.line !== null) {\n      switch (ev.key) {\n        case \"Enter\":\n          if (this.line.getThis().tracks.length <= 0) {\n            this.line.getThis().addTrack(this.line.getThis().tracks.length);\n          }\n          this.track = this.line.getThis().tracks[0];\n          this.track.setSelect(true);\n          this.line.setSelect(false);\n          return true;\n        case \"Escape\":\n          this.line.setSelect(false);\n          this.line = null;\n          this.page?.setSelect(true);\n          return true;\n        case \" \":\n          this.line.addTrack(this.line.getThis().tracks.length);\n          return true;\n        case \"z\":\n          if (this.page) {\n            this.page.addLine(0);\n            this.selectLine(this.page.getThis().lines[0]);\n          }\n          return true;\n        case \"x\":\n          if (this.page) {\n            let idx = this.line.getThis().index;\n            this.page.addLine(idx + 1);\n            this.selectLine(this.page.getThis().lines[idx + 1]);\n          }\n          return true;\n        case \"c\":\n          if (this.page) {\n            this.page.addLine(this.page.getThis().lines.length);\n            this.selectLine(\n              this.page.getThis().lines[this.page.getThis().lines.length - 1]\n            );\n          }\n          return true;\n        case \"Backspace\":\n          if (this.page) {\n            let idx = this.line.getThis().index;\n            this.page.removeLine(this.line.getThis().index);\n            if (this.page.getThis().lines.length === 0) {\n              this.page.setSelect(true);\n              this.line.setSelect(false);\n              this.line = null;\n            } else {\n              if (idx === 0) {\n                this.line = this.page.getThis().lines[0];\n                this.line.setSelect(true);\n              } else {\n                this.line = this.page.getThis().lines[idx - 1];\n                this.line.setSelect(true);\n              }\n            }\n          }\n          return true;\n        case \"ArrowUp\":\n          if (this.page) {\n            if (this.line.getThis().index > 0) {\n              this.line.setSelect(false);\n              this.line = this.page.getThis().lines[\n                this.line.getThis().index - 1\n              ];\n              this.line.setSelect(true);\n              return true;\n            } else if (this.notation) {\n              if (this.page.getThis().index > 0) {\n                this.page = this.notation.getThis().pages[\n                  this.page.getThis().index - 1\n                ];\n                this.line.setSelect(false);\n                this.line = this.page.getThis().lines[\n                  this.page.getThis().lines.length - 1\n                ];\n                this.line.setSelect(true);\n                return true;\n              } else return false;\n            } else return false;\n          } else return false;\n        case \"ArrowDown\":\n          if (this.page !== null) {\n            let l = this.page.getThis().lines.length;\n            if (this.line.getThis().index < l - 1) {\n              this.line.setSelect(false);\n              this.line = this.page.getThis().lines[\n                this.line.getThis().index + 1\n              ];\n              this.line.setSelect(true);\n              return true;\n            } else if (this.notation) {\n              if (\n                this.page.getThis().index <\n                this.notation.getThis().pages.length - 1\n              ) {\n                this.page = this.notation.getThis().pages[\n                  this.page.getThis().index + 1\n                ];\n                this.line.setSelect(false);\n                this.line = this.page.getThis().lines[0];\n                this.line.setSelect(true);\n                return true;\n              } else return false;\n            } else return false;\n          } else return false;\n        default:\n          return false;\n      }\n    } else return false;\n  }\n  keyPage(ev: KeyboardEvent): boolean {\n    if (this.page !== null) {\n      switch (ev.key) {\n        case \"Enter\":\n          if (this.page.getThis().lines.length <= 0) {\n            this.page.getThis().addLine(this.page.getThis().lines.length);\n          }\n          this.line = this.page.getThis().lines[0];\n          this.line.setSelect(true);\n          this.page.setSelect(false);\n          return true;\n        case \"Escape\":\n          this.page.setSelect(false);\n          this.page = null;\n          this.notation?.setSelect(true);\n          return true;\n        case \" \":\n          this.page.addLine(this.page.getThis().lines.length);\n          return true;\n        case \"z\":\n          if (this.notation) {\n            this.notation.addPage(0);\n            this.selectPage(this.notation.getThis().pages[0]);\n          }\n          return true;\n        case \"x\":\n          if (this.notation) {\n            let idx = this.page.getThis().index;\n            this.notation.addPage(idx + 1);\n            this.selectPage(this.notation.getThis().pages[idx + 1]);\n          }\n          return true;\n        case \"c\":\n          if (this.notation) {\n            this.notation.addPage(this.notation.getThis().pages.length);\n            this.selectPage(\n              this.notation.getThis().pages[\n                this.notation.getThis().pages.length - 1\n              ]\n            );\n          }\n          return true;\n        case \"Backspace\":\n          if (this.notation) {\n            let idx = this.page.getThis().index;\n            this.notation?.reomvePage(this.page.getThis().index);\n            if (this.notation.getThis().pages.length === 0) {\n              this.notation.setSelect(true);\n              this.page.setSelect(false);\n              this.page = null;\n            } else {\n              if (idx === 0) {\n                this.page = this.notation.getThis().pages[0];\n                this.page.setSelect(true);\n              } else {\n                this.page = this.notation.getThis().pages[idx - 1];\n                this.page.setSelect(true);\n              }\n            }\n          }\n          return true;\n        case \"ArrowUp\":\n          if (this.notation) {\n            if (this.page.getThis().index > 0) {\n              this.page.setSelect(false);\n              this.page = this.notation.getThis().pages[\n                this.page.getThis().index - 1\n              ];\n              this.page.setSelect(true);\n              return true;\n            } else return true;\n          } else return false;\n        case \"ArrowDown\":\n          if (this.notation !== null) {\n            let l = this.notation.getThis().pages.length;\n            if (this.page.getThis().index < l - 1) {\n              this.page.setSelect(false);\n              this.page = this.notation.getThis().pages[\n                this.page.getThis().index + 1\n              ];\n              this.page.setSelect(true);\n              return true;\n            } else return true;\n          } else return false;\n        default:\n          return false;\n      }\n    } else return false;\n  }\n  keyNotation(ev: KeyboardEvent): boolean {\n    if (this.notation !== null) {\n      switch (ev.key) {\n        case \"Enter\":\n          if (this.notation.getThis().pages.length <= 0) {\n            this.notation\n              .getThis()\n              .addPage(this.notation.getThis().pages.length);\n          }\n          this.page = this.notation.getThis().pages[0];\n          this.page.setSelect(true);\n          this.notation.setSelect(false);\n          return true;\n        case \" \":\n          this.notation.addPage(this.notation.getThis().pages.length);\n          ev.returnValue = false;\n          return true;\n        default:\n          return false;\n      }\n    } else return false;\n  }\n}\n\nexport default Selector;\n","import React from \"react\";\nimport { Border, OuterBorder } from \"./Border\";\nimport MuseConfig from \"./MuseConfig\";\nimport Codec from \"./Codec\";\nimport Fraction from \"./Fraction\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport Selector, { SelectionNote, SelectionSubNote } from \"./Selector\";\nimport { Bar } from \"./MuseBar\";\n\nexport interface INote {\n  n: string;\n}\n\nexport class SubNote implements SelectionSubNote {\n  readonly config: MuseConfig;\n  @observable isSelect = false;\n  @observable note: Note;\n  @observable index: number;\n  @observable x: string = \"\";\n  @observable n: string = \"\";\n  @observable t: number = 0;\n  constructor(\n    x: string,\n    n: string,\n    t: number,\n    note: Note,\n    index: number,\n    config: MuseConfig\n  ) {\n    this.x = x;\n    this.n = n;\n    this.t = t;\n    this.note = note;\n    this.index = index;\n    this.config = config;\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  setNum(n: string) {\n    this.n = n;\n  }\n  reducePoint(h: number) {\n    this.t += h;\n  }\n  reduceLine(l: number) {\n    this.note.l += l;\n    if (this.note.l < 0) {\n      this.note.l = 0;\n    }\n  }\n  reduceTailPoint(p: number) {\n    this.note.p += p;\n    if (this.note.p < 0) {\n      this.note.p = 0;\n    }\n  }\n  getThis() {\n    return this;\n  }\n}\n\nexport class Note implements Codec, SelectionNote {\n  readonly config: MuseConfig;\n  @observable index: number;\n  @observable bar: Bar;\n  @observable subNotes: SubNote[] = [];\n  @observable l: number = 0;\n  @observable p: number = 0;\n  @observable d: number = 0;\n  @computed get dx(): number {\n    let dxx = false;\n    this.subNotes.forEach((it) => {\n      if (it.x !== \"\") {\n        dxx = true;\n      }\n    });\n    return dxx ? this.config.sigFontSize / 2 : 0;\n  }\n  @computed get time(): Fraction {\n    let r = new Fraction();\n    r.u = 1;\n    r.d *= Math.pow(2, this.l);\n    r.d *= this.d;\n    r.d *= Math.pow(2, this.p); //3/2 7/4 15/8\n    r.u *= Math.pow(2, this.p + 1) - 1;\n    return r.simplify();\n  }\n  @computed get notesY(): number[] {\n    let r: number[] = [];\n    let ny = 0;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            ny += x;\n          }\n        }\n      }\n      r.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          ny += x;\n        }\n      }\n    });\n    return r;\n  }\n  @computed get pointsY(): number[] {\n    let r: number[] = [];\n    let py = 0;\n    let ny = 0;\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x / 2;\n            r.push(-mb);\n            mb += x / 2;\n          }\n        }\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            py += x / 2;\n            r.push(py);\n            py += x / 2;\n            ny += x;\n          }\n        }\n      }\n      this.notesY.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      py += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          py += x / 2;\n          r.push(py);\n          py += x / 2;\n          ny += x;\n        }\n      }\n    });\n    return r;\n  }\n  @computed get tailPointsX(): number[] {\n    let r: number[] = [];\n    for (let i = 0; i < this.p; ++i) {\n      r.push(\n        this.dx + this.config.noteWidth + (i + 1 / 2) * this.config.tailPointGap\n      );\n    }\n    return r;\n  }\n  @computed get width(): number {\n    return this.dx + this.config.noteWidth + this.p * this.config.tailPointGap;\n  }\n  @computed get preHeight(): number {\n    let h = 0;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            h += x;\n          }\n        }\n      }\n      h += this.config.noteHeight;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          h += x;\n        }\n      }\n    });\n    return h;\n  }\n  @computed get height(): number {\n    return this.bar.notesMaxHeight;\n  }\n  @computed get x(): number {\n    return this.bar.notesX[this.index];\n  }\n  @computed get preMarginBottom(): number {\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    this.subNotes.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x;\n          }\n        }\n      }\n    });\n    return mb;\n  }\n  @computed get marginBottom(): number {\n    return this.bar.notesMaxMarginBottom;\n  }\n  @observable isSelect: boolean = false;\n  constructor(o: INote, bar: Bar, idx: number) {\n    this.config = bar.config;\n    this.bar = bar;\n    this.index = idx;\n    this.decode(o);\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  reduceLine(l: number) {\n    this.l += l;\n    if (this.l < 0) {\n      this.l = 0;\n    }\n  }\n  reduceTailPoint(p: number) {\n    this.p += p;\n    if (this.p < 0) {\n      this.p = 0;\n    }\n  }\n  addSubNote(index: number) {\n    this.subNotes = this.subNotes.splice(\n      index,\n      0,\n      new SubNote(\"\", \"0\", 0, this, this.subNotes.length, this.config)\n    );\n    this.subNotes.forEach((it, idx) => (it.index = idx));\n  }\n  removeSubNote(index: number) {\n    this.subNotes = this.subNotes.filter((it, idx) => idx !== index);\n    this.subNotes.forEach((it, idx) => (it.index = idx));\n  }\n  getThis() {\n    return this;\n  }\n\n  decode(o: INote): void {\n    if (o.n !== undefined) {\n      let n: string = o.n;\n      let pos = n.search(\"@\");\n      let ns = \"\";\n      let ts = \"\";\n      if (pos === -1) {\n        ns = n;\n        ts = \"0|0\";\n      } else {\n        ns = n.substr(0, pos);\n        ts = n.substr(pos + 1);\n      }\n      let ng = ns.split(\"|\");\n      ng.forEach((it, idx) => {\n        for (let i = 0; i < it.length; ++i) {\n          if (\n            (it.charCodeAt(i) <= 57 && it.charCodeAt(i) >= 48) ||\n            it.charCodeAt(i) === 45\n          ) {\n            let x = it.substr(0, i);\n            let n = it.charAt(i);\n            let t = it.substr(i + 1).length;\n            if (t !== 0 && it.charAt(i + 1) === \"-\") {\n              t = -t;\n            }\n            this.subNotes.push(new SubNote(x, n, t, this, idx, this.config));\n            break;\n          }\n        }\n      });\n      let tg = ts.split(\"|\");\n      if (tg.length === 3) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = parseInt(tg[2]);\n      } else if (tg.length === 2) {\n        this.l = parseInt(tg[0]);\n        this.p = parseInt(tg[1]);\n        this.d = 1;\n      } else if (tg.length === 1) {\n        this.l = parseInt(tg[0]);\n        this.p = 0;\n        this.d = 1;\n      } else {\n        this.l = 0;\n        this.p = 0;\n        this.d = 1;\n      }\n    }\n  }\n  code(): INote {\n    let ns: string = \"\";\n    this.subNotes.forEach((it, idx) => {\n      let t = \"\";\n      if (it.t > 0) {\n        for (let i = 0; i < it.t; ++i) {\n          t += \"+\";\n        }\n      } else {\n        for (let i = 0; i < -it.t; ++i) {\n          t += \"-\";\n        }\n      }\n      if (idx + 1 >= this.subNotes.length) {\n        ns += `${it.x}${it.n}${t}`;\n      } else {\n        ns += `${it.x}${it.n}${t}|`;\n      }\n    });\n    let n = `${ns}@${this.l}|${this.p}`;\n    return { n };\n  }\n}\n\nfunction castX(x: string) {\n  let m: Record<string, string> = {\n    S: \"#\",\n    F: \"b\",\n    DS: \"x\",\n    DF: \"d\",\n    N: \"n\",\n  };\n  return m[x] || \"\";\n}\n\nfunction pointGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-point\"}>\n      {note.pointsY.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            (note.dx + note.config.noteWidth / 2) +\n            \",\" +\n            (note.height - it + note.config.pointGap / 2) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction tailPoint(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__tail-point\"}>\n      {note.tailPointsX.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            it +\n            \",\" +\n            (note.height - note.config.noteHeight / 3) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\ninterface MuseSubNoteProps {\n  dx: number;\n  y: number;\n  w: number;\n  h: number;\n  subNote: SubNote;\n}\n\n@observer\nclass MuseSubNote extends React.Component<MuseSubNoteProps, {}> {\n  render() {\n    return (\n      <g\n        className={\"muse-note__subnote\"}\n        transform={\"translate(\" + 0 + \",\" + this.props.y + \")\"}\n        width={this.props.w}\n        height={this.props.h}\n        onClick={() => {\n          Selector.instance.selectSubNote(this.props.subNote);\n        }}\n      >\n        <text\n          fontFamily={this.props.subNote.config.noteFontFamily}\n          fontSize={this.props.subNote.config.noteFontSize}\n          transform={\"translate(\" + this.props.dx + \",\" + 0 + \")\"}\n        >\n          {this.props.subNote.n}\n        </text>\n        <text\n          fontFamily={this.props.subNote.config.noteFontFamily}\n          fontSize={this.props.subNote.config.sigFontSize}\n          transform={\n            \"translate(\" +\n            0 +\n            \",\" +\n            (this.props.subNote.config.sigFontSize -\n              this.props.subNote.config.noteHeight) +\n            \")\"\n          }\n        >\n          {castX(this.props.subNote.x)}\n        </text>\n        <Border\n          x={0}\n          y={-this.props.h}\n          w={this.props.w}\n          h={this.props.subNote.config.noteFontSize}\n          clazz={\"muse-note__subnote\"}\n          show={this.props.subNote.isSelect}\n        />\n      </g>\n    );\n  }\n}\n\n@observer\nclass MuseNote extends React.Component<{ note: Note }, {}> {\n  render() {\n    let clazz = \"muse-note\";\n    return (\n      <g\n        className={clazz}\n        transform={\"translate(\" + this.props.note.x + \",\" + 0 + \")\"}\n        width={this.props.note.width}\n        height={this.props.note.height}\n        onClick={() => {\n          Selector.instance.selectNote(this.props.note);\n        }}\n      >\n        <OuterBorder\n          w={this.props.note.width}\n          h={this.props.note.height + this.props.note.marginBottom}\n          clazz={clazz}\n          show={this.props.note.isSelect}\n          color={\"blue\"}\n        />\n        {this.props.note.subNotes.map((it, idx) => (\n          <MuseSubNote\n            key={idx}\n            dx={this.props.note.dx}\n            y={this.props.note.height - this.props.note.notesY[idx]}\n            w={this.props.note.width}\n            h={22}\n            subNote={it}\n          />\n        ))}\n        {pointGroup(this.props.note, clazz)}\n        {tailPoint(this.props.note, clazz)}\n      </g>\n    );\n  }\n}\n\nexport default MuseNote;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNote, { INote, Note } from \"./MuseNote\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer, useObserver } from \"mobx-react\";\nimport Fraction from \"./Fraction\";\nimport { Track } from \"./MuseTrack\";\nimport { SelectionBar } from \"./Selector\";\n\ninterface Baseline {\n  y: number;\n  s: number;\n  e: number;\n}\n\nexport interface IBar {\n  notes: INote[];\n}\n\nexport class Bar implements Codec, SelectionBar {\n  readonly config: MuseConfig;\n  @observable index: number;\n  @observable track: Track;\n  @observable notes: Note[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width(): number {\n    return this.track.barsWidth[this.index];\n  }\n  @computed get height(): number {\n    let h = 0;\n    this.notes.forEach((it) => {\n      let u = it.height + it.marginBottom;\n      h = u > h ? u : h;\n    });\n    return h;\n  }\n  @computed get x(): number {\n    return this.track.barsX[this.index];\n  }\n  @computed get y(): number {\n    return 0;\n  }\n  @computed get notesTime(): Fraction[] {\n    return this.notes.map((it) => it.time);\n  }\n  @computed get notesTimeSum(): Fraction {\n    return this.notesTime\n      .reduce((a, b) => a.plus(b), new Fraction())\n      .plus(new Fraction().init(1, 1));\n  }\n  @computed get notesWidth(): number[] {\n    return this.notes.map((it) => it.width);\n  }\n  @computed get notesX(): number[] {\n    let space = this.width - this.notesWidthSum;\n    let unit = new Fraction().init(space, 1).divide(this.notesTimeSum);\n    let x = unit.toNumber();\n    return this.notesWidth.map((it, idx) => {\n      let r = x;\n      x += it + this.notesTime[idx].multiply(unit).toNumber();\n      return r;\n    });\n  }\n  @computed get preNotesMaxHeight(): number {\n    return Math.max(...this.notes.map((it) => it.preHeight));\n  }\n  @computed get notesMaxHeight(): number {\n    return this.track.notesMaxHeight;\n  }\n  @computed get preNotesMaxMarginBottom(): number {\n    return Math.max(...this.notes.map((it) => it.preMarginBottom));\n  }\n  @computed get notesMaxMarginBottom(): number {\n    return this.track.notesMaxMarginBottom;\n  }\n  @computed get baselineGroup(): Baseline[] {\n    let r: {\n      y: number;\n      s: number;\n      e: number;\n    }[] = [];\n    for (let i = 0; ; ++i) {\n      let x = 0;\n      let s = 0;\n      let e = -1;\n      this.notes.forEach((it, idx) => {\n        if (it.l > i) {\n          e = idx;\n          x++;\n        } else {\n          if (s <= e) r.push({ y: i, s: s, e: e });\n          s = idx + 1;\n          e = idx;\n        }\n      });\n      if (s <= e) r.push({ y: i, s: s, e: e });\n      if (x === 0) {\n        break;\n      }\n    }\n    return r;\n  }\n  @computed get notesWidthSum(): number {\n    let w = 0;\n    this.notes.forEach((it) => (w += it.width));\n    return w;\n  }\n  constructor(o: IBar, index: number, track: Track, config: MuseConfig) {\n    this.index = index;\n    this.track = track;\n    this.config = config;\n    this.decode(o);\n  }\n  addNote(index: number) {\n    this.notes = this.notes.splice(\n      index,\n      0,\n      new Note({ n: \"0\" }, this, this.notes.length)\n    );\n    this.notes.forEach((it, idx) => (it.index = idx));\n  }\n  removeNote(index: number) {\n    this.notes = this.notes.filter((it, idx) => idx !== index);\n    this.notes.forEach((it, idx) => (it.index = idx));\n  }\n  setSelect(i: boolean) {\n    this.isSelect = i;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: IBar): void {\n    if (o.notes !== undefined) {\n      o.notes.forEach((it: INote, idx) => {\n        this.notes.push(new Note(it, this, idx));\n      });\n    }\n  }\n  code(): IBar {\n    let notes: INote[] = this.notes.map((it) => it.code());\n    return { notes };\n  }\n}\n\nconst BarLine: React.FC<{ w: number; h: number; clazz: string }> = (props: {\n  w: number;\n  h: number;\n  clazz: string;\n}) => {\n  let [width, height] = useObserver(() => {\n    return [props.w, props.h];\n  });\n  return (\n    <line\n      className={props.clazz + \"__bar-line\"}\n      x1={width}\n      y1={0}\n      x2={width}\n      y2={height}\n      strokeWidth={1}\n      stroke=\"black\"\n    />\n  );\n};\n\nconst BaseLine: React.FC<{ bar: Bar; clazz: string }> = ({\n  bar,\n  clazz,\n}: {\n  bar: Bar;\n  clazz: string;\n}) => {\n  let [baselineGroup, notes] = useObserver(() => {\n    return [bar.baselineGroup, bar.notes];\n  });\n  return (\n    <g className={clazz + \"__base-line\"}>\n      {baselineGroup.map((it, idx) => (\n        <line\n          key={idx}\n          x1={notes[it.s].x}\n          y1={notes[it.s].height + (it.y + 1) * bar.config.pointGap}\n          x2={notes[it.e].x + bar.notes[it.e].width}\n          y2={notes[it.s].height + (it.y + 1) * bar.config.pointGap}\n          stroke={\"black\"}\n          strokeWidth={1}\n        />\n      ))}\n    </g>\n  );\n};\n\n@observer\nclass MuseBar extends React.Component<{ bar: Bar }, {}> {\n  render() {\n    let notes = this.props.bar.notes;\n    let clazz = \"muse-bar\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.bar.x + \",\" + this.props.bar.y + \")\"\n        }\n        width={this.props.bar.width}\n        height={this.props.bar.height}\n      >\n        <Border\n          w={this.props.bar.width}\n          h={this.props.bar.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.bar.isSelect}\n        />\n        <BarLine\n          w={this.props.bar.width}\n          h={this.props.bar.height}\n          clazz={clazz}\n        />\n        {notes.map((it, idx) => (\n          <MuseNote key={idx} note={it} />\n        ))}\n        <BaseLine bar={this.props.bar} clazz={clazz} />\n      </g>\n    );\n  }\n}\n\nexport default MuseBar;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseBar, { Bar, IBar } from \"./MuseBar\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { Line } from \"./MuseLine\";\nimport Fraction from \"./Fraction\";\nimport { observer } from \"mobx-react\";\nimport { SelectionTrack } from \"./Selector\";\n\nexport interface ITrack {\n  bars: IBar[];\n}\n\nexport class Track implements Codec, SelectionTrack {\n  readonly config: MuseConfig;\n  @observable index: number;\n  @observable line: Line;\n  @observable bars: Bar[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width(): number {\n    return this.line.width;\n  }\n  @computed get height(): number {\n    let h = 0;\n    this.bars.forEach((it) => {\n      h = it.height > h ? it.height : h;\n    });\n    return h;\n  }\n  @computed get x(): number {\n    return 0;\n  }\n  @computed get y(): number {\n    return this.line.tracksY[this.index];\n  }\n  @computed get barsTime(): Fraction[] {\n    return this.bars.map((it) => it.notesTimeSum);\n  }\n  @computed get barsWidth(): number[] {\n    let timeSum = this.barsTime.reduce((a, b) => a.plus(b), new Fraction());\n    let space = this.width - this.notesWidthSum;\n    let unit = new Fraction().init(space, 1).divide(timeSum);\n    return this.barsNotesWidth.map((it, idx) => {\n      return it + this.barsTime[idx].multiply(unit).toNumber();\n    });\n  }\n  @computed get barsX(): number[] {\n    let x = 0;\n    return this.barsWidth.map((it) => {\n      let r = x;\n      x += it;\n      return r;\n    });\n  }\n  @computed get notesMaxHeight(): number {\n    return Math.max(...this.bars.map((it) => it.preNotesMaxHeight));\n  }\n  @computed get notesMaxMarginBottom(): number {\n    return Math.max(...this.bars.map((it) => it.preNotesMaxMarginBottom));\n  }\n  @computed get notesWidthSum(): number {\n    return this.barsNotesWidth.reduce((a, b) => a + b, 0);\n  }\n  @computed get barsNotesWidth(): number[] {\n    return this.bars.map((it) => it.notesWidthSum);\n  }\n  constructor(o: ITrack, index: number, line: Line, config: MuseConfig) {\n    this.index = index;\n    this.line = line;\n    this.config = config;\n    this.decode(o);\n  }\n  addBar(index: number) {\n    this.bars = this.bars.splice(\n      index,\n      0,\n      new Bar({ notes: [{ n: \"0\" }] }, this.bars.length, this, this.config)\n    );\n    this.bars.forEach((it, idx) => (it.index = idx));\n  }\n  removeBar(index: number) {\n    this.bars = this.bars.filter((it, idx) => idx !== index);\n    this.bars.forEach((it, idx) => (it.index = idx));\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: ITrack): void {\n    if (o.bars !== undefined) {\n      o.bars.forEach((it: any, idx) => {\n        this.bars.push(new Bar(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): ITrack {\n    let bars: IBar[] = this.bars.map((it) => it.code());\n    return { bars };\n  }\n}\n\n@observer\nclass MuseTrack extends React.Component<{ track: Track }> {\n  render() {\n    let clazz = \"muse-track\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.track.x + \",\" + this.props.track.y + \")\"\n        }\n        width={this.props.track.width}\n        height={this.props.track.height}\n      >\n        <Border\n          w={this.props.track.width}\n          h={this.props.track.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.track.isSelect}\n        />\n        {this.props.track.bars.map((it, idx) => (\n          <MuseBar key={idx} bar={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MuseTrack;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseTrack, { ITrack, Track } from \"./MuseTrack\";\nimport { Border } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { Page } from \"./MusePage\";\nimport { SelectionLine } from \"./Selector\";\n\nexport interface ILine {\n  tracks: ITrack[];\n}\n\nexport class Line implements Codec, SelectionLine {\n  readonly config: MuseConfig;\n  @observable page: Page;\n  @observable index: number;\n  @observable tracks: Track[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width() {\n    return this.page.width;\n  }\n  @computed get height() {\n    let h = 0;\n    this.tracks.forEach((it) => {\n      h += it.height + this.config.trackGap;\n    });\n    h -= this.config.trackGap;\n    return h;\n  }\n  @computed get x() {\n    return this.page.x;\n  }\n  @computed get y() {\n    return this.page.linesY[this.index];\n  }\n  @computed get tracksY(): number[] {\n    let y = 0;\n    return this.tracks.map((it) => {\n      let r = y;\n      y += it.height + this.config.trackGap;\n      return r;\n    });\n  }\n  constructor(o: ILine, index: number, page: Page, config: MuseConfig) {\n    this.page = page;\n    this.index = index;\n    this.config = config;\n    this.decode(o);\n  }\n  addTrack(index: number) {\n    this.tracks = this.tracks.splice(\n      index,\n      0,\n      new Track(\n        { bars: [{ notes: [{ n: \"0\" }] }] },\n        this.tracks.length,\n        this,\n        this.config\n      )\n    );\n    this.tracks.forEach((it, idx) => (it.index = idx));\n  }\n  removeTrack(index: number) {\n    this.tracks = this.tracks.filter((it, idx) => idx !== index);\n    this.tracks.forEach((it, idx) => (it.index = idx));\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: ILine): void {\n    if (o.tracks !== undefined) {\n      o.tracks.forEach((it: ITrack, idx) => {\n        this.tracks.push(new Track(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): ILine {\n    let tracks: ITrack[] = this.tracks.map((it) => it.code());\n    return { tracks };\n  }\n}\n\nconst LineHead: React.FC<{ height: number; clazz: string }> = ({\n  height,\n  clazz,\n}: {\n  height: number;\n  clazz: string;\n}) => {\n  return (\n    <g className={clazz + \"__line-head\"}>\n      <line x1={0} y1={0} x2={0} y2={height} strokeWidth={1} stroke=\"black\" />\n    </g>\n  );\n};\n\n@observer\nclass MuseLine extends React.Component<{ line: Line }> {\n  render() {\n    let clazz = \"muse-line\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" + this.props.line.x + \",\" + this.props.line.y + \")\"\n        }\n        width={this.props.line.width}\n        height={this.props.line.height}\n      >\n        <Border\n          w={this.props.line.width}\n          h={this.props.line.height}\n          x={0}\n          y={0}\n          clazz={clazz}\n          show={this.props.line.isSelect}\n        />\n        <LineHead height={this.props.line.height} clazz={clazz} />\n        {this.props.line.tracks.map((it, idx) => (\n          <MuseTrack key={idx} track={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MuseLine;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseLine, { ILine, Line } from \"./MuseLine\";\nimport { Border, OuterBorder } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { Notation } from \"./MuseNotation\";\nimport { observer } from \"mobx-react\";\nimport { SelectionPage } from \"./Selector\";\n\nexport interface IPage {\n  lines: ILine[];\n}\n\nexport class Page implements Codec, SelectionPage {\n  readonly config: MuseConfig;\n  @observable notation: Notation;\n  @observable index: number;\n  @observable lines: Line[] = [];\n  @observable isSelect: boolean = false;\n  @computed get width() {\n    return this.config.pageWidth - this.config.pageMarginHorizontal * 2;\n  }\n  @computed get height() {\n    return (\n      this.config.pageWidth * this.config.pageE -\n      this.config.pageMarginVertical -\n      this.marginTop\n    );\n  }\n  @computed get x() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get y() {\n    return (\n      this.marginTop + this.index * (this.config.pageWidth * this.config.pageE)\n    );\n  }\n  @computed get marginTop() {\n    let mt = 0;\n    if (this.index === 0) {\n      mt += this.config.pageMarginVertical;\n      let g = this.config.infoGap;\n      mt += this.config.infoTitleFontSize + g;\n      mt += this.config.infoSubtitleFontSize + g;\n      if (this.notation.info.author.length > 2) {\n        mt += this.notation.info.author.length * (this.config.infoFontSize + g);\n      } else {\n        mt += 2 * (this.config.infoFontSize + g);\n      }\n    } else {\n      mt = this.config.pageMarginVertical;\n    }\n    return mt;\n  }\n  @computed get marginBottom() {\n    return this.config.pageMarginVertical;\n  }\n  @computed get marginLeft() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get marginRight() {\n    return this.config.pageMarginHorizontal;\n  }\n  @computed get linesHeight(): number[] {\n    return this.lines.map((it) => it.height);\n  }\n  @computed get linesY() {\n    let y = this.marginTop;\n    let sum = this.linesHeight.reduce((a, b) => a + b, 0);\n    let gap = (this.height - sum) / (this.lines.length - 1);\n    return this.linesHeight.map((it) => {\n      let r = y;\n      y += it + gap;\n      return r;\n    });\n  }\n  constructor(o: IPage, index: number, notation: Notation, config: MuseConfig) {\n    this.index = index;\n    this.notation = notation;\n    this.config = config;\n    this.decode(o);\n  }\n  addLine(index: number) {\n    this.lines = this.lines.splice(\n      index,\n      0,\n      new Line(\n        { tracks: [{ bars: [{ notes: [{ n: \"0\" }] }] }] },\n        this.lines.length,\n        this,\n        this.config\n      )\n    );\n    this.lines.forEach((it, idx) => (it.index = idx));\n  }\n  removeLine(index: number) {\n    this.lines = this.lines.filter((it, idx) => idx !== index);\n    this.lines.forEach((it, idx) => (it.index = idx));\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: IPage): void {\n    if (o.lines !== undefined) {\n      o.lines.forEach((it: ILine, idx) => {\n        this.lines.push(new Line(it, idx, this, this.config));\n      });\n    }\n  }\n  code(): IPage {\n    let lines: ILine[] = this.lines.map((it) => it.code());\n    return { lines };\n  }\n}\n\ninterface PageIndexProps {\n  index: number;\n  x: number;\n  y: number;\n  clazz: string;\n  config: MuseConfig;\n}\n\nconst PageIndex: React.FC<PageIndexProps> = ({\n  index,\n  x,\n  y,\n  clazz,\n  config,\n}: PageIndexProps) => {\n  return (\n    <g\n      className={clazz + \"__page-index\"}\n      transform={\"translate(\" + x + \",\" + y + \")\"}\n    >\n      <text\n        textAnchor={\"middle\"}\n        fontFamily={config.textFontFamily}\n        fontSize={config.pageIndexFontSize}\n      >\n        {(index + 1).toString()}\n      </text>\n    </g>\n  );\n};\n\n@observer\nclass MusePage extends React.Component<{ page: Page }> {\n  render() {\n    let clazz = \"muse-page\";\n    return (\n      <g\n        className={clazz}\n        transform={\n          \"translate(\" +\n          (this.props.page.x - this.props.page.marginLeft) +\n          \",\" +\n          (this.props.page.y - this.props.page.marginTop) +\n          \")\"\n        }\n        width={\n          this.props.page.width +\n          this.props.page.marginLeft +\n          this.props.page.marginRight\n        }\n        height={\n          this.props.page.height +\n          this.props.page.marginTop +\n          this.props.page.marginBottom\n        }\n      >\n        <Border\n          w={this.props.page.width}\n          h={this.props.page.height}\n          x={this.props.page.x}\n          y={this.props.page.marginTop}\n          clazz={clazz}\n          show={this.props.page.isSelect}\n        />\n        <OuterBorder\n          w={\n            this.props.page.width +\n            this.props.page.marginLeft +\n            this.props.page.marginLeft\n          }\n          h={\n            this.props.page.height +\n            this.props.page.marginTop +\n            this.props.page.marginBottom\n          }\n          clazz={clazz}\n          show={true}\n        />\n        <PageIndex\n          index={this.props.page.index}\n          x={this.props.page.marginLeft + this.props.page.width / 2}\n          y={\n            this.props.page.marginTop +\n            this.props.page.height +\n            this.props.page.marginBottom / 2\n          }\n          clazz={clazz}\n          config={this.props.page.config}\n        />\n        {this.props.page.lines.map((it, idx) => (\n          <MuseLine key={idx} line={it} />\n        ))}\n      </g>\n    );\n  }\n}\n\nexport default MusePage;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MusePage, { IPage, Page } from \"./MusePage\";\nimport { Border, OuterBorder } from \"./Border\";\nimport Codec from \"./Codec\";\nimport { computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { SelectionNotation } from \"./Selector\";\n\nexport class NotationInfo {\n  @observable title: string = \"\";\n  @observable subtitle: string = \"\";\n  @observable author: string[] = [];\n  @observable speed: string = \"\";\n  @observable rhythmic: string = \"\";\n  @observable C: string = \"\";\n}\n\nexport interface INotation {\n  title: string;\n  subtitle: string;\n  author: string;\n  rhythmic: string;\n  speed: string;\n  C: string;\n  pages: IPage[];\n}\n\nexport class Notation implements Codec, SelectionNotation {\n  readonly config: MuseConfig;\n  @observable pages: Page[] = [];\n  @observable isSelect = false;\n  @observable info: NotationInfo = new NotationInfo();\n  @computed get height() {\n    let h = 0;\n    this.pages.forEach(\n      (it) => (h += it.height + it.marginTop + it.marginBottom)\n    );\n    return h;\n  }\n  @computed get width() {\n    return this.config.pageWidth;\n  }\n  constructor(o: INotation, config: MuseConfig) {\n    this.config = config;\n    this.decode(o);\n  }\n  addPage(index: number) {\n    this.pages = this.pages.splice(\n      index,\n      0,\n      new Page(\n        { lines: [{ tracks: [{ bars: [{ notes: [{ n: \"0\" }] }] }] }] },\n        this.pages.length,\n        this,\n        this.config\n      )\n    );\n    this.pages.forEach((it, idx) => (it.index = idx));\n  }\n  reomvePage(index: number) {\n    this.pages = this.pages.filter((it, idx) => idx !== index);\n    this.pages.forEach((it, idx) => (it.index = idx));\n  }\n  setSelect(s: boolean) {\n    this.isSelect = s;\n  }\n  getThis() {\n    return this;\n  }\n  decode(o: INotation): void {\n    if (o.pages !== undefined) {\n      o.pages.forEach((it: IPage, idx) => {\n        this.pages.push(new Page(it, idx, this, this.config));\n      });\n    }\n    if (o.title !== undefined) {\n      this.info.title = o.title;\n    }\n    if (o.subtitle !== undefined) {\n      this.info.subtitle = o.subtitle;\n    }\n    if (o.author !== undefined) {\n      this.info.author = o.author.toString().split(\"|\");\n    }\n    if (o.speed !== undefined) {\n      this.info.speed = o.speed;\n    }\n    if (o.rhythmic) {\n      this.info.rhythmic = o.rhythmic;\n    }\n    if (o.C) {\n      this.info.C = o.C;\n    }\n  }\n  code(): INotation {\n    let pages: IPage[] = this.pages.map((it) => it.code());\n    let author: string = \"\";\n    this.info.author.forEach((it, idx) => {\n      if (idx === this.info.author.length - 1) {\n        author += it;\n      } else {\n        author += it + \"|\";\n      }\n    });\n    return {\n      title: this.info.title,\n      subtitle: this.info.subtitle,\n      author: author,\n      rhythmic: this.info.rhythmic,\n      speed: this.info.speed,\n      C: this.info.C,\n      pages,\n    };\n  }\n}\n\ninterface MuseNotationInfoProps {\n  info: NotationInfo;\n  config: MuseConfig;\n  clazz: string;\n}\n\nconst MuseNotationInfo: React.FC<MuseNotationInfoProps> = ({\n  info,\n  config,\n  clazz,\n}: MuseNotationInfoProps) => {\n  let y = 0;\n  y += config.pageMarginVertical;\n  let title = (\n    <text\n      className={clazz + \"__info-title\"}\n      fontFamily={config.textFontFamily}\n      width={config.pageWidth}\n      textAnchor={\"middle\"}\n      fontSize={config.infoTitleFontSize}\n      transform={\"translate(\" + config.pageWidth / 2 + \",\" + y + \")\"}\n    >\n      {info.title}\n    </text>\n  );\n  y += config.infoTitleFontSize + config.infoGap;\n  let subtitle = (\n    <text\n      className={clazz + \"__info-subtitle\"}\n      fontFamily={config.textFontFamily}\n      width={config.pageWidth}\n      textAnchor={\"middle\"}\n      fontSize={config.infoSubtitleFontSize}\n      transform={\"translate(\" + config.pageWidth / 2 + \",\" + y + \")\"}\n    >\n      {info.subtitle}\n    </text>\n  );\n  let y1 = y;\n  let x = info.author.length;\n  let author = (\n    <g className={clazz + \"__info-author\"}>\n      {info.author.map((it, idx) => {\n        y1 += config.infoFontSize + config.infoGap;\n        if (idx < x - 2) {\n          y += config.infoFontSize + config.infoGap;\n        }\n        return (\n          <text\n            key={idx}\n            fontFamily={config.textFontFamily}\n            width={config.pageWidth}\n            fontSize={config.infoFontSize}\n            textAnchor={\"end\"}\n            x={0}\n            transform={\n              \"translate(\" +\n              (config.pageWidth - config.pageMarginHorizontal) +\n              \",\" +\n              y1 +\n              \")\"\n            }\n          >\n            {it}\n          </text>\n        );\n      })}\n    </g>\n  );\n  let y2 = y + (config.infoGap + config.infoSubtitleFontSize);\n  let y3 = y2 + (config.infoGap + config.infoFontSize);\n  let rythimic = (\n    <g className={clazz + \"__info-rythmic\"} width={config.pageWidth}>\n      <text\n        fontFamily={config.textFontFamily}\n        width={config.pageWidth}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y2 + \")\"}\n      >\n        {info.speed}\n      </text>\n      <text\n        fontFamily={config.textFontFamily}\n        width={config.pageWidth}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y3 + \")\"}\n      >\n        {`1=${info.C} ${info.rhythmic}`}\n      </text>\n    </g>\n  );\n  return (\n    <g className={clazz + \"__info\"} width={config.pageWidth}>\n      {title}\n      {subtitle}\n      {author}\n      {rythimic}\n    </g>\n  );\n};\n\n@observer\nclass MuseNotation extends React.Component<{ notation: Notation }, {}> {\n  render() {\n    let margin = 10;\n    let clazz = \"muse-notation\";\n    return (\n      <svg\n        className=\"muse\"\n        width={this.props.notation.width + margin * 2}\n        height={this.props.notation.height + margin * 2}\n      >\n        <g\n          className={clazz}\n          transform={\"translate(\" + margin + \",\" + margin + \")\"}\n          width={this.props.notation.width}\n          height={this.props.notation.height}\n        >\n          <MuseNotationInfo\n            info={this.props.notation.info}\n            config={this.props.notation.config}\n            clazz={clazz}\n          />\n          <Border\n            w={this.props.notation.width}\n            h={this.props.notation.height}\n            x={0}\n            y={0}\n            clazz={clazz}\n            show={this.props.notation.isSelect}\n          />\n          <OuterBorder\n            w={this.props.notation.width}\n            h={this.props.notation.height}\n            clazz={clazz}\n          />\n          {this.props.notation.pages.map((it, idx) => (\n            <MusePage key={idx} page={it} />\n          ))}\n        </g>\n      </svg>\n    );\n  }\n}\n\nexport default MuseNotation;\n","import React from \"react\";\nimport \"./App.css\";\nimport MuseConfig from \"./muse/MuseConfig\";\nimport MuseNotation, { Notation } from \"./muse/MuseNotation\";\nclass App extends React.Component<\n  {},\n  {\n    error: any | null;\n    isLoaded: boolean;\n    notation: Notation | null;\n  }\n> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      notation: null,\n    };\n  }\n\n  componentDidMount() {\n    let url = \"https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/b.json\";\n    // let url = \"http://localhost:8888/b.json\";\n    fetch(url)\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoaded: true,\n            notation: new Notation(JSON.parse(result), new MuseConfig()),\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error: error,\n          });\n        }\n      );\n  }\n  render() {\n    if (this.state.notation) {\n      return (\n        <div className=\"app\">\n          <h1>Example</h1>\n          {this.state.isLoaded ? (\n            this.state.error ? (\n              \"error\"\n            ) : (\n              <MuseNotation notation={this.state.notation} />\n            )\n          ) : (\n            \"loading...\"\n          )}\n          <button\n            onClick={() => {\n              console.log(JSON.stringify(this.state.notation?.code()));\n            }}\n          >\n            log\n          </button>\n        </div>\n      );\n    } else return <></>;\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}