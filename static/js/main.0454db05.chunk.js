(this["webpackJsonpmuse-react"]=this["webpackJsonpmuse-react"]||[]).push([[0],{18:function(t,e,i){t.exports=i(26)},23:function(t,e,i){},24:function(t,e,i){},26:function(t,e,i){"use strict";i.r(e);var n,a,r,o,s,c=i(0),h=i.n(c),l=i(15),u=i.n(l),m=(i(23),i(4)),f=i(5),d=i(12),g=i(10),p=(i(24),function t(){Object(m.a)(this,t),this.noteHeight=22,this.noteWidth=11,this.noteFontSize=22,this.noteFontFamily="serif",this.sigFontSize=14,this.trackGap=10,this.lineGap=20,this.pointGap=5,this.tailPointGap=8,this.pointRound=1.5,this.pageE=1.414,this.notationWidth=1e3,this.pageMarginHorizontal=100,this.pageMarginVertical=110,this.infoTitleFontSize=34,this.infoSubtitleFontSize=22,this.infoGap=7,this.infoFontSize=20,this.pageIndexFontSize=20,this.textFontFamily="serif"}),b=i(3),v=i(2),y=(i(8),function(){function t(){Object(m.a)(this,t),this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.marginTop=void 0,this.marginBottom=void 0,this.marginLeft=void 0,this.marginRight=void 0,this.x=0,this.y=0,this.width=0,this.height=0,this.marginBottom=0,this.marginTop=0,this.marginLeft=0,this.marginRight=0}return Object(f.a)(t,[{key:"init",value:function(t,e,i,n,a,r){this.x=t,this.y=e,this.width=i,this.height=n,this.marginBottom=r,this.marginTop=r,this.marginLeft=a,this.marginRight=a}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.marginBottom=t.marginBottom,this.marginTop=t.marginTop,this.marginLeft=t.marginLeft,this.marginRight=t.marginRight}}]),t}()),w=i(7),z=function(t){var e=t.dimens,i=t.clazz,n=t.show,a=void 0!==n&&n,r=t.color,o=void 0===r?"blue":r;return a?h.a.createElement("rect",{className:i+"__border",transform:"translate("+e.marginLeft+","+e.marginTop+")",width:e.width,height:e.height,stroke:o,strokeWidth:"0.4",fill:"none"}):h.a.createElement(h.a.Fragment,null)},j=function(t){var e=t.dimens,i=t.clazz,n=t.show,a=void 0!==n&&n,r=t.color,o=void 0===r?"gray":r;return a?h.a.createElement("rect",{className:i+"__outer-border",transform:"translate(0,0)",width:e.width+e.marginLeft+e.marginRight,height:e.height+e.marginTop+e.marginBottom,stroke:o,strokeWidth:"0.4",fill:"none"}):h.a.createElement(h.a.Fragment,null)},O=function(){function t(e){Object(m.a)(this,t),this.u=0,this.d=1,e&&this.parse(e)}return Object(f.a)(t,[{key:"parse",value:function(t){var e=t.search("/");-1!==e?(this.u=parseInt(t.substr(0,e)),this.d=parseInt(t.substr(e+1))):this.u=parseInt(t)}},{key:"toString",value:function(){return 1===this.d?this.u.toString():this.u.toString()+"/"+this.d.toString()}},{key:"simplify",value:function(){return this}},{key:"add",value:function(e){var i=new t(null);return i.u=this.u*e.d+this.d*e.u,i.d=this.d*e.d,i.simplify()}},{key:"minus",value:function(){return new t(null)}},{key:"toNumber",value:function(){return this.u/this.d}}]),t}(),E=i(1),k=i(6),x=(n=function(){function t(e,i){Object(m.a)(this,t),this.config=void 0,Object(b.a)(this,"noteGroup",a,this),this.l=0,this.p=0,this.d=0,this.dx=0,this.notesY=[],this.pointsY=[],this.tailPointsX=[],Object(b.a)(this,"dimens",r,this),Object(b.a)(this,"isSelect",o,this),this.config=i,this.decode(e)}return Object(f.a)(t,[{key:"time",get:function(){var t=new O("");return t.u=1,t.d*=Math.pow(2,this.l),t.d*=this.d,t.d*=Math.pow(2,this.p),t.u*=Math.pow(2,this.p+1)-1,t.simplify()}}]),Object(f.a)(t,[{key:"settle",value:function(){var t=this,e=this.dx+this.config.noteWidth+this.p*this.config.tailPointGap,i=0,n=0;n+=this.l*this.config.pointGap;var a=0;this.noteGroup.forEach((function(e,r){if(e.t<0){if(0===r)for(var o=-e.t;o>0;--o){var s=t.config.pointGap;n+=s/2,t.pointsY.push(-n),n+=s/2}if(0!==r)for(var c=-e.t;c>0;--c){var h=t.config.pointGap;a+=h/2,t.pointsY.push(a),a+=h/2,i+=h}}t.notesY.push(i);var l=t.config.noteHeight;if(i+=l,a+=l,e.t>0)for(var u=e.t;u>0;--u){var m=t.config.pointGap;a+=m/2,t.pointsY.push(a),a+=m/2,i+=m}}));for(var r=0;r<this.p;++r)this.tailPointsX.push(this.dx+this.config.noteWidth+(r+.5)*this.config.tailPointGap);this.dimens.width=e,this.dimens.height=i,this.dimens.marginBottom=n}},{key:"decode",value:function(t){var e=this;if(void 0!==t.n){var i=t.n,n=i.search("@"),a="",r="";-1===n?(a=i,r="0|0"):(a=i.substr(0,n),r=i.substr(n+1)),a.split("|").forEach((function(t){for(var i=0;i<t.length;++i)if(t.charCodeAt(i)<=57&&t.charCodeAt(i)>=48||45===t.charCodeAt(i)){var n=t.substr(0,i),a=t.charAt(i),r=t.substr(i+1).length;0!==r&&"-"===t.charAt(i+1)&&(r=-r),e.noteGroup.push({x:n,n:a,t:r}),""!==n&&(e.dx=e.config.sigFontSize/2);break}}));var o=r.split("|");3===o.length?(this.l=parseInt(o[0]),this.p=parseInt(o[1]),this.d=parseInt(o[2])):2===o.length?(this.l=parseInt(o[0]),this.p=parseInt(o[1]),this.d=1):1===o.length?(this.l=parseInt(o[0]),this.p=0,this.d=1):(this.l=0,this.p=0,this.d=1)}void 0!==t.dimens&&(this.dimens=t.dimens)}},{key:"code",value:function(){var t=this,e="";return this.noteGroup.forEach((function(i,n){var a="";if(i.t>0)for(var r=0;r<i.t;++r)a+="+";else for(var o=0;o<-i.t;++o)a+="-";n+1>=t.noteGroup.length?e+="".concat(i.x).concat(i.n).concat(a):e+="".concat(i.x).concat(i.n).concat(a,"|")})),{n:"".concat(e,"@").concat(this.l,"|").concat(this.p)}}}]),t}(),a=Object(v.a)(n.prototype,"noteGroup",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(v.a)(n.prototype,"time",[E.f],Object.getOwnPropertyDescriptor(n.prototype,"time"),n.prototype),r=Object(v.a)(n.prototype,"dimens",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),o=Object(v.a)(n.prototype,"isSelect",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n);var F,S,G,N,_,L,T,B,R,C,M,W,I,A,H,Y,P,X,D,J,V,$,q,K,Q,U,Z=Object(k.c)(s=function(t){Object(d.a)(i,t);var e=Object(g.a)(i);function i(){return Object(m.a)(this,i),e.apply(this,arguments)}return Object(f.a)(i,[{key:"render",value:function(){var t=this,e=this.props.note,i=e.dimens,n="muse-note";return h.a.createElement("g",{className:n,transform:"translate("+(i.x-i.marginLeft)+","+(i.y-i.marginTop)+")",width:i.width+i.marginLeft+i.marginRight,height:i.height+i.marginTop+i.marginBottom,onClick:function(){t.props.note.isSelect=!t.props.note.isSelect}},h.a.createElement(j,{dimens:i,clazz:n,show:e.isSelect,color:"blue"}),function(t,e){return h.a.createElement("g",{className:e+"__group-note"},t.noteGroup.map((function(i,n){return h.a.createElement("g",{className:e+"__note-one",key:n,width:t.dimens.width,height:t.notesY[n],transform:"translate(0,"+(t.dimens.height-t.notesY[n])+")"},h.a.createElement("text",{fontFamily:t.config.noteFontFamily,fontSize:t.config.noteFontSize,transform:"translate("+t.dx+",0)"},i.n),h.a.createElement("text",{fontFamily:t.config.noteFontFamily,fontSize:t.config.sigFontSize,transform:"translate(0,"+(t.config.sigFontSize-t.config.noteHeight)+")"},{S:"#",F:"b",DS:"x",DF:"d",N:"n"}[i.x]||""))})))}(e,n),function(t,e){return h.a.createElement("g",{className:e+"__group-point"},t.pointsY.map((function(e,i){return h.a.createElement("circle",{key:i,r:t.config.pointRound,fill:"black",transform:"translate("+(t.dx+t.config.noteWidth/2)+","+(t.dimens.height-e+t.config.pointGap/2)+")"})})))}(e,n),function(t,e){return h.a.createElement("g",{className:e+"__tail-point"},t.tailPointsX.map((function(e,i){return h.a.createElement("circle",{key:i,r:t.config.pointRound,fill:"black",transform:"translate("+e+","+(t.dimens.height-t.config.noteHeight/3)+")"})})))}(e,n))}}]),i}(h.a.Component))||s,tt=i(11),et=(F=function(){function t(e,i){Object(m.a)(this,t),this.config=void 0,Object(b.a)(this,"notes",S,this),Object(b.a)(this,"dimens",G,this),this.unitNum=0,this.notesX=[],this.baselineGroup=[],this.config=i,this.decode(e)}return Object(f.a)(t,[{key:"generateBaseline",value:function(){for(var t=this,e=function(e){var i=0,n=0,a=-1;if(t.notes.forEach((function(r,o){r.l>e?(a=o,i++):(n<=a&&t.baselineGroup.push({y:e,s:n,e:a}),n=o+1,a=o)})),n<=a&&t.baselineGroup.push({y:e,s:n,e:a}),0===i)return"break"},i=0;;++i){if("break"===e(i))break}}},{key:"decode",value:function(t){var e=this;void 0!==t.notes&&(t.notes.forEach((function(t){e.notes.push(new x(t,e.config))})),this.generateBaseline(),this.notesX.push(1),this.notes.forEach((function(t,i){var n=0;i+1>=e.notes.length?n+=1:void 0!==e.notes[i+1]&&e.notes[i+1].l<t.l?n+=Math.pow(2,-e.notes[i+1].l):n+=Math.pow(2,-t.l);for(var a=1,r=1;r<=t.p;++r)a+=Math.pow(2,-r);n*=a,e.notesX.push(n),e.unitNum+=n}))),void 0!==t.dimens&&(this.dimens=t.dimens)}},{key:"code",value:function(){return{notes:this.notes.map((function(t){return t.code()}))}}}]),t}(),S=Object(v.a)(F.prototype,"notes",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=Object(v.a)(F.prototype,"dimens",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),F),it=function(t){var e=t.d,i=t.clazz;return h.a.createElement("line",{className:i+"__bar-line",x1:e.marginLeft+e.width+e.marginRight,y1:0,x2:e.marginLeft+e.width+e.marginRight,y2:e.height,strokeWidth:1,stroke:"black"})},nt=function(t){var e=t.bar,i=t.clazz;return h.a.createElement("g",{className:i+"__base-line"},e.baselineGroup.map((function(t,i){return h.a.createElement("line",{key:i,x1:e.notes[t.s].dimens.x,y1:e.notes[t.s].dimens.height+(t.y+1)*e.config.pointGap,x2:e.notes[t.e].dimens.x+e.notes[t.e].dimens.width,y2:e.notes[t.s].dimens.height+(t.y+1)*e.config.pointGap,stroke:"black",strokeWidth:1})})))},at=function(t){var e=t.bar,i=Object(tt.a)((function(){return[e.dimens,e.notes]})),n=Object(w.a)(i,2),a=n[0],r=n[1],o="muse-bar";return h.a.createElement("g",{className:o,transform:"translate("+(a.x-a.marginLeft)+","+(a.y-a.marginTop)+")",width:a.width+a.marginLeft+a.marginRight,height:a.height+a.marginTop+a.marginBottom},h.a.createElement(z,{dimens:a,clazz:o}),h.a.createElement(it,{d:a,clazz:o}),r.map((function(t,e){return h.a.createElement(Z,{key:e,note:t})})),h.a.createElement(nt,{bar:e,clazz:o}))},rt=(N=function(){function t(e,i){Object(m.a)(this,t),this.config=void 0,Object(b.a)(this,"bars",_,this),Object(b.a)(this,"dimens",L,this),this.config=i,this.decode(e)}return Object(f.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.bars&&t.bars.forEach((function(t){e.bars.push(new et(t,e.config))})),void 0!==t.dimens&&(this.dimens=t.dimens)}},{key:"code",value:function(){return{bars:this.bars.map((function(t){return t.code()}))}}}]),t}(),_=Object(v.a)(N.prototype,"bars",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=Object(v.a)(N.prototype,"dimens",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),N),ot=function(t){var e=t.track,i=Object(tt.a)((function(){return[e.bars,e.dimens]})),n=Object(w.a)(i,2),a=n[0],r=n[1];return h.a.createElement("g",{className:"muse-track",transform:"translate("+(r.x-r.marginLeft)+","+(r.y-r.marginTop)+")",width:r.width+r.marginLeft+r.marginRight,height:r.height+r.marginTop+r.marginBottom},h.a.createElement(z,{dimens:r,clazz:"muse-track"}),a.map((function(t,e){return h.a.createElement(at,{key:e,bar:t})})))},st=(T=function(){function t(e,i){Object(m.a)(this,t),this.config=void 0,Object(b.a)(this,"tracks",B,this),Object(b.a)(this,"dimens",R,this),this.config=i,this.decode(e)}return Object(f.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.tracks&&t.tracks.forEach((function(t){e.tracks.push(new rt(t,e.config))})),void 0!==t.dimens&&(this.dimens=t.dimens)}},{key:"code",value:function(){return{tracks:this.tracks.map((function(t){return t.code()}))}}}]),t}(),B=Object(v.a)(T.prototype,"tracks",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=Object(v.a)(T.prototype,"dimens",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),T),ct=function(t){var e=t.dimens,i=t.clazz;return h.a.createElement("g",{className:i+"__line-head"},h.a.createElement("line",{x1:0,y1:0,x2:0,y2:e.height,strokeWidth:1,stroke:"black"}))},ht=function(t){var e=t.line,i=Object(tt.a)((function(){return[e.tracks,e.dimens]})),n=Object(w.a)(i,2),a=n[0],r=n[1];return h.a.createElement("g",{className:"muse-line",transform:"translate("+(r.x-r.marginLeft)+","+(r.y-r.marginTop)+")",width:r.width+r.marginLeft+r.marginRight,height:r.height+r.marginTop+r.marginBottom},h.a.createElement(z,{dimens:r,clazz:"muse-line"}),h.a.createElement(ct,{dimens:r,clazz:"muse-line"}),a.map((function(t,e){return h.a.createElement(ot,{key:e,track:t})})))},lt=(C=function(){function t(e,i){Object(m.a)(this,t),this.config=void 0,Object(b.a)(this,"lines",M,this),Object(b.a)(this,"dimens",W,this),Object(b.a)(this,"index",I,this),this.config=i,this.decode(e)}return Object(f.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.lines&&t.lines.forEach((function(t){e.lines.push(new st(t,e.config))})),void 0!==t.dimens&&(this.dimens=t.dimens)}},{key:"code",value:function(){return{lines:this.lines.map((function(t){return t.code()}))}}}]),t}(),M=Object(v.a)(C.prototype,"lines",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=Object(v.a)(C.prototype,"dimens",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),I=Object(v.a)(C.prototype,"index",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C),ut=function(t){var e=t.index,i=t.dimens,n=t.clazz,a=t.config;return h.a.createElement("g",{className:n+"__page-index",transform:"translate("+(i.marginLeft+i.width/2)+","+(i.marginTop+i.height+i.marginBottom/2)+")"},h.a.createElement("text",{textAnchor:"middle",fontFamily:a.textFontFamily,fontSize:a.pageIndexFontSize},e.toString()))},mt=function(t){var e=t.page,i=Object(tt.a)((function(){return[e.lines,e.dimens,e.index]})),n=Object(w.a)(i,3),a=n[0],r=n[1],o=n[2],s="muse-page";return h.a.createElement("g",{className:s,transform:"translate("+(r.x-r.marginLeft)+","+(r.y-r.marginTop)+")",width:r.width+r.marginLeft+r.marginRight,height:r.height+r.marginTop+r.marginBottom},h.a.createElement(z,{dimens:r,clazz:s}),h.a.createElement(j,{dimens:r,clazz:s,show:!0}),h.a.createElement(ut,{index:o,dimens:r,clazz:s,config:e.config}),a.map((function(t,e){return h.a.createElement(ht,{key:e,line:t})})))},ft=(A=function t(e){Object(m.a)(this,t),Object(b.a)(this,"notation",H,this),this.notation=e},H=Object(v.a)(A.prototype,"notation",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A);var dt=(Y=function t(){Object(m.a)(this,t),Object(b.a)(this,"title",P,this),Object(b.a)(this,"subtitle",X,this),Object(b.a)(this,"author",D,this),Object(b.a)(this,"speed",J,this),Object(b.a)(this,"rhythmic",V,this),Object(b.a)(this,"C",$,this)},P=Object(v.a)(Y.prototype,"title",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=Object(v.a)(Y.prototype,"subtitle",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=Object(v.a)(Y.prototype,"author",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=Object(v.a)(Y.prototype,"speed",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=Object(v.a)(Y.prototype,"rhythmic",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$=Object(v.a)(Y.prototype,"C",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y),gt=(q=function(){function t(e,i){Object(m.a)(this,t),this.config=void 0,Object(b.a)(this,"pages",K,this),Object(b.a)(this,"info",Q,this),Object(b.a)(this,"dimens",U,this),this.config=i;var n=JSON.parse(e);this.decode(n)}return Object(f.a)(t,[{key:"decode",value:function(t){var e=this;void 0!==t.pages&&t.pages.forEach((function(t){e.pages.push(new lt(t,e.config))})),void 0!==t.dimens&&(this.dimens=t.dimens),void 0!==t.title&&(this.info.title=t.title),void 0!==t.subtitle&&(this.info.subtitle=t.subtitle),void 0!==t.author&&(this.info.author=t.author.toString().split("|")),void 0!==t.speed&&(this.info.speed=t.speed),t.rhythmic&&(this.info.rhythmic=t.rhythmic),t.C&&(this.info.C="1="+t.C)}},{key:"code",value:function(){var t=this,e=this.pages.map((function(t){return t.code()})),i=this.info.author.reduce((function(e,i,n){return n===t.info.author.length-1?e+i:e+i+"|"}));return{title:this.info.title,subtitle:this.info.subtitle,author:i,rhythmic:this.info.rhythmic,speed:this.info.speed,C:this.info.C,pages:e}}}]),t}(),K=Object(v.a)(q.prototype,"pages",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=Object(v.a)(q.prototype,"info",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dt}}),U=Object(v.a)(q.prototype,"dimens",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),q),pt=function(t){var e=t.notation.config,i=t.notation.info,n=t.clazz,a=t.notation.dimens,r=0;r+=e.pageMarginVertical;var o=h.a.createElement("text",{className:n+"__info-title",fontFamily:e.textFontFamily,width:a.width,textAnchor:"middle",fontSize:e.infoTitleFontSize,transform:"translate("+(a.marginLeft+a.width/2)+","+r+")"},i.title);r+=e.infoTitleFontSize+e.infoGap;var s=h.a.createElement("text",{className:n+"__info-subtitle",fontFamily:e.textFontFamily,width:a.width,textAnchor:"middle",fontSize:e.infoSubtitleFontSize,transform:"translate("+(a.marginLeft+a.width/2)+","+r+")"},i.subtitle),c=r,l=i.author.length,u=h.a.createElement("g",{className:n+"__info-author"},i.author.map((function(t,i){return c+=e.infoFontSize+e.infoGap,i<l-2&&(r+=e.infoFontSize+e.infoGap),h.a.createElement("text",{key:i,fontFamily:e.textFontFamily,width:a.width,fontSize:e.infoFontSize,textAnchor:"end",x:0,transform:"translate("+(a.width-e.pageMarginHorizontal)+","+c+")"},t)}))),m=r+(e.infoGap+e.infoSubtitleFontSize),f=m+(e.infoGap+e.infoFontSize),d=h.a.createElement("g",{className:n+"__info-rythmic",width:a.width},h.a.createElement("text",{fontFamily:e.textFontFamily,width:a.width,fontSize:e.infoFontSize,transform:"translate("+e.pageMarginHorizontal+","+m+")"},i.speed),h.a.createElement("text",{fontFamily:e.textFontFamily,width:a.width,fontSize:e.infoFontSize,transform:"translate("+e.pageMarginHorizontal+","+f+")"},i.C+" "+i.rhythmic));return h.a.createElement("g",{className:n+"__info",width:a.width},o,s,u,d)},bt=function(){var t=h.a.useContext(k.a).museRepo,e=Object(tt.a)((function(){return t.notation})),i=e.dimens,n="muse-notation";return h.a.createElement("svg",{className:"muse",width:e.dimens.width+20,height:e.dimens.height+20},h.a.createElement("g",{className:n,transform:"translate(10,10)",width:e.dimens.width,height:e.dimens.height},h.a.createElement(pt,{notation:e,clazz:n}),h.a.createElement(z,{dimens:i,clazz:n}),e.pages.map((function(t,e){return h.a.createElement(mt,{key:e,page:t})}))))};var vt=function(t){var e=function(t,e){var i=e.pageMarginHorizontal,n=e.pageMarginVertical,a=e.notationWidth-2*i,r=e.notationWidth*e.pageE-2*n,o=new gt(t,e),s=0;return o.pages.forEach((function(t,c){if(t.dimens.x=i,t.dimens.y=n*(c+1)+(n+r)*c,t.dimens.width=a,t.dimens.marginLeft=i,t.dimens.marginRight=i,t.dimens.height=r,t.dimens.marginTop=n,t.dimens.marginBottom=n,0===c){var h=0;h+=e.infoTitleFontSize+e.infoGap,h+=e.infoSubtitleFontSize+e.infoGap,h+=o.info.author.length*(e.infoFontSize+e.infoGap),t.dimens.marginTop+=h,t.dimens.height-=h,t.dimens.y+=h}t.index=c+1,s+=t.dimens.marginTop+t.dimens.marginBottom+t.dimens.height;var l=[],u=t.dimens.height;t.lines.forEach((function(i){i.dimens.width=t.dimens.width,i.dimens.x=t.dimens.marginLeft;var n=0,a=0,r=[];i.tracks.forEach((function(t){t.bars.forEach((function(t,e){void 0!==r[e]?r[e]=r[e]>t.unitNum?r[e]:t.unitNum:r.push(t.unitNum)}))}));var o=r.reduce((function(t,e){return t+e}));i.tracks.forEach((function(t){var s;t.dimens.y=a,t.dimens.width=i.dimens.width;var c=0,h=0,l=0;t.bars.forEach((function(i,n){i.unitNum=r[n],i.dimens.width=r[n]/o*t.dimens.width,i.dimens.x=l,l+=i.dimens.width;var a=[];i.notes.forEach((function(t){t.settle();var e=t.dimens.width,i=t.dimens.height,n=t.dimens.marginBottom;c=c>i?c:i,h=h>n?h:n,a.push(e)}));var s=0;i.notes.forEach((function(t,n){s+=i.notesX[n]/(i.unitNum+1)*i.dimens.width,t.dimens.x=s-e.noteWidth/2-t.dx}))})),t.dimens.height=c+h,t.bars.forEach((function(e){e.dimens.height=t.dimens.height,e.notes.forEach((function(t){t.dimens.height=c,t.dimens.marginBottom=h}))})),n+=(s=c+h)+e.trackGap,a+=s+e.trackGap})),n-=e.trackGap,i.dimens.height=n,u-=n,l.push(n)}));var m=u/(t.lines.length-1);t.lines.forEach((function(e,i){for(var n=t.dimens.marginTop,a=0;a<i;++a)n+=m+l[a];e.dimens.y=n}))})),o.dimens.width=a+2*i,o.dimens.height=s,o}(t.data,t.config?t.config:new p),i=new ft(e);return h.a.createElement(k.b,{museRepo:i},h.a.createElement(bt,null),h.a.createElement("button",{onClick:function(){console.log(i.notation.code())}},"log"))},yt=function(t){Object(d.a)(i,t);var e=Object(g.a)(i);function i(t){var n;return Object(m.a)(this,i),(n=e.call(this,t)).state={error:null,isLoaded:!1,data:""},n}return Object(f.a)(i,[{key:"componentDidMount",value:function(){var t=this;fetch("https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/b.json").then((function(t){return t.text()})).then((function(e){t.setState({isLoaded:!0,data:e})}),(function(e){t.setState({isLoaded:!0,error:e})}))}},{key:"render",value:function(){return h.a.createElement("div",{className:"app"},h.a.createElement("h1",null,"Example"),this.state.isLoaded?this.state.error?"error":h.a.createElement(vt,{data:this.state.data}):"loading...")}}]),i}(h.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(h.a.createElement(h.a.StrictMode,null,h.a.createElement(yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.0454db05.chunk.js.map